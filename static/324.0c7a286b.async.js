var B0=Object.defineProperty,V0=Object.defineProperties;var H0=Object.getOwnPropertyDescriptors;var Vs=Object.getOwnPropertySymbols;var Uf=Object.prototype.hasOwnProperty,Bf=Object.prototype.propertyIsEnumerable;var Ff=(we,oe,R)=>oe in we?B0(we,oe,{enumerable:!0,configurable:!0,writable:!0,value:R}):we[oe]=R,Zu=(we,oe)=>{for(var R in oe||(oe={}))Uf.call(oe,R)&&Ff(we,R,oe[R]);if(Vs)for(var R of Vs(oe))Bf.call(oe,R)&&Ff(we,R,oe[R]);return we},Vf=(we,oe)=>V0(we,H0(oe));var Ju=(we,oe)=>{var R={};for(var j in we)Uf.call(we,j)&&oe.indexOf(j)<0&&(R[j]=we[j]);if(we!=null&&Vs)for(var j of Vs(we))oe.indexOf(j)<0&&Bf.call(we,j)&&(R[j]=we[j]);return R};(self.webpackChunkai_frontend=self.webpackChunkai_frontend||[]).push([[324],{37567:function(we,oe,R){"use strict";var j=R(83577),ye=function(N,Q){return Q===void 0&&(Q=!1),function(Ce,Z,J){if(Ce){N(Ce);return}if(Z.statusCode>=400&&Z.statusCode<=599){var Te=J;if(Q)if(j.TextDecoder){var K=x(Z.headers&&Z.headers["content-type"]);try{Te=new TextDecoder(K).decode(J)}catch(le){}}else Te=String.fromCharCode.apply(null,new Uint8Array(J));N({cause:Te});return}N(null,J)}};function x(ge){return ge===void 0&&(ge=""),ge.toLowerCase().split(";").reduce(function(N,Q){var Ce=Q.split("="),Z=Ce[0],J=Ce[1];return Z.trim()==="charset"?J.trim():N},"utf-8")}we.exports=ye},38626:function(we,oe,R){"use strict";var j=R(83577),ye=R(9222),x=R(10425);Z.httpHandler=R(37567);var ge=function(Fe){var Ve={};return Fe&&Fe.trim().split(`
`).forEach(function(et){var ut=et.indexOf(":"),me=et.slice(0,ut).trim().toLowerCase(),Be=et.slice(ut+1).trim();typeof Ve[me]=="undefined"?Ve[me]=Be:Array.isArray(Ve[me])?Ve[me].push(Be):Ve[me]=[Ve[me],Be]}),Ve};we.exports=Z,we.exports.default=Z,Z.XMLHttpRequest=j.XMLHttpRequest||K,Z.XDomainRequest="withCredentials"in new Z.XMLHttpRequest?Z.XMLHttpRequest:j.XDomainRequest,N(["get","put","post","patch","head","delete"],function(le){Z[le==="delete"?"del":le]=function(Fe,Ve,et){return Ve=Ce(Fe,Ve,et),Ve.method=le.toUpperCase(),J(Ve)}});function N(le,Fe){for(var Ve=0;Ve<le.length;Ve++)Fe(le[Ve])}function Q(le){for(var Fe in le)if(le.hasOwnProperty(Fe))return!1;return!0}function Ce(le,Fe,Ve){var et=le;return x(Fe)?(Ve=Fe,typeof le=="string"&&(et={uri:le})):et=ye({},Fe,{uri:le}),et.callback=Ve,et}function Z(le,Fe,Ve){return Fe=Ce(le,Fe,Ve),J(Fe)}function J(le){if(typeof le.callback=="undefined")throw new Error("callback argument missing");var Fe=!1,Ve=function(_e,pe,Ie){Fe||(Fe=!0,le.callback(_e,pe,Ie))};function et(){Se.readyState===4&&setTimeout(Be,0)}function ut(){var re=void 0;if(Se.response?re=Se.response:re=Se.responseText||Te(Se),D)try{re=JSON.parse(re)}catch(_e){}return re}function me(re){return clearTimeout(B),re instanceof Error||(re=new Error(""+(re||"Unknown XMLHttpRequest Error"))),re.statusCode=0,Ve(re,de)}function Be(){if(!Ye){var re;clearTimeout(B),le.useXDR&&Se.status===void 0?re=200:re=Se.status===1223?204:Se.status;var _e=de,pe=null;return re!==0?(_e={body:ut(),statusCode:re,method:Xe,headers:{},url:Ae,rawRequest:Se},Se.getAllResponseHeaders&&(_e.headers=ge(Se.getAllResponseHeaders()))):pe=new Error("Internal XMLHttpRequest Error"),Ve(pe,_e,_e.body)}}var Se=le.xhr||null;Se||(le.cors||le.useXDR?Se=new Z.XDomainRequest:Se=new Z.XMLHttpRequest);var Le,Ye,Ae=Se.url=le.uri||le.url,Xe=Se.method=le.method||"GET",qe=le.body||le.data,We=Se.headers=le.headers||{},I=!!le.sync,D=!1,B,de={body:void 0,headers:{},statusCode:0,method:Xe,url:Ae,rawRequest:Se};if("json"in le&&le.json!==!1&&(D=!0,We.accept||We.Accept||(We.Accept="application/json"),Xe!=="GET"&&Xe!=="HEAD"&&(We["content-type"]||We["Content-Type"]||(We["Content-Type"]="application/json"),qe=JSON.stringify(le.json===!0?qe:le.json))),Se.onreadystatechange=et,Se.onload=Be,Se.onerror=me,Se.onprogress=function(){},Se.onabort=function(){Ye=!0},Se.ontimeout=me,Se.open(Xe,Ae,!I,le.username,le.password),I||(Se.withCredentials=!!le.withCredentials),!I&&le.timeout>0&&(B=setTimeout(function(){if(!Ye){Ye=!0,Se.abort("timeout");var re=new Error("XMLHttpRequest timeout");re.code="ETIMEDOUT",me(re)}},le.timeout)),Se.setRequestHeader)for(Le in We)We.hasOwnProperty(Le)&&Se.setRequestHeader(Le,We[Le]);else if(le.headers&&!Q(le.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in le&&(Se.responseType=le.responseType),"beforeSend"in le&&typeof le.beforeSend=="function"&&le.beforeSend(Se),Se.send(qe||null),Se}function Te(le){try{if(le.responseType==="document")return le.responseXML;var Fe=le.responseXML&&le.responseXML.documentElement.nodeName==="parsererror";if(le.responseType===""&&!Fe)return le.responseXML}catch(Ve){}return null}function K(){}},38870:function(we,oe){"use strict";function R(ge,N,Q){if(Q===void 0&&(Q=Array.prototype),ge&&typeof Q.find=="function")return Q.find.call(ge,N);for(var Ce=0;Ce<ge.length;Ce++)if(Object.prototype.hasOwnProperty.call(ge,Ce)){var Z=ge[Ce];if(N.call(void 0,Z,Ce,ge))return Z}}function j(ge,N){return N===void 0&&(N=Object),N&&typeof N.freeze=="function"?N.freeze(ge):ge}var ye=j({HTML:"text/html",isHTML:function(ge){return ge===ye.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),x=j({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(ge){return ge===x.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});oe.find=R,oe.freeze=j,oe.MIME_TYPE=ye,oe.NAMESPACE=x},70814:function(we,oe,R){var j,ye=R(38870),x=R(87131),ge=R(40315),N=R(9542),Q=x.DOMImplementation,Ce=ye.NAMESPACE,Z=N.ParseError,J=N.XMLReader;function Te(me){this.options=me||{locator:{}}}Te.prototype.parseFromString=function(me,Be){var Se=this.options,Le=new J,Ye=Se.domBuilder||new le,Ae=Se.errorHandler,Xe=Se.locator,qe=Se.xmlns||{},We=/\/x?html?$/.test(Be),I=We?ge.HTML_ENTITIES:ge.XML_ENTITIES;return Xe&&Ye.setDocumentLocator(Xe),Le.errorHandler=K(Ae,Ye,Xe),Le.domBuilder=Se.domBuilder||Ye,We&&(qe[""]=Ce.HTML),qe.xml=qe.xml||Ce.XML,me&&typeof me=="string"?Le.parse(me,qe,I):Le.errorHandler.error("invalid doc source"),Ye.doc};function K(me,Be,Se){if(!me){if(Be instanceof le)return Be;me=Be}var Le={},Ye=me instanceof Function;Se=Se||{};function Ae(Xe){var qe=me[Xe];!qe&&Ye&&(qe=me.length==2?function(We){me(Xe,We)}:me),Le[Xe]=qe&&function(We){qe("[xmldom "+Xe+"]	"+We+Ve(Se))}||function(){}}return Ae("warning"),Ae("error"),Ae("fatalError"),Le}function le(){this.cdata=!1}function Fe(me,Be){Be.lineNumber=me.lineNumber,Be.columnNumber=me.columnNumber}le.prototype={startDocument:function(){this.doc=new Q().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(me,Be,Se,Le){var Ye=this.doc,Ae=Ye.createElementNS(me,Se||Be),Xe=Le.length;ut(this,Ae),this.currentElement=Ae,this.locator&&Fe(this.locator,Ae);for(var qe=0;qe<Xe;qe++){var me=Le.getURI(qe),We=Le.getValue(qe),Se=Le.getQName(qe),I=Ye.createAttributeNS(me,Se);this.locator&&Fe(Le.getLocator(qe),I),I.value=I.nodeValue=We,Ae.setAttributeNode(I)}},endElement:function(me,Be,Se){var Le=this.currentElement,Ye=Le.tagName;this.currentElement=Le.parentNode},startPrefixMapping:function(me,Be){},endPrefixMapping:function(me){},processingInstruction:function(me,Be){var Se=this.doc.createProcessingInstruction(me,Be);this.locator&&Fe(this.locator,Se),ut(this,Se)},ignorableWhitespace:function(me,Be,Se){},characters:function(me,Be,Se){if(me=et.apply(this,arguments),me){if(this.cdata)var Le=this.doc.createCDATASection(me);else var Le=this.doc.createTextNode(me);this.currentElement?this.currentElement.appendChild(Le):/^\s*$/.test(me)&&this.doc.appendChild(Le),this.locator&&Fe(this.locator,Le)}},skippedEntity:function(me){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(me){(this.locator=me)&&(me.lineNumber=0)},comment:function(me,Be,Se){me=et.apply(this,arguments);var Le=this.doc.createComment(me);this.locator&&Fe(this.locator,Le),ut(this,Le)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(me,Be,Se){var Le=this.doc.implementation;if(Le&&Le.createDocumentType){var Ye=Le.createDocumentType(me,Be,Se);this.locator&&Fe(this.locator,Ye),ut(this,Ye),this.doc.doctype=Ye}},warning:function(me){console.warn("[xmldom warning]	"+me,Ve(this.locator))},error:function(me){console.error("[xmldom error]	"+me,Ve(this.locator))},fatalError:function(me){throw new Z(me,this.locator)}};function Ve(me){if(me)return`
@`+(me.systemId||"")+"#[line:"+me.lineNumber+",col:"+me.columnNumber+"]"}function et(me,Be,Se){return typeof me=="string"?me.substr(Be,Se):me.length>=Be+Se||Be?new java.lang.String(me,Be,Se)+"":me}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(me){le.prototype[me]=function(){return null}});function ut(me,Be){me.currentElement?me.currentElement.appendChild(Be):me.doc.appendChild(Be)}j=le,oe.DOMParser=Te,j=x.DOMImplementation,j=x.XMLSerializer},87131:function(we,oe,R){var j=R(38870),ye=j.find,x=j.NAMESPACE;function ge(b){return b!==""}function N(b){return b?b.split(/[\t\n\f\r ]+/).filter(ge):[]}function Q(b,S){return b.hasOwnProperty(S)||(b[S]=!0),b}function Ce(b){if(!b)return[];var S=N(b);return Object.keys(S.reduce(Q,{}))}function Z(b){return function(S){return b&&b.indexOf(S)!==-1}}function J(b,S){for(var O in b)Object.prototype.hasOwnProperty.call(b,O)&&(S[O]=b[O])}function Te(b,S){var O=b.prototype;if(!(O instanceof S)){let ve=function(){};var W=ve;ve.prototype=S.prototype,ve=new ve,J(O,ve),b.prototype=O=ve}O.constructor!=b&&(typeof b!="function"&&console.error("unknown Class:"+b),O.constructor=b)}var K={},le=K.ELEMENT_NODE=1,Fe=K.ATTRIBUTE_NODE=2,Ve=K.TEXT_NODE=3,et=K.CDATA_SECTION_NODE=4,ut=K.ENTITY_REFERENCE_NODE=5,me=K.ENTITY_NODE=6,Be=K.PROCESSING_INSTRUCTION_NODE=7,Se=K.COMMENT_NODE=8,Le=K.DOCUMENT_NODE=9,Ye=K.DOCUMENT_TYPE_NODE=10,Ae=K.DOCUMENT_FRAGMENT_NODE=11,Xe=K.NOTATION_NODE=12,qe={},We={},I=qe.INDEX_SIZE_ERR=(We[1]="Index size error",1),D=qe.DOMSTRING_SIZE_ERR=(We[2]="DOMString size error",2),B=qe.HIERARCHY_REQUEST_ERR=(We[3]="Hierarchy request error",3),de=qe.WRONG_DOCUMENT_ERR=(We[4]="Wrong document",4),re=qe.INVALID_CHARACTER_ERR=(We[5]="Invalid character",5),_e=qe.NO_DATA_ALLOWED_ERR=(We[6]="No data allowed",6),pe=qe.NO_MODIFICATION_ALLOWED_ERR=(We[7]="No modification allowed",7),Ie=qe.NOT_FOUND_ERR=(We[8]="Not found",8),ne=qe.NOT_SUPPORTED_ERR=(We[9]="Not supported",9),ee=qe.INUSE_ATTRIBUTE_ERR=(We[10]="Attribute in use",10),ce=qe.INVALID_STATE_ERR=(We[11]="Invalid state",11),fe=qe.SYNTAX_ERR=(We[12]="Syntax error",12),ke=qe.INVALID_MODIFICATION_ERR=(We[13]="Invalid modification",13),Ke=qe.NAMESPACE_ERR=(We[14]="Invalid namespace",14),ze=qe.INVALID_ACCESS_ERR=(We[15]="Invalid access",15);function Re(b,S){if(S instanceof Error)var O=S;else O=this,Error.call(this,We[b]),this.message=We[b],Error.captureStackTrace&&Error.captureStackTrace(this,Re);return O.code=b,S&&(this.message=this.message+": "+S),O}Re.prototype=Error.prototype,J(qe,Re);function Ne(){}Ne.prototype={length:0,item:function(b){return this[b]||null},toString:function(b,S){for(var O=[],W=0;W<this.length;W++)Di(this[W],O,b,S);return O.join("")},filter:function(b){return Array.prototype.filter.call(this,b)},indexOf:function(b){return Array.prototype.indexOf.call(this,b)}};function bt(b,S){this._node=b,this._refresh=S,Bt(this)}function Bt(b){var S=b._node._inc||b._node.ownerDocument._inc;if(b._inc!=S){var O=b._refresh(b._node);Or(b,"length",O.length),J(O,b),b._inc=S}}bt.prototype.item=function(b){return Bt(this),this[b]},Te(bt,Ne);function Ct(){}function it(b,S){for(var O=b.length;O--;)if(b[O]===S)return O}function Zt(b,S,O,W){if(W?S[it(S,W)]=O:S[S.length++]=O,b){O.ownerElement=b;var ve=b.ownerDocument;ve&&(W&&Pi(ve,b,W),Zi(ve,b,O))}}function Ai(b,S,O){var W=it(S,O);if(W>=0){for(var ve=S.length-1;W<ve;)S[W]=S[++W];if(S.length=ve,b){var He=b.ownerDocument;He&&(Pi(He,b,O),O.ownerElement=null)}}else throw new Re(Ie,new Error(b.tagName+"@"+O))}Ct.prototype={length:0,item:Ne.prototype.item,getNamedItem:function(b){for(var S=this.length;S--;){var O=this[S];if(O.nodeName==b)return O}},setNamedItem:function(b){var S=b.ownerElement;if(S&&S!=this._ownerElement)throw new Re(ee);var O=this.getNamedItem(b.nodeName);return Zt(this._ownerElement,this,b,O),O},setNamedItemNS:function(b){var S=b.ownerElement,O;if(S&&S!=this._ownerElement)throw new Re(ee);return O=this.getNamedItemNS(b.namespaceURI,b.localName),Zt(this._ownerElement,this,b,O),O},removeNamedItem:function(b){var S=this.getNamedItem(b);return Ai(this._ownerElement,this,S),S},removeNamedItemNS:function(b,S){var O=this.getNamedItemNS(b,S);return Ai(this._ownerElement,this,O),O},getNamedItemNS:function(b,S){for(var O=this.length;O--;){var W=this[O];if(W.localName==S&&W.namespaceURI==b)return W}return null}};function Bi(){}Bi.prototype={hasFeature:function(b,S){return!0},createDocument:function(b,S,O){var W=new lt;if(W.implementation=this,W.childNodes=new Ne,W.doctype=O||null,O&&W.appendChild(O),S){var ve=W.createElementNS(b,S);W.appendChild(ve)}return W},createDocumentType:function(b,S,O){var W=new ki;return W.name=b,W.nodeName=b,W.publicId=S||"",W.systemId=O||"",W}};function Qe(){}Qe.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(b,S){return xt(this,b,S)},replaceChild:function(b,S){xt(this,b,S,Rn),S&&this.removeChild(S)},removeChild:function(b){return Vi(this,b)},appendChild:function(b){return this.insertBefore(b,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(b){return Wi(this.ownerDocument||this,this,b)},normalize:function(){for(var b=this.firstChild;b;){var S=b.nextSibling;S&&S.nodeType==Ve&&b.nodeType==Ve?(this.removeChild(S),b.appendData(S.data)):(b.normalize(),b=S)}},isSupported:function(b,S){return this.ownerDocument.implementation.hasFeature(b,S)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(b){for(var S=this;S;){var O=S._nsMap;if(O){for(var W in O)if(Object.prototype.hasOwnProperty.call(O,W)&&O[W]===b)return W}S=S.nodeType==Fe?S.ownerDocument:S.parentNode}return null},lookupNamespaceURI:function(b){for(var S=this;S;){var O=S._nsMap;if(O&&b in O&&Object.prototype.hasOwnProperty.call(O,b))return O[b];S=S.nodeType==Fe?S.ownerDocument:S.parentNode}return null},isDefaultNamespace:function(b){var S=this.lookupPrefix(b);return S==null}};function ft(b){return b=="<"&&"&lt;"||b==">"&&"&gt;"||b=="&"&&"&amp;"||b=='"'&&"&quot;"||"&#"+b.charCodeAt()+";"}J(K,Qe),J(K,Qe.prototype);function Gt(b,S){if(S(b))return!0;if(b=b.firstChild)do if(Gt(b,S))return!0;while(b=b.nextSibling)}function lt(){this.ownerDocument=this}function Zi(b,S,O){b&&b._inc++;var W=O.namespaceURI;W===x.XMLNS&&(S._nsMap[O.prefix?O.localName:""]=O.value)}function Pi(b,S,O,W){b&&b._inc++;var ve=O.namespaceURI;ve===x.XMLNS&&delete S._nsMap[O.prefix?O.localName:""]}function mi(b,S,O){if(b&&b._inc){b._inc++;var W=S.childNodes;if(O)W[W.length++]=O;else{for(var ve=S.firstChild,He=0;ve;)W[He++]=ve,ve=ve.nextSibling;W.length=He,delete W[W.length]}}}function Vi(b,S){var O=S.previousSibling,W=S.nextSibling;return O?O.nextSibling=W:b.firstChild=W,W?W.previousSibling=O:b.lastChild=O,S.parentNode=null,S.previousSibling=null,S.nextSibling=null,mi(b.ownerDocument,b),S}function rt(b){return b&&(b.nodeType===Qe.DOCUMENT_NODE||b.nodeType===Qe.DOCUMENT_FRAGMENT_NODE||b.nodeType===Qe.ELEMENT_NODE)}function mt(b){return b&&(li(b)||Ji(b)||Vt(b)||b.nodeType===Qe.DOCUMENT_FRAGMENT_NODE||b.nodeType===Qe.COMMENT_NODE||b.nodeType===Qe.PROCESSING_INSTRUCTION_NODE)}function Vt(b){return b&&b.nodeType===Qe.DOCUMENT_TYPE_NODE}function li(b){return b&&b.nodeType===Qe.ELEMENT_NODE}function Ji(b){return b&&b.nodeType===Qe.TEXT_NODE}function vr(b,S){var O=b.childNodes||[];if(ye(O,li)||Vt(S))return!1;var W=ye(O,Vt);return!(S&&W&&O.indexOf(W)>O.indexOf(S))}function Pr(b,S){var O=b.childNodes||[];function W(He){return li(He)&&He!==S}if(ye(O,W))return!1;var ve=ye(O,Vt);return!(S&&ve&&O.indexOf(ve)>O.indexOf(S))}function Me(b,S,O){if(!rt(b))throw new Re(B,"Unexpected parent node type "+b.nodeType);if(O&&O.parentNode!==b)throw new Re(Ie,"child not in parent");if(!mt(S)||Vt(S)&&b.nodeType!==Qe.DOCUMENT_NODE)throw new Re(B,"Unexpected node type "+S.nodeType+" for parent node type "+b.nodeType)}function ba(b,S,O){var W=b.childNodes||[],ve=S.childNodes||[];if(S.nodeType===Qe.DOCUMENT_FRAGMENT_NODE){var He=ve.filter(li);if(He.length>1||ye(ve,Ji))throw new Re(B,"More than one element or text in fragment");if(He.length===1&&!vr(b,O))throw new Re(B,"Element in fragment can not be inserted before doctype")}if(li(S)&&!vr(b,O))throw new Re(B,"Only one element can be added and only after doctype");if(Vt(S)){if(ye(W,Vt))throw new Re(B,"Only one doctype is allowed");var Ze=ye(W,li);if(O&&W.indexOf(Ze)<W.indexOf(O))throw new Re(B,"Doctype can only be inserted before an element");if(!O&&Ze)throw new Re(B,"Doctype can not be appended since element is present")}}function Rn(b,S,O){var W=b.childNodes||[],ve=S.childNodes||[];if(S.nodeType===Qe.DOCUMENT_FRAGMENT_NODE){var He=ve.filter(li);if(He.length>1||ye(ve,Ji))throw new Re(B,"More than one element or text in fragment");if(He.length===1&&!Pr(b,O))throw new Re(B,"Element in fragment can not be inserted before doctype")}if(li(S)&&!Pr(b,O))throw new Re(B,"Only one element can be added and only after doctype");if(Vt(S)){let Jt=function(Xt){return Vt(Xt)&&Xt!==O};var qt=Jt;if(ye(W,Jt))throw new Re(B,"Only one doctype is allowed");var Ze=ye(W,li);if(O&&W.indexOf(Ze)<W.indexOf(O))throw new Re(B,"Doctype can only be inserted before an element")}}function xt(b,S,O,W){Me(b,S,O),b.nodeType===Qe.DOCUMENT_NODE&&(W||ba)(b,S,O);var ve=S.parentNode;if(ve&&ve.removeChild(S),S.nodeType===Ae){var He=S.firstChild;if(He==null)return S;var Ze=S.lastChild}else He=Ze=S;var qt=O?O.previousSibling:b.lastChild;He.previousSibling=qt,Ze.nextSibling=O,qt?qt.nextSibling=He:b.firstChild=He,O==null?b.lastChild=Ze:O.previousSibling=Ze;do He.parentNode=b;while(He!==Ze&&(He=He.nextSibling));return mi(b.ownerDocument||b,b),S.nodeType==Ae&&(S.firstChild=S.lastChild=null),S}function _r(b,S){return S.parentNode&&S.parentNode.removeChild(S),S.parentNode=b,S.previousSibling=b.lastChild,S.nextSibling=null,S.previousSibling?S.previousSibling.nextSibling=S:b.firstChild=S,b.lastChild=S,mi(b.ownerDocument,b,S),S}lt.prototype={nodeName:"#document",nodeType:Le,doctype:null,documentElement:null,_inc:1,insertBefore:function(b,S){if(b.nodeType==Ae){for(var O=b.firstChild;O;){var W=O.nextSibling;this.insertBefore(O,S),O=W}return b}return xt(this,b,S),b.ownerDocument=this,this.documentElement===null&&b.nodeType===le&&(this.documentElement=b),b},removeChild:function(b){return this.documentElement==b&&(this.documentElement=null),Vi(this,b)},replaceChild:function(b,S){xt(this,b,S,Rn),b.ownerDocument=this,S&&this.removeChild(S),li(b)&&(this.documentElement=b)},importNode:function(b,S){return en(this,b,S)},getElementById:function(b){var S=null;return Gt(this.documentElement,function(O){if(O.nodeType==le&&O.getAttribute("id")==b)return S=O,!0}),S},getElementsByClassName:function(b){var S=Ce(b);return new bt(this,function(O){var W=[];return S.length>0&&Gt(O.documentElement,function(ve){if(ve!==O&&ve.nodeType===le){var He=ve.getAttribute("class");if(He){var Ze=b===He;if(!Ze){var qt=Ce(He);Ze=S.every(Z(qt))}Ze&&W.push(ve)}}}),W})},createElement:function(b){var S=new bi;S.ownerDocument=this,S.nodeName=b,S.tagName=b,S.localName=b,S.childNodes=new Ne;var O=S.attributes=new Ct;return O._ownerElement=S,S},createDocumentFragment:function(){var b=new kr;return b.ownerDocument=this,b.childNodes=new Ne,b},createTextNode:function(b){var S=new Ii;return S.ownerDocument=this,S.appendData(b),S},createComment:function(b){var S=new er;return S.ownerDocument=this,S.appendData(b),S},createCDATASection:function(b){var S=new tr;return S.ownerDocument=this,S.appendData(b),S},createProcessingInstruction:function(b,S){var O=new Dr;return O.ownerDocument=this,O.tagName=O.target=b,O.nodeValue=O.data=S,O},createAttribute:function(b){var S=new Ir;return S.ownerDocument=this,S.name=b,S.nodeName=b,S.localName=b,S.specified=!0,S},createEntityReference:function(b){var S=new Qr;return S.ownerDocument=this,S.nodeName=b,S},createElementNS:function(b,S){var O=new bi,W=S.split(":"),ve=O.attributes=new Ct;return O.childNodes=new Ne,O.ownerDocument=this,O.nodeName=S,O.tagName=S,O.namespaceURI=b,W.length==2?(O.prefix=W[0],O.localName=W[1]):O.localName=S,ve._ownerElement=O,O},createAttributeNS:function(b,S){var O=new Ir,W=S.split(":");return O.ownerDocument=this,O.nodeName=S,O.name=S,O.namespaceURI=b,O.specified=!0,W.length==2?(O.prefix=W[0],O.localName=W[1]):O.localName=S,O}},Te(lt,Qe);function bi(){this._nsMap={}}bi.prototype={nodeType:le,hasAttribute:function(b){return this.getAttributeNode(b)!=null},getAttribute:function(b){var S=this.getAttributeNode(b);return S&&S.value||""},getAttributeNode:function(b){return this.attributes.getNamedItem(b)},setAttribute:function(b,S){var O=this.ownerDocument.createAttribute(b);O.value=O.nodeValue=""+S,this.setAttributeNode(O)},removeAttribute:function(b){var S=this.getAttributeNode(b);S&&this.removeAttributeNode(S)},appendChild:function(b){return b.nodeType===Ae?this.insertBefore(b,null):_r(this,b)},setAttributeNode:function(b){return this.attributes.setNamedItem(b)},setAttributeNodeNS:function(b){return this.attributes.setNamedItemNS(b)},removeAttributeNode:function(b){return this.attributes.removeNamedItem(b.nodeName)},removeAttributeNS:function(b,S){var O=this.getAttributeNodeNS(b,S);O&&this.removeAttributeNode(O)},hasAttributeNS:function(b,S){return this.getAttributeNodeNS(b,S)!=null},getAttributeNS:function(b,S){var O=this.getAttributeNodeNS(b,S);return O&&O.value||""},setAttributeNS:function(b,S,O){var W=this.ownerDocument.createAttributeNS(b,S);W.value=W.nodeValue=""+O,this.setAttributeNode(W)},getAttributeNodeNS:function(b,S){return this.attributes.getNamedItemNS(b,S)},getElementsByTagName:function(b){return new bt(this,function(S){var O=[];return Gt(S,function(W){W!==S&&W.nodeType==le&&(b==="*"||W.tagName==b)&&O.push(W)}),O})},getElementsByTagNameNS:function(b,S){return new bt(this,function(O){var W=[];return Gt(O,function(ve){ve!==O&&ve.nodeType===le&&(b==="*"||ve.namespaceURI===b)&&(S==="*"||ve.localName==S)&&W.push(ve)}),W})}},lt.prototype.getElementsByTagName=bi.prototype.getElementsByTagName,lt.prototype.getElementsByTagNameNS=bi.prototype.getElementsByTagNameNS,Te(bi,Qe);function Ir(){}Ir.prototype.nodeType=Fe,Te(Ir,Qe);function Hi(){}Hi.prototype={data:"",substringData:function(b,S){return this.data.substring(b,b+S)},appendData:function(b){b=this.data+b,this.nodeValue=this.data=b,this.length=b.length},insertData:function(b,S){this.replaceData(b,0,S)},appendChild:function(b){throw new Error(We[B])},deleteData:function(b,S){this.replaceData(b,S,"")},replaceData:function(b,S,O){var W=this.data.substring(0,b),ve=this.data.substring(b+S);O=W+O+ve,this.nodeValue=this.data=O,this.length=O.length}},Te(Hi,Qe);function Ii(){}Ii.prototype={nodeName:"#text",nodeType:Ve,splitText:function(b){var S=this.data,O=S.substring(b);S=S.substring(0,b),this.data=this.nodeValue=S,this.length=S.length;var W=this.ownerDocument.createTextNode(O);return this.parentNode&&this.parentNode.insertBefore(W,this.nextSibling),W}},Te(Ii,Hi);function er(){}er.prototype={nodeName:"#comment",nodeType:Se},Te(er,Hi);function tr(){}tr.prototype={nodeName:"#cdata-section",nodeType:et},Te(tr,Hi);function ki(){}ki.prototype.nodeType=Ye,Te(ki,Qe);function ji(){}ji.prototype.nodeType=Xe,Te(ji,Qe);function nt(){}nt.prototype.nodeType=me,Te(nt,Qe);function Qr(){}Qr.prototype.nodeType=ut,Te(Qr,Qe);function kr(){}kr.prototype.nodeName="#document-fragment",kr.prototype.nodeType=Ae,Te(kr,Qe);function Dr(){}Dr.prototype.nodeType=Be,Te(Dr,Qe);function Zr(){}Zr.prototype.serializeToString=function(b,S,O){return Jr.call(b,S,O)},Qe.prototype.toString=Jr;function Jr(b,S){var O=[],W=this.nodeType==9&&this.documentElement||this,ve=W.prefix,He=W.namespaceURI;if(He&&ve==null){var ve=W.lookupPrefix(He);if(ve==null)var Ze=[{namespace:He,prefix:null}]}return Di(this,O,b,S,Ze),O.join("")}function yr(b,S,O){var W=b.prefix||"",ve=b.namespaceURI;if(!ve||W==="xml"&&ve===x.XML||ve===x.XMLNS)return!1;for(var He=O.length;He--;){var Ze=O[He];if(Ze.prefix===W)return Ze.namespace!==ve}return!0}function dt(b,S,O){b.push(" ",S,'="',O.replace(/[<&"]/g,ft),'"')}function Di(b,S,O,W,ve){if(ve||(ve=[]),W)if(b=W(b),b){if(typeof b=="string"){S.push(b);return}}else return;switch(b.nodeType){case le:var He=b.attributes,Ze=He.length,Mt=b.firstChild,qt=b.tagName;O=x.isHTML(b.namespaceURI)||O;var Jt=qt;if(!O&&!b.prefix&&b.namespaceURI){for(var Xt,ei=0;ei<He.length;ei++)if(He.item(ei).name==="xmlns"){Xt=He.item(ei).value;break}if(!Xt)for(var Oi=ve.length-1;Oi>=0;Oi--){var $t=ve[Oi];if($t.prefix===""&&$t.namespace===b.namespaceURI){Xt=$t.namespace;break}}if(Xt!==b.namespaceURI)for(var Oi=ve.length-1;Oi>=0;Oi--){var $t=ve[Oi];if($t.namespace===b.namespaceURI){$t.prefix&&(Jt=$t.prefix+":"+qt);break}}}S.push("<",Jt);for(var xi=0;xi<Ze;xi++){var di=He.item(xi);di.prefix=="xmlns"?ve.push({prefix:di.localName,namespace:di.value}):di.nodeName=="xmlns"&&ve.push({prefix:"",namespace:di.value})}for(var xi=0;xi<Ze;xi++){var di=He.item(xi);if(yr(di,O,ve)){var Si=di.prefix||"",Gi=di.namespaceURI;dt(S,Si?"xmlns:"+Si:"xmlns",Gi),ve.push({prefix:Si,namespace:Gi})}Di(di,S,O,W,ve)}if(qt===Jt&&yr(b,O,ve)){var Si=b.prefix||"",Gi=b.namespaceURI;dt(S,Si?"xmlns:"+Si:"xmlns",Gi),ve.push({prefix:Si,namespace:Gi})}if(Mt||O&&!/^(?:meta|link|img|br|hr|input)$/i.test(qt)){if(S.push(">"),O&&/^script$/i.test(qt))for(;Mt;)Mt.data?S.push(Mt.data):Di(Mt,S,O,W,ve.slice()),Mt=Mt.nextSibling;else for(;Mt;)Di(Mt,S,O,W,ve.slice()),Mt=Mt.nextSibling;S.push("</",Jt,">")}else S.push("/>");return;case Le:case Ae:for(var Mt=b.firstChild;Mt;)Di(Mt,S,O,W,ve.slice()),Mt=Mt.nextSibling;return;case Fe:return dt(S,b.name,b.value);case Ve:return S.push(b.data.replace(/[<&]/g,ft).replace(/]]>/g,"]]&gt;"));case et:return S.push("<![CDATA[",b.data,"]]>");case Se:return S.push("<!--",b.data,"-->");case Ye:var tn=b.publicId,ci=b.systemId;if(S.push("<!DOCTYPE ",b.name),tn)S.push(" PUBLIC ",tn),ci&&ci!="."&&S.push(" ",ci),S.push(">");else if(ci&&ci!=".")S.push(" SYSTEM ",ci,">");else{var Li=b.internalSubset;Li&&S.push(" [",Li,"]"),S.push(">")}return;case Be:return S.push("<?",b.target," ",b.data,"?>");case ut:return S.push("&",b.nodeName,";");default:S.push("??",b.nodeName)}}function en(b,S,O){var W;switch(S.nodeType){case le:W=S.cloneNode(!1),W.ownerDocument=b;case Ae:break;case Fe:O=!0;break}if(W||(W=S.cloneNode(!1)),W.ownerDocument=b,W.parentNode=null,O)for(var ve=S.firstChild;ve;)W.appendChild(en(b,ve,O)),ve=ve.nextSibling;return W}function Wi(b,S,O){var W=new S.constructor;for(var ve in S)if(Object.prototype.hasOwnProperty.call(S,ve)){var He=S[ve];typeof He!="object"&&He!=W[ve]&&(W[ve]=He)}switch(S.childNodes&&(W.childNodes=new Ne),W.ownerDocument=b,W.nodeType){case le:var Ze=S.attributes,qt=W.attributes=new Ct,Jt=Ze.length;qt._ownerElement=W;for(var Xt=0;Xt<Jt;Xt++)W.setAttributeNode(Wi(b,Ze.item(Xt),!0));break;case Fe:O=!0}if(O)for(var ei=S.firstChild;ei;)W.appendChild(Wi(b,ei,O)),ei=ei.nextSibling;return W}function Or(b,S,O){b[S]=O}try{if(Object.defineProperty){let b=function(S){switch(S.nodeType){case le:case Ae:var O=[];for(S=S.firstChild;S;)S.nodeType!==7&&S.nodeType!==8&&O.push(b(S)),S=S.nextSibling;return O.join("");default:return S.nodeValue}};var Hs=b;Object.defineProperty(bt.prototype,"length",{get:function(){return Bt(this),this.$$length}}),Object.defineProperty(Qe.prototype,"textContent",{get:function(){return b(this)},set:function(S){switch(this.nodeType){case le:case Ae:for(;this.firstChild;)this.removeChild(this.firstChild);(S||String(S))&&this.appendChild(this.ownerDocument.createTextNode(S));break;default:this.data=S,this.value=S,this.nodeValue=S}}}),Or=function(S,O,W){S["$$"+O]=W}}}catch(b){}oe.DocumentType=ki,oe.DOMException=Re,oe.DOMImplementation=Bi,oe.Element=bi,oe.Node=Qe,oe.NodeList=Ne,oe.XMLSerializer=Zr},40315:function(we,oe,R){var j=R(38870).freeze;oe.XML_ENTITIES=j({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),oe.HTML_ENTITIES=j({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),oe.entityMap=oe.HTML_ENTITIES},6035:function(we,oe,R){var j,ye=R(87131);j=ye.DOMImplementation,j=ye.XMLSerializer,oe.DOMParser=R(70814).DOMParser},9542:function(we,oe,R){var j=R(38870).NAMESPACE,ye=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=new RegExp("[\\-\\.0-9"+ye.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ge=new RegExp("^"+ye.source+x.source+"*(?::"+ye.source+x.source+"*)?$"),N=0,Q=1,Ce=2,Z=3,J=4,Te=5,K=6,le=7;function Fe(I,D){this.message=I,this.locator=D,Error.captureStackTrace&&Error.captureStackTrace(this,Fe)}Fe.prototype=new Error,Fe.prototype.name=Fe.name;function Ve(){}Ve.prototype={parse:function(I,D,B){var de=this.domBuilder;de.startDocument(),Ye(D,D={}),et(I,D,B,de,this.errorHandler),de.endDocument()}};function et(I,D,B,de,re){function _e(rt){if(rt>65535){rt-=65536;var mt=55296+(rt>>10),Vt=56320+(rt&1023);return String.fromCharCode(mt,Vt)}else return String.fromCharCode(rt)}function pe(rt){var mt=rt.slice(1,-1);return mt in B?B[mt]:mt.charAt(0)==="#"?_e(parseInt(mt.substr(1).replace("x","0x"))):(re.error("entity not found:"+rt),rt)}function Ie(rt){if(rt>Re){var mt=I.substring(Re,rt).replace(/&#?\w+;/g,pe);ke&&ne(Re),de.characters(mt,0,rt-Re),Re=rt}}function ne(rt,mt){for(;rt>=ce&&(mt=fe.exec(I));)ee=mt.index,ce=ee+mt[0].length,ke.lineNumber++;ke.columnNumber=rt-ee+1}for(var ee=0,ce=0,fe=/.*(?:\r\n?|\n)|.*$/g,ke=de.locator,Ke=[{currentNSMap:D}],ze={},Re=0;;){try{var Ne=I.indexOf("<",Re);if(Ne<0){if(!I.substr(Re).match(/^\s*$/)){var bt=de.doc,Bt=bt.createTextNode(I.substr(Re));bt.appendChild(Bt),de.currentElement=Bt}return}switch(Ne>Re&&Ie(Ne),I.charAt(Ne+1)){case"/":var lt=I.indexOf(">",Ne+3),Ct=I.substring(Ne+2,lt).replace(/[ \t\n\r]+$/g,""),it=Ke.pop();lt<0?(Ct=I.substring(Ne+2).replace(/[\s<].*/,""),re.error("end tag name: "+Ct+" is not complete:"+it.tagName),lt=Ne+1+Ct.length):Ct.match(/\s</)&&(Ct=Ct.replace(/[\s<].*/,""),re.error("end tag name: "+Ct+" maybe not complete"),lt=Ne+1+Ct.length);var Zt=it.localNSMap,Ai=it.tagName==Ct,Bi=Ai||it.tagName&&it.tagName.toLowerCase()==Ct.toLowerCase();if(Bi){if(de.endElement(it.uri,it.localName,Ct),Zt)for(var Qe in Zt)Object.prototype.hasOwnProperty.call(Zt,Qe)&&de.endPrefixMapping(Qe);Ai||re.fatalError("end tag name: "+Ct+" is not match the current start tagName:"+it.tagName)}else Ke.push(it);lt++;break;case"?":ke&&ne(Ne),lt=Xe(I,Ne,de);break;case"!":ke&&ne(Ne),lt=Ae(I,Ne,de,re);break;default:ke&&ne(Ne);var ft=new qe,Gt=Ke[Ke.length-1].currentNSMap,lt=me(I,Ne,ft,Gt,pe,re),Zi=ft.length;if(!ft.closed&&Le(I,lt,ft.tagName,ze)&&(ft.closed=!0,B.nbsp||re.warning("unclosed xml attribute")),ke&&Zi){for(var Pi=ut(ke,{}),mi=0;mi<Zi;mi++){var Vi=ft[mi];ne(Vi.offset),Vi.locator=ut(ke,{})}de.locator=Pi,Be(ft,de,Gt)&&Ke.push(ft),de.locator=ke}else Be(ft,de,Gt)&&Ke.push(ft);j.isHTML(ft.uri)&&!ft.closed?lt=Se(I,lt,ft.tagName,pe,de):lt++}}catch(rt){if(rt instanceof Fe)throw rt;re.error("element parse error: "+rt),lt=-1}lt>Re?Re=lt:Ie(Math.max(Ne,Re)+1)}}function ut(I,D){return D.lineNumber=I.lineNumber,D.columnNumber=I.columnNumber,D}function me(I,D,B,de,re,_e){function pe(Ke,ze,Re){B.attributeNames.hasOwnProperty(Ke)&&_e.fatalError("Attribute "+Ke+" redefined"),B.addValue(Ke,ze,Re)}for(var Ie,ne,ee=++D,ce=N;;){var fe=I.charAt(ee);switch(fe){case"=":if(ce===Q)Ie=I.slice(D,ee),ce=Z;else if(ce===Ce)ce=Z;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ce===Z||ce===Q)if(ce===Q&&(_e.warning('attribute value must after "="'),Ie=I.slice(D,ee)),D=ee+1,ee=I.indexOf(fe,D),ee>0)ne=I.slice(D,ee).replace(/&#?\w+;/g,re),pe(Ie,ne,D-1),ce=Te;else throw new Error("attribute value no end '"+fe+"' match");else if(ce==J)ne=I.slice(D,ee).replace(/&#?\w+;/g,re),pe(Ie,ne,D),_e.warning('attribute "'+Ie+'" missed start quot('+fe+")!!"),D=ee+1,ce=Te;else throw new Error('attribute value must after "="');break;case"/":switch(ce){case N:B.setTagName(I.slice(D,ee));case Te:case K:case le:ce=le,B.closed=!0;case J:case Q:case Ce:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return _e.error("unexpected end of input"),ce==N&&B.setTagName(I.slice(D,ee)),ee;case">":switch(ce){case N:B.setTagName(I.slice(D,ee));case Te:case K:case le:break;case J:case Q:ne=I.slice(D,ee),ne.slice(-1)==="/"&&(B.closed=!0,ne=ne.slice(0,-1));case Ce:ce===Ce&&(ne=Ie),ce==J?(_e.warning('attribute "'+ne+'" missed quot(")!'),pe(Ie,ne.replace(/&#?\w+;/g,re),D)):((!j.isHTML(de[""])||!ne.match(/^(?:disabled|checked|selected)$/i))&&_e.warning('attribute "'+ne+'" missed value!! "'+ne+'" instead!!'),pe(ne,ne,D));break;case Z:throw new Error("attribute value missed!!")}return ee;case"\x80":fe=" ";default:if(fe<=" ")switch(ce){case N:B.setTagName(I.slice(D,ee)),ce=K;break;case Q:Ie=I.slice(D,ee),ce=Ce;break;case J:var ne=I.slice(D,ee).replace(/&#?\w+;/g,re);_e.warning('attribute "'+ne+'" missed quot(")!!'),pe(Ie,ne,D);case Te:ce=K;break}else switch(ce){case Ce:var ke=B.tagName;(!j.isHTML(de[""])||!Ie.match(/^(?:disabled|checked|selected)$/i))&&_e.warning('attribute "'+Ie+'" missed value!! "'+Ie+'" instead2!!'),pe(Ie,Ie,D),D=ee,ce=Q;break;case Te:_e.warning('attribute space is required"'+Ie+'"!!');case K:ce=Q,D=ee;break;case Z:ce=J,D=ee;break;case le:throw new Error("elements closed character '/' and '>' must be connected to")}}ee++}}function Be(I,D,B){for(var de=I.tagName,re=null,fe=I.length;fe--;){var _e=I[fe],pe=_e.qName,Ie=_e.value,ke=pe.indexOf(":");if(ke>0)var ne=_e.prefix=pe.slice(0,ke),ee=pe.slice(ke+1),ce=ne==="xmlns"&&ee;else ee=pe,ne=null,ce=pe==="xmlns"&&"";_e.localName=ee,ce!==!1&&(re==null&&(re={},Ye(B,B={})),B[ce]=re[ce]=Ie,_e.uri=j.XMLNS,D.startPrefixMapping(ce,Ie))}for(var fe=I.length;fe--;){_e=I[fe];var ne=_e.prefix;ne&&(ne==="xml"&&(_e.uri=j.XML),ne!=="xmlns"&&(_e.uri=B[ne||""]))}var ke=de.indexOf(":");ke>0?(ne=I.prefix=de.slice(0,ke),ee=I.localName=de.slice(ke+1)):(ne=null,ee=I.localName=de);var Ke=I.uri=B[ne||""];if(D.startElement(Ke,ee,de,I),I.closed){if(D.endElement(Ke,ee,de),re)for(ne in re)Object.prototype.hasOwnProperty.call(re,ne)&&D.endPrefixMapping(ne)}else return I.currentNSMap=B,I.localNSMap=re,!0}function Se(I,D,B,de,re){if(/^(?:script|textarea)$/i.test(B)){var _e=I.indexOf("</"+B+">",D),pe=I.substring(D+1,_e);if(/[&<]/.test(pe))return/^script$/i.test(B)?(re.characters(pe,0,pe.length),_e):(pe=pe.replace(/&#?\w+;/g,de),re.characters(pe,0,pe.length),_e)}return D+1}function Le(I,D,B,de){var re=de[B];return re==null&&(re=I.lastIndexOf("</"+B+">"),re<D&&(re=I.lastIndexOf("</"+B)),de[B]=re),re<D}function Ye(I,D){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(D[B]=I[B])}function Ae(I,D,B,de){var re=I.charAt(D+2);switch(re){case"-":if(I.charAt(D+3)==="-"){var _e=I.indexOf("-->",D+4);return _e>D?(B.comment(I,D+4,_e-D-4),_e+3):(de.error("Unclosed comment"),-1)}else return-1;default:if(I.substr(D+3,6)=="CDATA["){var _e=I.indexOf("]]>",D+9);return B.startCDATA(),B.characters(I,D+9,_e-D-9),B.endCDATA(),_e+3}var pe=We(I,D),Ie=pe.length;if(Ie>1&&/!doctype/i.test(pe[0][0])){var ne=pe[1][0],ee=!1,ce=!1;Ie>3&&(/^public$/i.test(pe[2][0])?(ee=pe[3][0],ce=Ie>4&&pe[4][0]):/^system$/i.test(pe[2][0])&&(ce=pe[3][0]));var fe=pe[Ie-1];return B.startDTD(ne,ee,ce),B.endDTD(),fe.index+fe[0].length}}return-1}function Xe(I,D,B){var de=I.indexOf("?>",D);if(de){var re=I.substring(D,de).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(re){var _e=re[0].length;return B.processingInstruction(re[1],re[2]),de+2}else return-1}return-1}function qe(){this.attributeNames={}}qe.prototype={setTagName:function(I){if(!ge.test(I))throw new Error("invalid tagName:"+I);this.tagName=I},addValue:function(I,D,B){if(!ge.test(I))throw new Error("invalid attribute:"+I);this.attributeNames[I]=this.length,this[this.length++]={qName:I,value:D,offset:B}},length:0,getLocalName:function(I){return this[I].localName},getLocator:function(I){return this[I].locator},getQName:function(I){return this[I].qName},getURI:function(I){return this[I].uri},getValue:function(I){return this[I].value}};function We(I,D){var B,de=[],re=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(re.lastIndex=D,re.exec(I);B=re.exec(I);)if(de.push(B),B[1])return de}oe.XMLReader=Ve,oe.ParseError=Fe},15651:function(we,oe,R){var j=typeof R.g!="undefined"?R.g:typeof window!="undefined"?window:{},ye=R(62938),x;typeof document!="undefined"?x=document:(x=j["__GLOBAL_DOCUMENT_CACHE@4"],x||(x=j["__GLOBAL_DOCUMENT_CACHE@4"]=ye)),we.exports=x},83577:function(we,oe,R){var j;typeof window!="undefined"?j=window:typeof R.g!="undefined"?j=R.g:typeof self!="undefined"?j=self:j={},we.exports=j},50019:function(we,oe){"use strict";Object.defineProperty(oe,"__esModule",{value:!0}),oe.mimeData=oe.FileKind=void 0;var R;(function(j){j.Image="image",j.Video="video",j.Audio="audio",j.Archive="archive",j.Document="document",j.Spreadsheet="spreadsheet",j.Presentation="presentation",j.Font="font",j.Text="text",j.Application="application",j.Unknown="unknown"})(R=oe.FileKind||(oe.FileKind={})),oe.mimeData={"audio/aac":{extensions:[".aac"],label:"AAC audio",kind:R.Audio},"application/x-abiword":{extensions:[".abw"],label:"AbiWord document",kind:R.Document},"application/x-freearc":{extensions:[".arc"],label:"Archive document (multiple files embedded)",kind:R.Archive},"video/x-msvideo":{extensions:[".avi"],label:"AVI: Audio Video Interleave",kind:R.Video},"application/vnd.amazon.ebook":{extensions:[".azw"],label:"Amazon Kindle eBook format	application/vnd.amazon.ebook",kind:R.Document},"application/octet-stream":{extensions:[".bin",".exe",".dll",".so",".dmg"],label:"Any kind of binary data",kind:R.Application},"image/bmp":{extensions:[".bmp"],label:"Bitmap Graphics",kind:R.Image},"application/x-bzip":{extensions:[".bz"],label:"BZip archive",kind:R.Archive},"application/x-bzip2":{extensions:[".bz2"],label:"BZip2 archive",kind:R.Archive},"application/x-cdf":{extensions:[".cda"],label:"CD audio",kind:R.Audio},"application/x-csh":{extensions:[".csh"],label:"C-Shell script",kind:R.Text},"text/css":{extensions:[".css"],label:"Cascading Style Sheets (CSS)",kind:R.Text},"text/csv":{extensions:[".csv"],label:"Comma/column-separated values",kind:R.Spreadsheet},"text/tsv":{extensions:[".tsv"],label:"Tab-separated values",kind:R.Spreadsheet},"application/msword":{extensions:[".doc"],label:"Microsoft Word",kind:R.Document},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{extensions:[".docx"],label:"Microsoft Word (OpenXML)",kind:R.Document},"application/vnd.ms-fontobject":{extensions:[".eot"],label:"MS Embedded OpenType fonts",kind:R.Font},"application/epub+zip":{extensions:[".epub"],label:"Electronic publication (EPUB)",kind:R.Document},"application/gzip":{extensions:[".gz",".gzip"],label:"GZip Compressed Archive",kind:R.Archive},"image/gif":{extensions:[".gif"],label:"Graphics Interchange Format (GIF)",kind:R.Image},"application/html":{extensions:[".htm",".html"],label:".html	HyperText Markup Language (HTML)",kind:R.Text},"image/vnd.microsoft.icon":{extensions:[".ico"],label:"Icon format	image/vnd.microsoft.icon",kind:R.Image},"text/calendar":{extensions:[".ics"],label:"iCalendar format",kind:R.Text},"application/java-archive":{extensions:[".jar"],label:"Java Archive (JAR)	application/java-archive",kind:R.Application},"image/jpeg":{extensions:[".jpeg",".jpg"],label:"JPEG image",kind:R.Image},"text/javascript":{extensions:[".js",".mjs",".jsx",".ts",".tsx"],label:"JavaScript",kind:R.Text},"application/json":{extensions:[".json"],label:"JSON",kind:R.Text},"application/ld+json":{extensions:[".jsonld"],label:"JSON-LD format	application/ld+json",kind:R.Text},"audio/midi":{extensions:[".mid",".midi"],label:".midi	Musical Instrument Digital Interface (MIDI)",kind:R.Audio},"audio/x-midi":{extensions:[".mid",".midi"],label:".midi	Musical Instrument Digital Interface (MIDI)",kind:R.Audio},"audio/mpeg":{extensions:[".mp3"],label:"MP3 audio",kind:R.Audio},"video/mp4":{extensions:[".mp4"],label:"MP4 video",kind:R.Video},"video/mpeg":{extensions:[".mpeg"],label:"MPEG Video",kind:R.Video},"application/vnd.apple.installer+xml":{extensions:[".mpkg"],label:"Apple Installer Package",kind:R.Application},"application/vnd.oasis.opendocument.presentation":{extensions:[".odp"],label:"OpenDocument presentation document",kind:R.Presentation},"application/vnd.oasis.opendocument.spreadsheet":{extensions:[".ods"],label:"OpenDocument spreadsheet document",kind:R.Spreadsheet},"application/vnd.oasis.opendocument.text":{extensions:[".odt"],label:"OpenDocument text document",kind:R.Document},"audio/ogg":{extensions:[".oga",".ogg"],label:"OGG audio",kind:R.Audio},"video/ogg":{extensions:[".ogv"],label:"OGG video",kind:R.Video},"application/ogg":{extensions:[".ogx"],label:"OGG",kind:R.Video},"audio/opus":{extensions:[".opus"],label:"Opus audio",kind:R.Audio},"font/otf":{extensions:[".otf"],label:"OpenType font",kind:R.Font},"image/png":{extensions:[".png"],label:"Portable Network Graphics",kind:R.Image},"application/pdf":{extensions:[".pdf"],label:"Adobe Portable Document Format (PDF)",kind:R.Document},"application/x-httpd-php":{extensions:[".php"],label:"Hypertext Preprocessor (Personal Home Page)",kind:R.Text},"application/vnd.ms-powerpoint":{extensions:[".ppt"],label:"Microsoft PowerPoint",kind:R.Presentation},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{extensions:[".pptx"],label:"Microsoft PowerPoint (OpenXML)",kind:R.Presentation},"application/vnd.rar":{extensions:[".rar"],label:"RAR archive",kind:R.Archive},"application/rtf":{extensions:[".rtf"],label:"Rich Text Format (RTF)",kind:R.Document},"application/x-sh":{extensions:[".sh"],label:"Bourne shell script",kind:R.Text},"image/svg+xml":{extensions:[".svg"],label:"Scalable Vector Graphics (SVG)",kind:R.Image},"image/svg":{extensions:[".svg"],label:"Scalable Vector Graphics (SVG)",kind:R.Image},"application/x-shockwave-flash":{extensions:[".swf"],label:"Adobe Flash document",kind:R.Application},"application/x-tar":{extensions:[".tar"],label:"Tape Archive (TAR)	application/x-tar",kind:R.Archive},"image/tiff":{extensions:[".tif"],label:".tiff File Format (TIFF)",kind:R.Image},"video/mp2t":{extensions:[".ts"],label:"MPEG transport stream",kind:R.Video},"font/ttf":{extensions:[".ttf"],label:"TrueType Font	font/ttf",kind:R.Font},"text/plain":{extensions:[".txt"],label:"Plain Text",kind:R.Text},"application/vnd.visio":{extensions:[".vsd"],label:"Microsoft Visio",kind:R.Image},"audio/wav":{extensions:[".wav"],label:"Waveform Audio Format",kind:R.Audio},"audio/webm":{extensions:[".weba"],label:"WEBM audio",kind:R.Audio},"video/webm":{extensions:[".webm"],label:"WEBM video",kind:R.Video},"image/webp":{extensions:[".webp"],label:"WEBP image",kind:R.Image},"font/woff":{extensions:[".woff"],label:"Web Open Font Format (WOFF)",kind:R.Font},"font/woff2":{extensions:[".woff2"],label:"Web Open Font Format (WOFF)",kind:R.Font},"application/xhtml+xml":{extensions:[".xhtml"],label:"XHTML",kind:R.Text},"application/vnd.ms-excel":{extensions:[".xls"],label:"Microsoft Excel",kind:R.Spreadsheet},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{extensions:[".xlsx"],label:"Microsoft Excel (OpenXML)",kind:R.Spreadsheet},"application/xml":{extensions:[".xml"],label:"XML",kind:R.Text},"text/xml":{extensions:[".xml"],label:"XML",kind:R.Text},"application/zip":{extensions:[".zip"],label:"ZIP archive",kind:R.Archive},"video/3gpp":{extensions:[".3gp"],label:"3GPP audio/video container",kind:R.Video},"audio/3gpp":{extensions:[".3gp"],label:"3GPP audio/video container",kind:R.Audio},"video/3gpp2":{extensions:[".3g2"],label:"3GPP2 audio/video container",kind:R.Video},"audio/3gpp2":{extensions:[".3g2"],label:"3GPP2 audio/video container",kind:R.Audio},"application/x-7z-compressed":{extensions:[".7z"],label:"7-zip archive	application/x-7z-compressed",kind:R.Archive}}},62853:function(we,oe,R){"use strict";Object.defineProperty(oe,"__esModule",{value:!0}),oe.fromExtension=void 0;const j=R(50019),ye=x=>{if(!x)return j.FileKind.Unknown;const ge=`.${x==null?void 0:x.replace(/^\./,"")}`,N=Object.entries(j.mimeData).find(([,Q])=>{var Ce;return(Ce=Q.extensions)===null||Ce===void 0?void 0:Ce.find(Z=>ge.endsWith(Z))});if(N){const[,Q]=N;return Q.kind}return j.FileKind.Unknown};oe.fromExtension=ye},5476:function(we,oe,R){"use strict";var j=this&&this.__createBinding||(Object.create?function(x,ge,N,Q){Q===void 0&&(Q=N),Object.defineProperty(x,Q,{enumerable:!0,get:function(){return ge[N]}})}:function(x,ge,N,Q){Q===void 0&&(Q=N),x[Q]=ge[N]}),ye=this&&this.__exportStar||function(x,ge){for(var N in x)N!=="default"&&!Object.prototype.hasOwnProperty.call(ge,N)&&j(ge,x,N)};Object.defineProperty(oe,"__esModule",{value:!0}),ye(R(63518),oe),ye(R(62853),oe),ye(R(50019),oe)},63518:function(we,oe,R){"use strict";Object.defineProperty(oe,"__esModule",{value:!0}),oe.fromMime=void 0;const j=R(50019),ye=x=>{if(!x)return j.FileKind.Unknown;const ge=`${x}`.toLowerCase().trim(),[N]=ge.split("/");switch(N){case"image":return j.FileKind.Image;case"video":return j.FileKind.Video;case"audio":return j.FileKind.Audio;case"font":return j.FileKind.Font}const Q=j.mimeData[ge];return Q?Q.kind:j.FileKind.Unknown};oe.fromMime=ye},10425:function(we){we.exports=R;var oe=Object.prototype.toString;function R(j){if(!j)return!1;var ye=oe.call(j);return ye==="[object Function]"||typeof j=="function"&&ye!=="[object RegExp]"||typeof window!="undefined"&&(j===window.setTimeout||j===window.alert||j===window.confirm||j===window.prompt)}},17735:function(we,oe){function R(Q){if(Q&&typeof Q=="object"){var Ce=Q.which||Q.keyCode||Q.charCode;Ce&&(Q=Ce)}if(typeof Q=="number")return ge[Q];var Z=String(Q),J=j[Z.toLowerCase()];if(J)return J;var J=ye[Z.toLowerCase()];if(J)return J;if(Z.length===1)return Z.charCodeAt(0)}R.isEventKey=function(Ce,Z){if(Ce&&typeof Ce=="object"){var J=Ce.which||Ce.keyCode||Ce.charCode;if(J==null)return!1;if(typeof Z=="string"){var Te=j[Z.toLowerCase()];if(Te)return Te===J;var Te=ye[Z.toLowerCase()];if(Te)return Te===J}else if(typeof Z=="number")return Z===J;return!1}},oe=we.exports=R;var j=oe.code=oe.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},ye=oe.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(x=97;x<123;x++)j[String.fromCharCode(x)]=x-32;for(var x=48;x<58;x++)j[x-48]=x;for(x=1;x<13;x++)j["f"+x]=x+111;for(x=0;x<10;x++)j["numpad "+x]=x+96;var ge=oe.names=oe.title={};for(x in j)ge[j[x]]=x;for(var N in ye)j[N]=ye[N]},92323:function(we,oe,R){we=R.nmd(we);var j=200,ye="__lodash_hash_undefined__",x=9007199254740991,ge="[object Arguments]",N="[object Array]",Q="[object Boolean]",Ce="[object Date]",Z="[object Error]",J="[object Function]",Te="[object GeneratorFunction]",K="[object Map]",le="[object Number]",Fe="[object Object]",Ve="[object Promise]",et="[object RegExp]",ut="[object Set]",me="[object String]",Be="[object Symbol]",Se="[object WeakMap]",Le="[object ArrayBuffer]",Ye="[object DataView]",Ae="[object Float32Array]",Xe="[object Float64Array]",qe="[object Int8Array]",We="[object Int16Array]",I="[object Int32Array]",D="[object Uint8Array]",B="[object Uint8ClampedArray]",de="[object Uint16Array]",re="[object Uint32Array]",_e=/[\\^$.*+?()[\]{}|]/g,pe=/\w*$/,Ie=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,ee={};ee[ge]=ee[N]=ee[Le]=ee[Ye]=ee[Q]=ee[Ce]=ee[Ae]=ee[Xe]=ee[qe]=ee[We]=ee[I]=ee[K]=ee[le]=ee[Fe]=ee[et]=ee[ut]=ee[me]=ee[Be]=ee[D]=ee[B]=ee[de]=ee[re]=!0,ee[Z]=ee[J]=ee[Se]=!1;var ce=typeof R.g=="object"&&R.g&&R.g.Object===Object&&R.g,fe=typeof self=="object"&&self&&self.Object===Object&&self,ke=ce||fe||Function("return this")(),Ke=oe&&!oe.nodeType&&oe,ze=Ke&&!0&&we&&!we.nodeType&&we,Re=ze&&ze.exports===Ke;function Ne(A,V){return A.set(V[0],V[1]),A}function bt(A,V){return A.add(V),A}function Bt(A,V){for(var te=-1,Oe=A?A.length:0;++te<Oe&&V(A[te],te,A)!==!1;);return A}function Ct(A,V){for(var te=-1,Oe=V.length,Rt=A.length;++te<Oe;)A[Rt+te]=V[te];return A}function it(A,V,te,Oe){var Rt=-1,kt=A?A.length:0;for(Oe&&kt&&(te=A[++Rt]);++Rt<kt;)te=V(te,A[Rt],Rt,A);return te}function Zt(A,V){for(var te=-1,Oe=Array(A);++te<A;)Oe[te]=V(te);return Oe}function Ai(A,V){return A==null?void 0:A[V]}function Bi(A){var V=!1;if(A!=null&&typeof A.toString!="function")try{V=!!(A+"")}catch(te){}return V}function Qe(A){var V=-1,te=Array(A.size);return A.forEach(function(Oe,Rt){te[++V]=[Rt,Oe]}),te}function ft(A,V){return function(te){return A(V(te))}}function Gt(A){var V=-1,te=Array(A.size);return A.forEach(function(Oe){te[++V]=Oe}),te}var lt=Array.prototype,Zi=Function.prototype,Pi=Object.prototype,mi=ke["__core-js_shared__"],Vi=function(){var A=/[^.]+$/.exec(mi&&mi.keys&&mi.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),rt=Zi.toString,mt=Pi.hasOwnProperty,Vt=Pi.toString,li=RegExp("^"+rt.call(mt).replace(_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ji=Re?ke.Buffer:void 0,vr=ke.Symbol,Pr=ke.Uint8Array,Me=ft(Object.getPrototypeOf,Object),ba=Object.create,Rn=Pi.propertyIsEnumerable,xt=lt.splice,_r=Object.getOwnPropertySymbols,bi=Ji?Ji.isBuffer:void 0,Ir=ft(Object.keys,Object),Hi=Tr(ke,"DataView"),Ii=Tr(ke,"Map"),er=Tr(ke,"Promise"),tr=Tr(ke,"Set"),ki=Tr(ke,"WeakMap"),ji=Tr(Object,"create"),nt=St(Hi),Qr=St(Ii),kr=St(er),Dr=St(tr),Zr=St(ki),Jr=vr?vr.prototype:void 0,yr=Jr?Jr.valueOf:void 0;function dt(A){var V=-1,te=A?A.length:0;for(this.clear();++V<te;){var Oe=A[V];this.set(Oe[0],Oe[1])}}function Di(){this.__data__=ji?ji(null):{}}function en(A){return this.has(A)&&delete this.__data__[A]}function Wi(A){var V=this.__data__;if(ji){var te=V[A];return te===ye?void 0:te}return mt.call(V,A)?V[A]:void 0}function Or(A){var V=this.__data__;return ji?V[A]!==void 0:mt.call(V,A)}function Hs(A,V){var te=this.__data__;return te[A]=ji&&V===void 0?ye:V,this}dt.prototype.clear=Di,dt.prototype.delete=en,dt.prototype.get=Wi,dt.prototype.has=Or,dt.prototype.set=Hs;function b(A){var V=-1,te=A?A.length:0;for(this.clear();++V<te;){var Oe=A[V];this.set(Oe[0],Oe[1])}}function S(){this.__data__=[]}function O(A){var V=this.__data__,te=Li(V,A);if(te<0)return!1;var Oe=V.length-1;return te==Oe?V.pop():xt.call(V,te,1),!0}function W(A){var V=this.__data__,te=Li(V,A);return te<0?void 0:V[te][1]}function ve(A){return Li(this.__data__,A)>-1}function He(A,V){var te=this.__data__,Oe=Li(te,A);return Oe<0?te.push([A,V]):te[Oe][1]=V,this}b.prototype.clear=S,b.prototype.delete=O,b.prototype.get=W,b.prototype.has=ve,b.prototype.set=He;function Ze(A){var V=-1,te=A?A.length:0;for(this.clear();++V<te;){var Oe=A[V];this.set(Oe[0],Oe[1])}}function qt(){this.__data__={hash:new dt,map:new(Ii||b),string:new dt}}function Jt(A){return rn(this,A).delete(A)}function Xt(A){return rn(this,A).get(A)}function ei(A){return rn(this,A).has(A)}function Oi(A,V){return rn(this,A).set(A,V),this}Ze.prototype.clear=qt,Ze.prototype.delete=Jt,Ze.prototype.get=Xt,Ze.prototype.has=ei,Ze.prototype.set=Oi;function $t(A){this.__data__=new b(A)}function xi(){this.__data__=new b}function di(A){return this.__data__.delete(A)}function Si(A){return this.__data__.get(A)}function Gi(A){return this.__data__.has(A)}function Mt(A,V){var te=this.__data__;if(te instanceof b){var Oe=te.__data__;if(!Ii||Oe.length<j-1)return Oe.push([A,V]),this;te=this.__data__=new Ze(Oe)}return te.set(A,V),this}$t.prototype.clear=xi,$t.prototype.delete=di,$t.prototype.get=Si,$t.prototype.has=Gi,$t.prototype.set=Mt;function tn(A,V){var te=jn(A)||Hn(A)?Zt(A.length,String):[],Oe=te.length,Rt=!!Oe;for(var kt in A)(V||mt.call(A,kt))&&!(Rt&&(kt=="length"||Bn(kt,Oe)))&&te.push(kt);return te}function ci(A,V,te){var Oe=A[V];(!(mt.call(A,V)&&Lr(Oe,te))||te===void 0&&!(V in A))&&(A[V]=te)}function Li(A,V){for(var te=A.length;te--;)if(Lr(A[te][0],V))return te;return-1}function Nn(A,V){return A&&Ea(V,Wn(V),A)}function Fn(A,V,te,Oe,Rt,kt,gi){var ti;if(Oe&&(ti=kt?Oe(A,Rt,kt,gi):Oe(A)),ti!==void 0)return ti;if(!nn(A))return A;var uo=jn(A);if(uo){if(ti=eo(A),!V)return Sa(A,ti)}else{var Mr=ir(A),lo=Mr==J||Mr==Te;if(ao(A))return Ks(A,V);if(Mr==Fe||Mr==ge||lo&&!kt){if(Bi(A))return kt?A:{};if(ti=to(lo?{}:A),!V)return Js(A,Nn(ti,A))}else{if(!ee[Mr])return kt?A:{};ti=wt(A,Mr,Fn,V)}}gi||(gi=new $t);var co=gi.get(A);if(co)return co;if(gi.set(A,ti),!uo)var an=te?Ca(A):Wn(A);return Bt(an||A,function(Gn,xr){an&&(xr=Gn,Gn=A[xr]),ci(ti,xr,Fn(Gn,V,te,Oe,xr,A,gi))}),ti}function js(A){return nn(A)?ba(A):{}}function Ws(A,V,te){var Oe=V(A);return jn(A)?Oe:Ct(Oe,te(A))}function Gs(A){return Vt.call(A)}function qs(A){if(!nn(A)||io(A))return!1;var V=Pa(A)||Bi(A)?li:Ie;return V.test(St(A))}function zs(A){if(!Vn(A))return Ir(A);var V=[];for(var te in Object(A))mt.call(A,te)&&te!="constructor"&&V.push(te);return V}function Ks(A,V){if(V)return A.slice();var te=new A.constructor(A.length);return A.copy(te),te}function Un(A){var V=new A.constructor(A.byteLength);return new Pr(V).set(new Pr(A)),V}function Xs(A,V){var te=V?Un(A.buffer):A.buffer;return new A.constructor(te,A.byteOffset,A.byteLength)}function $s(A,V,te){var Oe=V?te(Qe(A),!0):Qe(A);return it(Oe,Ne,new A.constructor)}function Ys(A){var V=new A.constructor(A.source,pe.exec(A));return V.lastIndex=A.lastIndex,V}function xa(A,V,te){var Oe=V?te(Gt(A),!0):Gt(A);return it(Oe,bt,new A.constructor)}function Qs(A){return yr?Object(yr.call(A)):{}}function Zs(A,V){var te=V?Un(A.buffer):A.buffer;return new A.constructor(te,A.byteOffset,A.length)}function Sa(A,V){var te=-1,Oe=A.length;for(V||(V=Array(Oe));++te<Oe;)V[te]=A[te];return V}function Ea(A,V,te,Oe){te||(te={});for(var Rt=-1,kt=V.length;++Rt<kt;){var gi=V[Rt],ti=Oe?Oe(te[gi],A[gi],gi,te,A):void 0;ci(te,gi,ti===void 0?A[gi]:ti)}return te}function Js(A,V){return Ea(A,wa(A),V)}function Ca(A){return Ws(A,Wn,wa)}function rn(A,V){var te=A.__data__;return br(V)?te[typeof V=="string"?"string":"hash"]:te.map}function Tr(A,V){var te=Ai(A,V);return qs(te)?te:void 0}var wa=_r?ft(_r,Object):el,ir=Gs;(Hi&&ir(new Hi(new ArrayBuffer(1)))!=Ye||Ii&&ir(new Ii)!=K||er&&ir(er.resolve())!=Ve||tr&&ir(new tr)!=ut||ki&&ir(new ki)!=Se)&&(ir=function(A){var V=Vt.call(A),te=V==Fe?A.constructor:void 0,Oe=te?St(te):void 0;if(Oe)switch(Oe){case nt:return Ye;case Qr:return K;case kr:return Ve;case Dr:return ut;case Zr:return Se}return V});function eo(A){var V=A.length,te=A.constructor(V);return V&&typeof A[0]=="string"&&mt.call(A,"index")&&(te.index=A.index,te.input=A.input),te}function to(A){return typeof A.constructor=="function"&&!Vn(A)?js(Me(A)):{}}function wt(A,V,te,Oe){var Rt=A.constructor;switch(V){case Le:return Un(A);case Q:case Ce:return new Rt(+A);case Ye:return Xs(A,Oe);case Ae:case Xe:case qe:case We:case I:case D:case B:case de:case re:return Zs(A,Oe);case K:return $s(A,Oe,te);case le:case me:return new Rt(A);case et:return Ys(A);case ut:return xa(A,Oe,te);case Be:return Qs(A)}}function Bn(A,V){return V=V==null?x:V,!!V&&(typeof A=="number"||ne.test(A))&&A>-1&&A%1==0&&A<V}function br(A){var V=typeof A;return V=="string"||V=="number"||V=="symbol"||V=="boolean"?A!=="__proto__":A===null}function io(A){return!!Vi&&Vi in A}function Vn(A){var V=A&&A.constructor,te=typeof V=="function"&&V.prototype||Pi;return A===te}function St(A){if(A!=null){try{return rt.call(A)}catch(V){}try{return A+""}catch(V){}}return""}function ro(A){return Fn(A,!0,!0)}function Lr(A,V){return A===V||A!==A&&V!==V}function Hn(A){return no(A)&&mt.call(A,"callee")&&(!Rn.call(A,"callee")||Vt.call(A)==ge)}var jn=Array.isArray;function Aa(A){return A!=null&&so(A.length)&&!Pa(A)}function no(A){return Ia(A)&&Aa(A)}var ao=bi||oo;function Pa(A){var V=nn(A)?Vt.call(A):"";return V==J||V==Te}function so(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=x}function nn(A){var V=typeof A;return!!A&&(V=="object"||V=="function")}function Ia(A){return!!A&&typeof A=="object"}function Wn(A){return Aa(A)?tn(A):zs(A)}function el(){return[]}function oo(){return!1}we.exports=ro},31648:function(we,oe,R){var j=R(47603).getUint64,ye=function(x){var ge=new DataView(x.buffer,x.byteOffset,x.byteLength),N={version:x[0],flags:new Uint8Array(x.subarray(1,4)),references:[],referenceId:ge.getUint32(4),timescale:ge.getUint32(8)},Q=12;N.version===0?(N.earliestPresentationTime=ge.getUint32(Q),N.firstOffset=ge.getUint32(Q+4),Q+=8):(N.earliestPresentationTime=j(x.subarray(Q)),N.firstOffset=j(x.subarray(Q+8)),Q+=16),Q+=2;var Ce=ge.getUint16(Q);for(Q+=2;Ce>0;Q+=12,Ce--)N.references.push({referenceType:(x[Q]&128)>>>7,referencedSize:ge.getUint32(Q)&2147483647,subsegmentDuration:ge.getUint32(Q+4),startsWithSap:!!(x[Q+8]&128),sapType:(x[Q+8]&112)>>>4,sapDeltaTime:ge.getUint32(Q+8)&268435455});return N};we.exports=ye},72852:function(we){var oe=9e4,R,j,ye,x,ge,N,Q;R=function(Ce){return Ce*oe},j=function(Ce,Z){return Ce*Z},ye=function(Ce){return Ce/oe},x=function(Ce,Z){return Ce/Z},ge=function(Ce,Z){return R(x(Ce,Z))},N=function(Ce,Z){return j(ye(Ce),Z)},Q=function(Ce,Z,J){return ye(J?Ce:Ce-Z)},we.exports={ONE_SECOND_IN_TS:oe,secondsToVideoTs:R,secondsToAudioTs:j,videoTsToSeconds:ye,audioTsToSeconds:x,audioTsToVideoTs:ge,videoTsToAudioTs:N,metadataTsToSeconds:Q}},47603:function(we){var oe=Math.pow(2,32),R=function(j){var ye=new DataView(j.buffer,j.byteOffset,j.byteLength),x;return ye.getBigUint64?(x=ye.getBigUint64(0),x<Number.MAX_SAFE_INTEGER?Number(x):x):ye.getUint32(0)*oe+ye.getUint32(4)};we.exports={getUint64:R,MAX_UINT32:oe}},17771:function(we,oe,R){"use strict";R.d(oe,{A:function(){return sv}});var j=R(93236),ye=R(83577),x=R.n(ye),ge=R(15651),N=R.n(ge),Q=R(7161),Ce=R(17735),Z=R.n(Ce),J=R(43565),Te=R(48446);function K(s,i){s.prototype=Object.create(i.prototype),s.prototype.constructor=s,(0,Te.Z)(s,i)}var le=R(64655),Fe=R.n(le),Ve=R(38626),et=R.n(Ve),ut=R(71715),me=R.n(ut),Be=R(20139);function Se(s,i,n){return(0,Be.Z)()?Se=Reflect.construct.bind():Se=function(e,t,a){var o=[null];o.push.apply(o,t);var u=Function.bind.apply(e,o),l=new u;return a&&(0,Te.Z)(l,a.prototype),l},Se.apply(null,arguments)}var Le=R(75108),Ye=R(4472),Ae=R.n(Ye),Xe="http://example.com",qe=function(i,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(i)&&(i=x().location&&x().location.href||"");var r=typeof x().URL=="function",e=/^\/\//.test(i),t=!x().location&&!/\/\//i.test(i);if(r?i=new(x()).URL(i,x().location||Xe):/\/\//i.test(i)||(i=Ae().buildAbsoluteURL(x().location&&x().location.href||"",i)),r){var a=new URL(n,i);return t?a.href.slice(Xe.length):e?a.href.slice(a.protocol.length):a.href}return Ae().buildAbsoluteURL(i,n)},We=qe,I=function(){function s(){this.listeners={}}var i=s.prototype;return i.on=function(r,e){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(e)},i.off=function(r,e){if(!this.listeners[r])return!1;var t=this.listeners[r].indexOf(e);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(t,1),t>-1},i.trigger=function(r){var e=this.listeners[r];if(!!e)if(arguments.length===2)for(var t=e.length,a=0;a<t;++a)e[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),u=e.length,l=0;l<u;++l)e[l].apply(this,o)},i.dispose=function(){this.listeners={}},i.pipe=function(r){this.on("data",function(e){r.push(e)})},s}(),D=R(36379).lW,B=function(i){return x().atob?x().atob(i):D.from(i,"base64").toString("binary")};function de(s){for(var i=B(s),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}var re=function(s){K(i,s);function i(){var r;return r=s.call(this)||this,r.buffer="",r}var n=i.prototype;return n.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},i}(I),_e=String.fromCharCode(9),pe=function(i){var n=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),r={};return n[1]&&(r.length=parseInt(n[1],10)),n[2]&&(r.offset=parseInt(n[2],10)),r},Ie=function(){var i="[^=]*",n='"[^"]*"|[^,]*',r="(?:"+i+")=(?:"+n+")";return new RegExp("(?:^|,)("+r+")")},ne=function(i){for(var n=i.split(Ie()),r={},e=n.length,t;e--;)n[e]!==""&&(t=/([^=]*)=(.*)/.exec(n[e]).slice(1),t[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),r[t[0]]=t[1]);return r},ee=function(s){K(i,s);function i(){var r;return r=s.call(this)||this,r.customParsers=[],r.tagMappers=[],r}var n=i.prototype;return n.push=function(e){var t=this,a,o;if(e=e.trim(),e.length!==0){if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}var u=this.tagMappers.reduce(function(l,c){var g=c(e);return g===e?l:l.concat([g])},[e]);u.forEach(function(l){for(var c=0;c<t.customParsers.length;c++)if(t.customParsers[c].call(t,l))return;if(l.indexOf("#EXT")!==0){t.trigger("data",{type:"comment",text:l.slice(1)});return}if(l=l.replace("\r",""),a=/^#EXTM3U/.exec(l),a){t.trigger("data",{type:"tag",tagType:"m3u"});return}if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(l),a){o={type:"tag",tagType:"inf"},a[1]&&(o.duration=parseFloat(a[1])),a[2]&&(o.title=a[2]),t.trigger("data",o);return}if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"targetduration"},a[1]&&(o.duration=parseInt(a[1],10)),t.trigger("data",o);return}if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"version"},a[1]&&(o.version=parseInt(a[1],10)),t.trigger("data",o);return}if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"media-sequence"},a[1]&&(o.number=parseInt(a[1],10)),t.trigger("data",o);return}if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),a){o={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(o.number=parseInt(a[1],10)),t.trigger("data",o);return}if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(l),a){o={type:"tag",tagType:"playlist-type"},a[1]&&(o.playlistType=a[1]),t.trigger("data",o);return}if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(l),a){o=(0,Q.Z)(pe(a[1]),{type:"tag",tagType:"byterange"}),t.trigger("data",o);return}if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(l),a){o={type:"tag",tagType:"allow-cache"},a[1]&&(o.allowed=!/NO/.test(a[1])),t.trigger("data",o);return}if(a=/^#EXT-X-MAP:?(.*)$/.exec(l),a){if(o={type:"tag",tagType:"map"},a[1]){var g=ne(a[1]);g.URI&&(o.uri=g.URI),g.BYTERANGE&&(o.byterange=pe(g.BYTERANGE))}t.trigger("data",o);return}if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(l),a){if(o={type:"tag",tagType:"stream-inf"},a[1]){if(o.attributes=ne(a[1]),o.attributes.RESOLUTION){var m=o.attributes.RESOLUTION.split("x"),T={};m[0]&&(T.width=parseInt(m[0],10)),m[1]&&(T.height=parseInt(m[1],10)),o.attributes.RESOLUTION=T}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}t.trigger("data",o);return}if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(l),a){o={type:"tag",tagType:"media"},a[1]&&(o.attributes=ne(a[1])),t.trigger("data",o);return}if(a=/^#EXT-X-ENDLIST/.exec(l),a){t.trigger("data",{type:"tag",tagType:"endlist"});return}if(a=/^#EXT-X-DISCONTINUITY/.exec(l),a){t.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(l),a){o={type:"tag",tagType:"program-date-time"},a[1]&&(o.dateTimeString=a[1],o.dateTimeObject=new Date(a[1])),t.trigger("data",o);return}if(a=/^#EXT-X-KEY:?(.*)$/.exec(l),a){o={type:"tag",tagType:"key"},a[1]&&(o.attributes=ne(a[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),t.trigger("data",o);return}if(a=/^#EXT-X-START:?(.*)$/.exec(l),a){o={type:"tag",tagType:"start"},a[1]&&(o.attributes=ne(a[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),t.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(l),a){o={type:"tag",tagType:"cue-out-cont"},a[1]?o.data=a[1]:o.data="",t.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(l),a){o={type:"tag",tagType:"cue-out"},a[1]?o.data=a[1]:o.data="",t.trigger("data",o);return}if(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(l),a){o={type:"tag",tagType:"cue-in"},a[1]?o.data=a[1]:o.data="",t.trigger("data",o);return}if(a=/^#EXT-X-SKIP:(.*)$/.exec(l),a&&a[1]){o={type:"tag",tagType:"skip"},o.attributes=ne(a[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(_e)),t.trigger("data",o);return}if(a=/^#EXT-X-PART:(.*)$/.exec(l),a&&a[1]){o={type:"tag",tagType:"part"},o.attributes=ne(a[1]),["DURATION"].forEach(function(E){o.attributes.hasOwnProperty(E)&&(o.attributes[E]=parseFloat(o.attributes[E]))}),["INDEPENDENT","GAP"].forEach(function(E){o.attributes.hasOwnProperty(E)&&(o.attributes[E]=/YES/.test(o.attributes[E]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=pe(o.attributes.BYTERANGE)),t.trigger("data",o);return}if(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(l),a&&a[1]){o={type:"tag",tagType:"server-control"},o.attributes=ne(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(E){o.attributes.hasOwnProperty(E)&&(o.attributes[E]=parseFloat(o.attributes[E]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(E){o.attributes.hasOwnProperty(E)&&(o.attributes[E]=/YES/.test(o.attributes[E]))}),t.trigger("data",o);return}if(a=/^#EXT-X-PART-INF:(.*)$/.exec(l),a&&a[1]){o={type:"tag",tagType:"part-inf"},o.attributes=ne(a[1]),["PART-TARGET"].forEach(function(E){o.attributes.hasOwnProperty(E)&&(o.attributes[E]=parseFloat(o.attributes[E]))}),t.trigger("data",o);return}if(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(l),a&&a[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=ne(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(E){if(o.attributes.hasOwnProperty(E)){o.attributes[E]=parseInt(o.attributes[E],10);var C=E==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[C]=o.attributes[E],delete o.attributes[E]}}),t.trigger("data",o);return}if(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(l),a&&a[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=ne(a[1]),["LAST-MSN","LAST-PART"].forEach(function(E){o.attributes.hasOwnProperty(E)&&(o.attributes[E]=parseInt(o.attributes[E],10))}),t.trigger("data",o);return}t.trigger("data",{type:"tag",data:l.slice(4)})})}},n.addParser=function(e){var t=this,a=e.expression,o=e.customType,u=e.dataParser,l=e.segment;typeof u!="function"&&(u=function(g){return g}),this.customParsers.push(function(c){var g=a.exec(c);if(g)return t.trigger("data",{type:"custom",data:u(c),customType:o,segment:l}),!0})},n.addTagMapper=function(e){var t=e.expression,a=e.map,o=function(l){return t.test(l)?a(l):l};this.tagMappers.push(o)},i}(I),ce=function(i){return i.toLowerCase().replace(/-(\w)/g,function(n){return n[1].toUpperCase()})},fe=function(i){var n={};return Object.keys(i).forEach(function(r){n[ce(r)]=i[r]}),n},ke=function(i){var n=i.serverControl,r=i.targetDuration,e=i.partTargetDuration;if(!!n){var t="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",u=r&&r*3,l=e&&e*2;r&&!n.hasOwnProperty(a)&&(n[a]=u,this.trigger("info",{message:t+" defaulting HOLD-BACK to targetDuration * 3 ("+u+")."})),u&&n[a]<u&&(this.trigger("warn",{message:t+" clamping HOLD-BACK ("+n[a]+") to targetDuration * 3 ("+u+")"}),n[a]=u),e&&!n.hasOwnProperty(o)&&(n[o]=e*3,this.trigger("info",{message:t+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+n[o]+")."})),e&&n[o]<l&&(this.trigger("warn",{message:t+" clamping PART-HOLD-BACK ("+n[o]+") to partTargetDuration * 2 ("+l+")."}),n[o]=l)}},Ke=function(s){K(i,s);function i(){var r;r=s.call(this)||this,r.lineStream=new re,r.parseStream=new ee,r.lineStream.pipe(r.parseStream);var e=(0,J.Z)(r),t=[],a={},o,u,l=!1,c=function(){},g={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",T=0;r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var E=0,C=0;return r.on("end",function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&o&&(a.map=o),!a.key&&u&&(a.key=u),!a.timeline&&typeof T=="number"&&(a.timeline=T),r.manifest.preloadSegment=a)}),r.parseStream.on("data",function(P){var H,ie;({tag:function(){({version:function(){P.version&&(this.manifest.version=P.version)},"allow-cache":function(){this.manifest.allowCache=P.allowed,"allowed"in P||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var q={};"length"in P&&(a.byterange=q,q.length=P.length,"offset"in P||(P.offset=E)),"offset"in P&&(a.byterange=q,q.offset=P.offset),E=q.offset+q.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),P.duration>0&&(a.duration=P.duration),P.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key:function(){if(!P.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(P.attributes.METHOD==="NONE"){u=null;return}if(!P.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(P.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:P.attributes};return}if(P.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:P.attributes.URI};return}if(P.attributes.KEYFORMAT===m){var q=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(q.indexOf(P.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(P.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),P.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(P.attributes.KEYID&&P.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:P.attributes.KEYFORMAT,keyId:P.attributes.KEYID.substring(2)},pssh:de(P.attributes.URI.split(",")[1])};return}P.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:P.attributes.METHOD||"AES-128",uri:P.attributes.URI},typeof P.attributes.IV!="undefined"&&(u.iv=P.attributes.IV)},"media-sequence":function(){if(!isFinite(P.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+P.number});return}this.manifest.mediaSequence=P.number},"discontinuity-sequence":function(){if(!isFinite(P.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+P.number});return}this.manifest.discontinuitySequence=P.number,T=P.number},"playlist-type":function(){if(!/VOD|EVENT/.test(P.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+P.playlist});return}this.manifest.playlistType=P.playlistType},map:function(){o={},P.uri&&(o.uri=P.uri),P.byterange&&(o.byterange=P.byterange),u&&(o.key=u)},"stream-inf":function(){if(this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||g,!P.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),(0,Q.Z)(a.attributes,P.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||g,!(P.attributes&&P.attributes.TYPE&&P.attributes["GROUP-ID"]&&P.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var q=this.manifest.mediaGroups[P.attributes.TYPE];q[P.attributes["GROUP-ID"]]=q[P.attributes["GROUP-ID"]]||{},H=q[P.attributes["GROUP-ID"]],ie={default:/yes/i.test(P.attributes.DEFAULT)},ie.default?ie.autoselect=!0:ie.autoselect=/yes/i.test(P.attributes.AUTOSELECT),P.attributes.LANGUAGE&&(ie.language=P.attributes.LANGUAGE),P.attributes.URI&&(ie.uri=P.attributes.URI),P.attributes["INSTREAM-ID"]&&(ie.instreamId=P.attributes["INSTREAM-ID"]),P.attributes.CHARACTERISTICS&&(ie.characteristics=P.attributes.CHARACTERISTICS),P.attributes.FORCED&&(ie.forced=/yes/i.test(P.attributes.FORCED)),H[P.attributes.NAME]=ie},discontinuity:function(){T+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time":function(){typeof this.manifest.dateTimeString=="undefined"&&(this.manifest.dateTimeString=P.dateTimeString,this.manifest.dateTimeObject=P.dateTimeObject),a.dateTimeString=P.dateTimeString,a.dateTimeObject=P.dateTimeObject},targetduration:function(){if(!isFinite(P.duration)||P.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+P.duration});return}this.manifest.targetDuration=P.duration,ke.call(this,this.manifest)},start:function(){if(!P.attributes||isNaN(P.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:P.attributes["TIME-OFFSET"],precise:P.attributes.PRECISE}},"cue-out":function(){a.cueOut=P.data},"cue-out-cont":function(){a.cueOutCont=P.data},"cue-in":function(){a.cueIn=P.data},skip:function(){this.manifest.skip=fe(P.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",P.attributes,["SKIPPED-SEGMENTS"])},part:function(){var q=this;l=!0;var ue=this.manifest.segments.length,$=fe(P.attributes);a.parts=a.parts||[],a.parts.push($),$.byterange&&($.byterange.hasOwnProperty("offset")||($.byterange.offset=C),C=$.byterange.offset+$.byterange.length);var X=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+X+" for segment #"+ue,P.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(se,Y){se.hasOwnProperty("lastPart")||q.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+Y+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var q=this.manifest.serverControl=fe(P.attributes);q.hasOwnProperty("canBlockReload")||(q.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),ke.call(this,this.manifest),q.canSkipDateranges&&!q.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var q=this.manifest.segments.length,ue=fe(P.attributes),$=ue.type&&ue.type==="PART";a.preloadHints=a.preloadHints||[],a.preloadHints.push(ue),ue.byterange&&(ue.byterange.hasOwnProperty("offset")||(ue.byterange.offset=$?C:0,$&&(C=ue.byterange.offset+ue.byterange.length)));var X=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+X+" for segment #"+q,P.attributes,["TYPE","URI"]),!!ue.type)for(var se=0;se<a.preloadHints.length-1;se++){var Y=a.preloadHints[se];!Y.type||Y.type===ue.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+X+" for segment #"+q+" has the same TYPE "+ue.type+" as preload hint #"+se})}},"rendition-report":function(){var q=fe(P.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(q);var ue=this.manifest.renditionReports.length-1,$=["LAST-MSN","URI"];l&&$.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+ue,P.attributes,$)},"part-inf":function(){this.manifest.partInf=fe(P.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",P.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),ke.call(this,this.manifest)}}[P.tagType]||c).call(e)},uri:function(){a.uri=P.uri,t.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),u&&(a.key=u),a.timeline=T,o&&(a.map=o),C=0,a={}},comment:function(){},custom:function(){P.segment?(a.custom=a.custom||{},a.custom[P.customType]=P.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[P.customType]=P.data)}})[P.type].call(e)}),r}var n=i.prototype;return n.warnOnMissingAttributes_=function(e,t,a){var o=[];a.forEach(function(u){t.hasOwnProperty(u)||o.push(u)}),o.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+o.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push(`
`),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},i}(I),ze={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Re=["video","audio","text"],Ne=["Video","Audio","Text"],bt=function(i){return i&&i.replace(/avc1\.(\d+)\.(\d+)/i,function(n,r,e){var t=("00"+Number(r).toString(16)).slice(-2),a=("00"+Number(e).toString(16)).slice(-2);return"avc1."+t+"00"+a})},Bt=function(i){return i.map(bt)},Ct=function(i){return i.replace(/avc1\.(\d+)\.(\d+)/i,function(n){return Bt([n])[0]})},it=function(i){i===void 0&&(i="");var n=i.split(","),r=[];return n.forEach(function(e){e=e.trim();var t;Re.forEach(function(a){var o=ze[a].exec(e.toLowerCase());if(!(!o||o.length<=1)){t=a;var u=e.substring(0,o[1].length),l=e.replace(u,"");r.push({type:u,details:l,mediaType:a})}}),t||r.push({type:e,details:"",mediaType:"unknown"})}),r},Zt=function(i,n){if(!i.mediaGroups.AUDIO||!n)return null;var r=i.mediaGroups.AUDIO[n];if(!r)return null;for(var e in r){var t=r[e];if(t.default&&t.playlists)return it(t.playlists[0].attributes.CODECS)}return null},Ai=function(i){return i===void 0&&(i=""),ze.video.test(i.trim().toLowerCase())},Bi=function(i){return i===void 0&&(i=""),ze.audio.test(i.trim().toLowerCase())},Qe=function(i){return i===void 0&&(i=""),ze.text.test(i.trim().toLowerCase())},ft=function(i){if(!(!i||typeof i!="string")){var n=i.toLowerCase().split(",").map(function(t){return bt(t.trim())}),r="video";n.length===1&&Bi(n[0])?r="audio":n.length===1&&Qe(n[0])&&(r="application");var e="mp4";return n.every(function(t){return ze.mp4.test(t)})?e="mp4":n.every(function(t){return ze.webm.test(t)})?e="webm":n.every(function(t){return ze.ogg.test(t)})&&(e="ogg"),r+"/"+e+';codecs="'+i+'"'}},Gt=function(i){return i===void 0&&(i=""),x().MediaSource&&x().MediaSource.isTypeSupported&&x().MediaSource.isTypeSupported(ft(i))||!1},lt=function(i){return i===void 0&&(i=""),i.toLowerCase().split(",").every(function(n){n=n.trim();for(var r=0;r<Ne.length;r++){var e=Ne[r];if(ze["muxer"+e].test(n))return!0}return!1})},Zi="mp4a.40.2",Pi="avc1.4d400d",mi=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Vi=/^application\/dash\+xml/i,rt=function(i){return mi.test(i)?"hls":Vi.test(i)?"dash":i==="application/vnd.videojs.vhs+json"?"vhs-json":null},mt=function(i,n){for(var r="";n--;)r+=i;return r},Vt=function(i){return i.toString(2).length},li=function(i){return Math.ceil(Vt(i)/8)},Ji=function(i,n,r){return r===void 0&&(r=" "),(mt(r,n)+i.toString()).slice(-n)},vr=function(i){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer},Pr=function(i){return vr(i)},Me=function(i){return i instanceof Uint8Array?i:(!Array.isArray(i)&&!Pr(i)&&!(i instanceof ArrayBuffer)&&(typeof i!="number"||typeof i=="number"&&i!==i?i=0:i=[i]),new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0))},ba=function(i){i=Me(i);for(var n="",r=0;r<i.length;r++)n+=Ji(i[r].toString(16),2,"0");return n},Rn=function(i){i=Me(i);for(var n="",r=0;r<i.length;r++)n+=Ji(i[r].toString(2),8,"0");return n},xt=x().BigInt||Number,_r=[xt("0x1"),xt("0x100"),xt("0x10000"),xt("0x1000000"),xt("0x100000000"),xt("0x10000000000"),xt("0x1000000000000"),xt("0x100000000000000"),xt("0x10000000000000000")],bi=function(){var s=new Uint16Array([65484]),i=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);return i[0]===255?"big":i[0]===204?"little":"unknown"}(),Ir=bi==="big",Hi=bi==="little",Ii=function(i,n){var r=n===void 0?{}:n,e=r.signed,t=e===void 0?!1:e,a=r.le,o=a===void 0?!1:a;i=Me(i);var u=o?"reduce":"reduceRight",l=i[u]?i[u]:Array.prototype[u],c=l.call(i,function(m,T,E){var C=o?E:Math.abs(E+1-i.length);return m+xt(T)*_r[C]},xt(0));if(t){var g=_r[i.length]/xt(2)-xt(1);c=xt(c),c>g&&(c-=g,c-=g,c-=xt(2))}return Number(c)},er=function(i,n){var r=n===void 0?{}:n,e=r.le,t=e===void 0?!1:e;(typeof i!="bigint"&&typeof i!="number"||typeof i=="number"&&i!==i)&&(i=0),i=xt(i);for(var a=li(i),o=new Uint8Array(new ArrayBuffer(a)),u=0;u<a;u++){var l=t?u:Math.abs(u+1-o.length);o[l]=Number(i/_r[u]&xt(255)),i<0&&(o[l]=Math.abs(~o[l]),o[l]-=u===0?1:2)}return o},tr=function(i){if(!i)return"";i=Array.prototype.slice.call(i);var n=String.fromCharCode.apply(null,Me(i));try{return decodeURIComponent(escape(n))}catch(r){}return n},ki=function(i,n){if(typeof i!="string"&&i&&typeof i.toString=="function"&&(i=i.toString()),typeof i!="string")return new Uint8Array;n||(i=unescape(encodeURIComponent(i)));for(var r=new Uint8Array(i.length),e=0;e<i.length;e++)r[e]=i.charCodeAt(e);return r},ji=function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];if(n=n.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),n.length<=1)return Me(n[0]);var e=n.reduce(function(o,u,l){return o+(u.byteLength||u.length)},0),t=new Uint8Array(e),a=0;return n.forEach(function(o){o=Me(o),t.set(o,a),a+=o.byteLength}),t},nt=function(i,n,r){var e=r===void 0?{}:r,t=e.offset,a=t===void 0?0:t,o=e.mask,u=o===void 0?[]:o;i=Me(i),n=Me(n);var l=n.every?n.every:Array.prototype.every;return n.length&&i.length-a>=n.length&&l.call(n,function(c,g){var m=u[g]?u[g]&i[a+g]:i[a+g];return c===m})},Qr=function(i,n,r){return Uint8Array.prototype.slice?Uint8Array.prototype.slice.call(i,n,r):new Uint8Array(Array.prototype.slice.call(i,n,r))},kr=function(i){return i.reverse?i.reverse():Array.prototype.reverse.call(i)},Dr=function(i,n,r){n.forEach(function(e){for(var t in i.mediaGroups[e])for(var a in i.mediaGroups[e][t]){var o=i.mediaGroups[e][t][a];r(o,e,t,a)}})},Zr=R(6035);var Jr="0.21.1",yr=function(i){return!!i&&typeof i=="object"},dt=function s(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return n.reduce(function(e,t){return typeof t!="object"||Object.keys(t).forEach(function(a){Array.isArray(e[a])&&Array.isArray(t[a])?e[a]=e[a].concat(t[a]):yr(e[a])&&yr(t[a])?e[a]=s(e[a],t[a]):e[a]=t[a]}),e},{})},Di=function(i){return Object.keys(i).map(function(n){return i[n]})},en=function(i,n){for(var r=[],e=i;e<n;e++)r.push(e);return r},Wi=function(i){return i.reduce(function(n,r){return n.concat(r)},[])},Or=function(i){if(!i.length)return[];for(var n=[],r=0;r<i.length;r++)n.push(i[r]);return n},Hs=function(i,n){return i.reduce(function(r,e,t){return e[n]&&r.push(t),r},[])},b=function(i,n){for(var r=0;r<i.length;r++)if(n(i[r]))return r;return-1},S=function(i,n){return Di(i.reduce(function(r,e){return e.forEach(function(t){r[n(t)]=t}),r},{}))},O={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},W=function(i){var n=i.baseUrl,r=n===void 0?"":n,e=i.source,t=e===void 0?"":e,a=i.range,o=a===void 0?"":a,u=i.indexRange,l=u===void 0?"":u,c={uri:t,resolvedUri:We(r||"",t)};if(o||l){var g=o||l,m=g.split("-"),T=x().BigInt?x().BigInt(m[0]):parseInt(m[0],10),E=x().BigInt?x().BigInt(m[1]):parseInt(m[1],10);T<Number.MAX_SAFE_INTEGER&&typeof T=="bigint"&&(T=Number(T)),E<Number.MAX_SAFE_INTEGER&&typeof E=="bigint"&&(E=Number(E));var C;typeof E=="bigint"||typeof T=="bigint"?C=x().BigInt(E)-x().BigInt(T)+x().BigInt(1):C=E-T+1,typeof C=="bigint"&&C<Number.MAX_SAFE_INTEGER&&(C=Number(C)),c.byterange={length:C,offset:T}}return c},ve=function(i){var n;return typeof i.offset=="bigint"||typeof i.length=="bigint"?n=x().BigInt(i.offset)+x().BigInt(i.length)-x().BigInt(1):n=i.offset+i.length-1,i.offset+"-"+n},He=function(i){return i&&typeof i!="number"&&(i=parseInt(i,10)),isNaN(i)?null:i},Ze={static:function(i){var n=i.duration,r=i.timescale,e=r===void 0?1:r,t=i.sourceDuration,a=i.periodDuration,o=He(i.endNumber),u=n/e;return typeof o=="number"?{start:0,end:o}:typeof a=="number"?{start:0,end:a/u}:{start:0,end:t/u}},dynamic:function(i){var n=i.NOW,r=i.clientOffset,e=i.availabilityStartTime,t=i.timescale,a=t===void 0?1:t,o=i.duration,u=i.periodStart,l=u===void 0?0:u,c=i.minimumUpdatePeriod,g=c===void 0?0:c,m=i.timeShiftBufferDepth,T=m===void 0?1/0:m,E=He(i.endNumber),C=(n+r)/1e3,P=e+l,H=C+g,ie=H-P,be=Math.ceil(ie*a/o),G=Math.floor((C-P-T)*a/o),q=Math.floor((C-P)*a/o);return{start:Math.max(0,G),end:typeof E=="number"?E:Math.min(be,q)}}},qt=function(i){return function(n){var r=i.duration,e=i.timescale,t=e===void 0?1:e,a=i.periodStart,o=i.startNumber,u=o===void 0?1:o;return{number:u+n,duration:r/t,timeline:a,time:n*r}}},Jt=function(i){var n=i.type,r=i.duration,e=i.timescale,t=e===void 0?1:e,a=i.periodDuration,o=i.sourceDuration,u=Ze[n](i),l=u.start,c=u.end,g=en(l,c).map(qt(i));if(n==="static"){var m=g.length-1,T=typeof a=="number"?a:o;g[m].duration=T-r/t*m}return g},Xt=function(i){var n=i.baseUrl,r=i.initialization,e=r===void 0?{}:r,t=i.sourceDuration,a=i.indexRange,o=a===void 0?"":a,u=i.periodStart,l=i.presentationTime,c=i.number,g=c===void 0?0:c,m=i.duration;if(!n)throw new Error(O.NO_BASE_URL);var T=W({baseUrl:n,source:e.sourceURL,range:e.range}),E=W({baseUrl:n,source:n,indexRange:o});if(E.map=T,m){var C=Jt(i);C.length&&(E.duration=C[0].duration,E.timeline=C[0].timeline)}else t&&(E.duration=t,E.timeline=u);return E.presentationTime=l||u,E.number=g,[E]},ei=function(i,n,r){var e=i.sidx.map?i.sidx.map:null,t=i.sidx.duration,a=i.timeline||0,o=i.sidx.byterange,u=o.offset+o.length,l=n.timescale,c=n.references.filter(function(se){return se.referenceType!==1}),g=[],m=i.endList?"static":"dynamic",T=i.sidx.timeline,E=T,C=i.mediaSequence||0,P;typeof n.firstOffset=="bigint"?P=x().BigInt(u)+n.firstOffset:P=u+n.firstOffset;for(var H=0;H<c.length;H++){var ie=n.references[H],be=ie.referencedSize,G=ie.subsegmentDuration,q=void 0;typeof P=="bigint"?q=P+x().BigInt(be)-x().BigInt(1):q=P+be-1;var ue=P+"-"+q,$={baseUrl:r,timescale:l,timeline:a,periodStart:T,presentationTime:E,number:C,duration:G,sourceDuration:t,indexRange:ue,type:m},X=Xt($)[0];e&&(X.map=e),g.push(X),typeof P=="bigint"?P+=x().BigInt(be):P+=be,E+=G/l,C++}return i.segments=g,i},Oi=["AUDIO","SUBTITLES"],$t=1/60,xi=function(i){return S(i,function(n){var r=n.timeline;return r}).sort(function(n,r){return n.timeline>r.timeline?1:-1})},di=function(i,n){for(var r=0;r<i.length;r++)if(i[r].attributes.NAME===n)return i[r];return null},Si=function(i){var n=[];return Dr(i,Oi,function(r,e,t,a){n=n.concat(r.playlists||[])}),n},Gi=function(i){var n=i.playlist,r=i.mediaSequence;n.mediaSequence=r,n.segments.forEach(function(e,t){e.number=n.mediaSequence+t})},Mt=function(i){var n=i.oldPlaylists,r=i.newPlaylists,e=i.timelineStarts;r.forEach(function(t){t.discontinuitySequence=b(e,function(c){var g=c.timeline;return g===t.timeline});var a=di(n,t.attributes.NAME);if(!!a&&!t.sidx){var o=t.segments[0],u=b(a.segments,function(c){return Math.abs(c.presentationTime-o.presentationTime)<$t});if(u===-1){Gi({playlist:t,mediaSequence:a.mediaSequence+a.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),(!a.segments.length&&t.timeline>a.timeline||a.segments.length&&t.timeline>a.segments[a.segments.length-1].timeline)&&t.discontinuitySequence--;return}var l=a.segments[u];l.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),Gi({playlist:t,mediaSequence:a.segments[u].number})}})},tn=function(i){var n=i.oldManifest,r=i.newManifest,e=n.playlists.concat(Si(n)),t=r.playlists.concat(Si(r));return r.timelineStarts=xi([n.timelineStarts,r.timelineStarts]),Mt({oldPlaylists:e,newPlaylists:t,timelineStarts:r.timelineStarts}),r},ci=function(i){return i&&i.uri+"-"+ve(i.byterange)},Li=function(i){var n=Di(i.reduce(function(r,e){var t=e.attributes.id+(e.attributes.lang||"");if(!r[t])r[t]=e,r[t].attributes.timelineStarts=[];else{if(e.segments){var a;e.segments[0]&&(e.segments[0].discontinuity=!0),(a=r[t].segments).push.apply(a,e.segments)}e.attributes.contentProtection&&(r[t].attributes.contentProtection=e.attributes.contentProtection)}return r[t].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),r},{}));return n.map(function(r){return r.discontinuityStarts=Hs(r.segments||[],"discontinuity"),r})},Nn=function(i,n){var r=ci(i.sidx),e=r&&n[r]&&n[r].sidx;return e&&ei(i,e,i.sidx.resolvedUri),i},Fn=function(i,n){if(n===void 0&&(n={}),!Object.keys(n).length)return i;for(var r in i)i[r]=Nn(i[r],n);return i},js=function(i,n){var r,e=i.attributes,t=i.segments,a=i.sidx,o=i.mediaSequence,u=i.discontinuitySequence,l=i.discontinuityStarts,c={attributes:(r={NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:u,discontinuityStarts:l,timelineStarts:e.timelineStarts,mediaSequence:o,segments:t};return e.contentProtection&&(c.contentProtection=e.contentProtection),a&&(c.sidx=a),n&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c},Ws=function(i){var n,r=i.attributes,e=i.segments,t=i.mediaSequence,a=i.discontinuityStarts,o=i.discontinuitySequence;typeof e=="undefined"&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);var u=(n={NAME:r.id,BANDWIDTH:r.bandwidth},n["PROGRAM-ID"]=1,n);return r.codecs&&(u.CODECS=r.codecs),{attributes:u,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:t,segments:e}},Gs=function(i,n,r){n===void 0&&(n={}),r===void 0&&(r=!1);var e,t=i.reduce(function(o,u){var l=u.attributes.role&&u.attributes.role.value||"",c=u.attributes.lang||"",g=u.attributes.label||"main";if(c&&!u.attributes.label){var m=l?" ("+l+")":"";g=""+u.attributes.lang+m}o[g]||(o[g]={language:c,autoselect:!0,default:l==="main",playlists:[],uri:""});var T=Nn(js(u,r),n);return o[g].playlists.push(T),typeof e=="undefined"&&l==="main"&&(e=u,e.default=!0),o},{});if(!e){var a=Object.keys(t)[0];t[a].default=!0}return t},qs=function(i,n){return n===void 0&&(n={}),i.reduce(function(r,e){var t=e.attributes.lang||"text";return r[t]||(r[t]={language:t,default:!1,autoselect:!1,playlists:[],uri:""}),r[t].playlists.push(Nn(Ws(e),n)),r},{})},zs=function(i){return i.reduce(function(n,r){return r&&r.forEach(function(e){var t=e.channel,a=e.language;n[a]={autoselect:!1,default:!1,instreamId:t,language:a},e.hasOwnProperty("aspectRatio")&&(n[a].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(n[a].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(n[a]["3D"]=e["3D"])}),n},{})},Ks=function(i){var n,r=i.attributes,e=i.segments,t=i.sidx,a=i.discontinuityStarts,o={attributes:(n={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuityStarts:a,timelineStarts:r.timelineStarts,segments:e};return r.contentProtection&&(o.contentProtection=r.contentProtection),t&&(o.sidx=t),o},Un=function(i){var n=i.attributes;return n.mimeType==="video/mp4"||n.mimeType==="video/webm"||n.contentType==="video"},Xs=function(i){var n=i.attributes;return n.mimeType==="audio/mp4"||n.mimeType==="audio/webm"||n.contentType==="audio"},$s=function(i){var n=i.attributes;return n.mimeType==="text/vtt"||n.contentType==="text"},Ys=function(i,n){i.forEach(function(r){r.mediaSequence=0,r.discontinuitySequence=b(n,function(e){var t=e.timeline;return t===r.timeline}),r.segments&&r.segments.forEach(function(e,t){e.number=t})})},xa=function(i){return i?Object.keys(i).reduce(function(n,r){var e=i[r];return n.concat(e.playlists)},[]):[]},Qs=function(i){var n,r=i.dashPlaylists,e=i.locations,t=i.sidxMapping,a=t===void 0?{}:t,o=i.previousManifest;if(!r.length)return{};var u=r[0].attributes,l=u.sourceDuration,c=u.type,g=u.suggestedPresentationDelay,m=u.minimumUpdatePeriod,T=Li(r.filter(Un)).map(Ks),E=Li(r.filter(Xs)),C=Li(r.filter($s)),P=r.map(function($){return $.attributes.captionServices}).filter(Boolean),H={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:l,playlists:Fn(T,a)};m>=0&&(H.minimumUpdatePeriod=m*1e3),e&&(H.locations=e),c==="dynamic"&&(H.suggestedPresentationDelay=g);var ie=H.playlists.length===0,be=E.length?Gs(E,a,ie):null,G=C.length?qs(C,a):null,q=T.concat(xa(be),xa(G)),ue=q.map(function($){var X=$.timelineStarts;return X});return H.timelineStarts=xi(ue),Ys(q,H.timelineStarts),be&&(H.mediaGroups.AUDIO.audio=be),G&&(H.mediaGroups.SUBTITLES.subs=G),P.length&&(H.mediaGroups["CLOSED-CAPTIONS"].cc=zs(P)),o?tn({oldManifest:o,newManifest:H}):H},Zs=function(i,n,r){var e=i.NOW,t=i.clientOffset,a=i.availabilityStartTime,o=i.timescale,u=o===void 0?1:o,l=i.periodStart,c=l===void 0?0:l,g=i.minimumUpdatePeriod,m=g===void 0?0:g,T=(e+t)/1e3,E=a+c,C=T+m,P=C-E;return Math.ceil((P*u-n)/r)},Sa=function(i,n){for(var r=i.type,e=i.minimumUpdatePeriod,t=e===void 0?0:e,a=i.media,o=a===void 0?"":a,u=i.sourceDuration,l=i.timescale,c=l===void 0?1:l,g=i.startNumber,m=g===void 0?1:g,T=i.periodStart,E=[],C=-1,P=0;P<n.length;P++){var H=n[P],ie=H.d,be=H.r||0,G=H.t||0;C<0&&(C=G),G&&G>C&&(C=G);var q=void 0;if(be<0){var ue=P+1;ue===n.length?r==="dynamic"&&t>0&&o.indexOf("$Number$")>0?q=Zs(i,C,ie):q=(u*c-C)/ie:q=(n[ue].t-C)/ie}else q=be+1;for(var $=m+E.length+q,X=m+E.length;X<$;)E.push({number:X,duration:ie/c,time:C,timeline:T}),C+=ie,X++}return E},Ea=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Js=function(i){return function(n,r,e,t){if(n==="$$")return"$";if(typeof i[r]=="undefined")return n;var a=""+i[r];return r==="RepresentationID"||(e?t=parseInt(t,10):t=1,a.length>=t)?a:""+new Array(t-a.length+1).join("0")+a}},Ca=function(i,n){return i.replace(Ea,Js(n))},rn=function(i,n){return!i.duration&&!n?[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]:i.duration?Jt(i):Sa(i,n)},Tr=function(i,n){var r={RepresentationID:i.id,Bandwidth:i.bandwidth||0},e=i.initialization,t=e===void 0?{sourceURL:"",range:""}:e,a=W({baseUrl:i.baseUrl,source:Ca(t.sourceURL,r),range:t.range}),o=rn(i,n);return o.map(function(u){r.Number=u.number,r.Time=u.time;var l=Ca(i.media||"",r),c=i.timescale||1,g=i.presentationTimeOffset||0,m=i.periodStart+(u.time-g)/c,T={uri:l,timeline:u.timeline,duration:u.duration,resolvedUri:We(i.baseUrl||"",l),map:a,number:u.number,presentationTime:m};return T})},wa=function(i,n){var r=i.baseUrl,e=i.initialization,t=e===void 0?{}:e,a=W({baseUrl:r,source:t.sourceURL,range:t.range}),o=W({baseUrl:r,source:n.media,range:n.mediaRange});return o.map=a,o},ir=function(i,n){var r=i.duration,e=i.segmentUrls,t=e===void 0?[]:e,a=i.periodStart;if(!r&&!n||r&&n)throw new Error(O.SEGMENT_TIME_UNSPECIFIED);var o=t.map(function(c){return wa(i,c)}),u;r&&(u=Jt(i)),n&&(u=Sa(i,n));var l=u.map(function(c,g){if(o[g]){var m=o[g],T=i.timescale||1,E=i.presentationTimeOffset||0;return m.timeline=c.timeline,m.duration=c.duration,m.number=c.number,m.presentationTime=a+(c.time-E)/T,m}}).filter(function(c){return c});return l},eo=function(i){var n=i.attributes,r=i.segmentInfo,e,t;r.template?(t=Tr,e=dt(n,r.template)):r.base?(t=Xt,e=dt(n,r.base)):r.list&&(t=ir,e=dt(n,r.list));var a={attributes:n};if(!t)return a;var o=t(e,r.segmentTimeline);if(e.duration){var u=e,l=u.duration,c=u.timescale,g=c===void 0?1:c;e.duration=l/g}else o.length?e.duration=o.reduce(function(m,T){return Math.max(m,Math.ceil(T.duration))},0):e.duration=0;return a.attributes=e,a.segments=o,r.base&&e.indexRange&&(a.sidx=o[0],a.segments=[]),a},to=function(i){return i.map(eo)},wt=function(i,n){return Or(i.childNodes).filter(function(r){var e=r.tagName;return e===n})},Bn=function(i){return i.textContent.trim()},br=function(i){var n=31536e3,r=30*24*60*60,e=24*60*60,t=60*60,a=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,u=o.exec(i);if(!u)return 0;var l=u.slice(1),c=l[0],g=l[1],m=l[2],T=l[3],E=l[4],C=l[5];return parseFloat(c||0)*n+parseFloat(g||0)*r+parseFloat(m||0)*e+parseFloat(T||0)*t+parseFloat(E||0)*a+parseFloat(C||0)},io=function(i){var n=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return n.test(i)&&(i+="Z"),Date.parse(i)},Vn={mediaPresentationDuration:function(i){return br(i)},availabilityStartTime:function(i){return io(i)/1e3},minimumUpdatePeriod:function(i){return br(i)},suggestedPresentationDelay:function(i){return br(i)},type:function(i){return i},timeShiftBufferDepth:function(i){return br(i)},start:function(i){return br(i)},width:function(i){return parseInt(i,10)},height:function(i){return parseInt(i,10)},bandwidth:function(i){return parseInt(i,10)},startNumber:function(i){return parseInt(i,10)},timescale:function(i){return parseInt(i,10)},presentationTimeOffset:function(i){return parseInt(i,10)},duration:function(i){var n=parseInt(i,10);return isNaN(n)?br(i):n},d:function(i){return parseInt(i,10)},t:function(i){return parseInt(i,10)},r:function(i){return parseInt(i,10)},DEFAULT:function(i){return i}},St=function(i){return i&&i.attributes?Or(i.attributes).reduce(function(n,r){var e=Vn[r.name]||Vn.DEFAULT;return n[r.name]=e(r.value),n},{}):{}},ro={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Lr=function(i,n){return n.length?Wi(i.map(function(r){return n.map(function(e){return We(r,Bn(e))})})):i},Hn=function(i){var n=wt(i,"SegmentTemplate")[0],r=wt(i,"SegmentList")[0],e=r&&wt(r,"SegmentURL").map(function(m){return dt({tag:"SegmentURL"},St(m))}),t=wt(i,"SegmentBase")[0],a=r||n,o=a&&wt(a,"SegmentTimeline")[0],u=r||t||n,l=u&&wt(u,"Initialization")[0],c=n&&St(n);c&&l?c.initialization=l&&St(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var g={template:c,segmentTimeline:o&&wt(o,"S").map(function(m){return St(m)}),list:r&&dt(St(r),{segmentUrls:e,initialization:St(l)}),base:t&&dt(St(t),{initialization:St(l)})};return Object.keys(g).forEach(function(m){g[m]||delete g[m]}),g},jn=function(i,n,r){return function(e){var t=wt(e,"BaseURL"),a=Lr(n,t),o=dt(i,St(e)),u=Hn(e);return a.map(function(l){return{segmentInfo:dt(r,u),attributes:dt(o,{baseUrl:l})}})}},Aa=function(i){return i.reduce(function(n,r){var e=St(r);e.schemeIdUri&&(e.schemeIdUri=e.schemeIdUri.toLowerCase());var t=ro[e.schemeIdUri];if(t){n[t]={attributes:e};var a=wt(r,"cenc:pssh")[0];if(a){var o=Bn(a);n[t].pssh=o&&de(o)}}return n},{})},no=function(i){if(i.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var n=typeof i.value!="string"?[]:i.value.split(";");return n.map(function(e){var t,a;if(a=e,/^CC\d=/.test(e)){var o=e.split("=");t=o[0],a=o[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:a}})}else if(i.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var r=typeof i.value!="string"?[]:i.value.split(";");return r.map(function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var a=e.split("="),o=a[0],u=a[1],l=u===void 0?"":u;t.channel=o,t.language=e,l.split(",").forEach(function(c){var g=c.split(":"),m=g[0],T=g[1];m==="lang"?t.language=T:m==="er"?t.easyReader=Number(T):m==="war"?t.aspectRatio=Number(T):m==="3D"&&(t["3D"]=Number(T))})}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})}},ao=function(i,n,r){return function(e){var t=St(e),a=Lr(n,wt(e,"BaseURL")),o=wt(e,"Role")[0],u={role:St(o)},l=dt(i,t,u),c=wt(e,"Accessibility")[0],g=no(St(c));g&&(l=dt(l,{captionServices:g}));var m=wt(e,"Label")[0];if(m&&m.childNodes.length){var T=m.childNodes[0].nodeValue.trim();l=dt(l,{label:T})}var E=Aa(wt(e,"ContentProtection"));Object.keys(E).length&&(l=dt(l,{contentProtection:E}));var C=Hn(e),P=wt(e,"Representation"),H=dt(r,C);return Wi(P.map(jn(l,a,H)))}},Pa=function(i,n){return function(r,e){var t=Lr(n,wt(r.node,"BaseURL")),a=dt(i,{periodStart:r.attributes.start});typeof r.attributes.duration=="number"&&(a.periodDuration=r.attributes.duration);var o=wt(r.node,"AdaptationSet"),u=Hn(r.node);return Wi(o.map(ao(a,t,u)))}},so=function(i){var n=i.attributes,r=i.priorPeriodAttributes,e=i.mpdType;return typeof n.start=="number"?n.start:r&&typeof r.start=="number"&&typeof r.duration=="number"?r.start+r.duration:!r&&e==="static"?0:null},nn=function(i,n){n===void 0&&(n={});var r=n,e=r.manifestUri,t=e===void 0?"":e,a=r.NOW,o=a===void 0?Date.now():a,u=r.clientOffset,l=u===void 0?0:u,c=wt(i,"Period");if(!c.length)throw new Error(O.INVALID_NUMBER_OF_PERIOD);var g=wt(i,"Location"),m=St(i),T=Lr([t],wt(i,"BaseURL"));m.type=m.type||"static",m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=o,m.clientOffset=l,g.length&&(m.locations=g.map(Bn));var E=[];return c.forEach(function(C,P){var H=St(C),ie=E[P-1];H.start=so({attributes:H,priorPeriodAttributes:ie?ie.attributes:null,mpdType:m.type}),E.push({node:C,attributes:H})}),{locations:m.locations,representationInfo:Wi(E.map(Pa(m,T)))}},Ia=function(i){if(i==="")throw new Error(O.DASH_EMPTY_MANIFEST);var n=new Zr.DOMParser,r,e;try{r=n.parseFromString(i,"application/xml"),e=r&&r.documentElement.tagName==="MPD"?r.documentElement:null}catch(t){}if(!e||e&&e.getElementsByTagName("parsererror").length>0)throw new Error(O.DASH_INVALID_XML);return e},Wn=function(i){var n=wt(i,"UTCTiming")[0];if(!n)return null;var r=St(n);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(O.UNSUPPORTED_UTC_TIMING_SCHEME)}return r},el=null,oo=function(i,n){n===void 0&&(n={});var r=nn(Ia(i),n),e=to(r.representationInfo);return Qs({dashPlaylists:e,locations:r.locations,sidxMapping:n.sidxMapping,previousManifest:n.previousManifest})},A=function(i){return Wn(Ia(i))},V=R(31648),te=R.n(V),Oe=Me([73,68,51]),Rt=function(i,n){n===void 0&&(n=0),i=Me(i);var r=i[n+5],e=i[n+6]<<21|i[n+7]<<14|i[n+8]<<7|i[n+9],t=(r&16)>>4;return t?e+20:e+10},kt=function s(i,n){return n===void 0&&(n=0),i=Me(i),i.length-n<10||!nt(i,Oe,{offset:n})?n:(n+=Rt(i,n),s(i,n))},gi=function(i){var n="",r=i[1]>>>3,e=i[1]&31,t=i[2]>>>7,a=(i[2]&64)>>6,o=(i[2]&32)>>5,u=(i[2]&16)>>4,l=(i[2]&8)>>3,c=(i[2]&4)>>2,g=i[2]&3;n+=r+"."+padStart(e,2,"0"),t===0?n+="M":t===1&&(n+="H");var m;return r===2&&a?m=o?12:10:m=a?10:8,n+="."+padStart(m,2,"0"),n+="."+u,n+="."+l+c+g,n},ti=function(i){var n=toHexString(i[1]),r=toHexString(i[2]&252),e=toHexString(i[3]);return""+n+r+e},uo=function(i){var n="",r=i[1]>>6,e=i[1]&31,t=(i[1]&32)>>5,a=i.subarray(2,6),o=i.subarray(6,12),u=i[12];r===1?n+="A":r===2?n+="B":r===3&&(n+="C"),n+=e+".";var l=parseInt(toBinaryString(a).split("").reverse().join(""),2);l>255&&(l=parseInt(toBinaryString(a),2)),n+=l.toString(16)+".",t===0?n+="L":n+="H",n+=u;for(var c="",g=0;g<o.length;g++){var m=o[g];m&&(c&&(c+="."),c+=m.toString(16))}return c&&(n+="."+c),n},Mr=new Uint8Array([79,112,117,115,72,101,97,100]),lo=function(i){var n=new DataView(i.buffer,i.byteOffset,i.byteLength),r=n.getUint8(0),e=r!==0,t={version:r,channels:n.getUint8(1),preSkip:n.getUint16(2,e),sampleRate:n.getUint32(4,e),outputGain:n.getUint16(8,e),channelMappingFamily:n.getUint8(10)};if(t.channelMappingFamily>0&&i.length>10){t.streamCount=n.getUint8(11),t.twoChannelStreamCount=n.getUint8(12),t.channelMapping=[];for(var a=0;a<t.channels;a++)t.channelMapping.push(n.getUint8(13+a))}return t},co=function(i){var n=i.channelMappingFamily<=0?11:12+i.channels,r=new DataView(new ArrayBuffer(n)),e=i.version!==0;return r.setUint8(0,i.version),r.setUint8(1,i.channels),r.setUint16(2,i.preSkip,e),r.setUint32(4,i.sampleRate,e),r.setUint16(8,i.outputGain,e),r.setUint8(10,i.channelMappingFamily),i.channelMappingFamily>0&&(r.setUint8(11,i.streamCount),i.channelMapping.foreach(function(t,a){r.setUint8(12+a,t)})),new Uint8Array(r.buffer)},an=function(i){return typeof i=="string"?ki(i):i},Gn=function(i){return Array.isArray(i)?i.map(function(n){return an(n)}):[an(i)]},xr,fo=function(i){i=Me(i);for(var n=[],r=0;i.length>r;){var e=i[r],t=0,a=0;a++;var o=i[a];for(a++;o&128;)t=(o&127)<<7,o=i[a],a++;t+=o&127;for(var u=0;u<xr.length;u++){var l=xr[u],c=l.id,g=l.parser;if(e===c){n.push(g(i.subarray(a,a+t)));break}}r+=t+a}return n};xr=[{id:3,parser:function(i){var n={tag:3,id:i[0]<<8|i[1],flags:i[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(n.flags&128&&(n.dependsOnEsId=i[n.size]<<8|i[n.size+1],n.size+=2),n.flags&64){var r=i[n.size];n.url=tr(i.subarray(n.size+1,n.size+1+r)),n.size+=r}return n.flags&32&&(n.ocrEsId=i[n.size]<<8|i[n.size+1],n.size+=2),n.descriptors=fo(i.subarray(n.size))||[],n}},{id:4,parser:function(i){var n={tag:4,oti:i[0],streamType:i[1],bufferSize:i[2]<<16|i[3]<<8|i[4],maxBitrate:i[5]<<24|i[6]<<16|i[7]<<8|i[8],avgBitrate:i[9]<<24|i[10]<<16|i[11]<<8|i[12],descriptors:fo(i.subarray(13))};return n}},{id:5,parser:function(i){return{tag:5,bytes:i}}},{id:6,parser:function(i){return{tag:6,bytes:i}}}];var fi=function s(i,n,r){r===void 0&&(r=!1),n=Gn(n),i=Me(i);var e=[];if(!n.length)return e;for(var t=0;t<i.length;){var a=(i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3])>>>0,o=i.subarray(t+4,t+8);if(a===0)break;var u=t+a;if(u>i.length){if(r)break;u=i.length}var l=i.subarray(t+8,u);nt(o,n[0])&&(n.length===1?e.push(l):e.push.apply(e,s(l,n.slice(1),r))),t=u}return e},sn=function(i,n){if(n=an(n),!n.length)return i.subarray(i.length);for(var r=0;r<i.length;){if(bytesMatch(i.subarray(r,r+n.length),n)){var e=(i[r-4]<<24|i[r-3]<<16|i[r-2]<<8|i[r-1])>>>0,t=e>1?r+e:i.byteLength;return i.subarray(r+4,t)}r++}return i.subarray(i.length)},qn=function(i,n,r){n===void 0&&(n=4),r===void 0&&(r=function(u){return bytesToNumber(u)});var e=[];if(!i||!i.length)return e;for(var t=bytesToNumber(i.subarray(4,8)),a=8;t;a+=n,t--)e.push(r(i.subarray(a,a+n)));return e},Hf=function(i,n){for(var r=qn(fi(i,["stss"])[0]),e=qn(fi(i,["stco"])[0]),t=qn(fi(i,["stts"])[0],8,function(se){return{sampleCount:bytesToNumber(se.subarray(0,4)),sampleDelta:bytesToNumber(se.subarray(4,8))}}),a=qn(fi(i,["stsc"])[0],12,function(se){return{firstChunk:bytesToNumber(se.subarray(0,4)),samplesPerChunk:bytesToNumber(se.subarray(4,8)),sampleDescriptionIndex:bytesToNumber(se.subarray(8,12))}}),o=fi(i,["stsz"])[0],u=qn(o&&o.length&&o.subarray(4)||null),l=[],c=0;c<e.length;c++){for(var g=void 0,m=0;m<a.length;m++){var T=a[m],E=c+1>=T.firstChunk&&(m+1>=a.length||c+1<a[m+1].firstChunk);if(E){g=T.samplesPerChunk;break}}for(var C=e[c],P=0;P<g;P++){var H=u[l.length],ie=!r.length;r.length&&r.indexOf(l.length+1)!==-1&&(ie=!0);for(var be={keyframe:ie,start:C,end:C+H},G=0;G<t.length;G++){var q=t[G],ue=q.sampleCount,$=q.sampleDelta;if(l.length<=ue){var X=l.length?l[l.length-1].timestamp:0;be.timestamp=X+$/n*1e3,be.duration=$;break}}l.push(be),C+=H}}return l},jf=function(i,n){var r=bytesToString(n.subarray(0,4));if(i.type==="video"?(i.info=i.info||{},i.info.width=n[28]<<8|n[29],i.info.height=n[30]<<8|n[31]):i.type==="audio"&&(i.info=i.info||{},i.info.channels=n[20]<<8|n[21],i.info.bitDepth=n[22]<<8|n[23],i.info.sampleRate=n[28]<<8|n[29]),r==="avc1"){var e=sn(n,"avcC");r+="."+getAvcCodec(e),i.info.avcC=e}else if(r==="hvc1"||r==="hev1")r+="."+getHvcCodec(sn(n,"hvcC"));else if(r==="mp4a"||r==="mp4v"){var t=sn(n,"esds"),a=fo(t.subarray(4))[0],o=a&&a.descriptors.filter(function(ie){var be=ie.tag;return be===4})[0];o?(r+="."+toHexString(o.oti),o.oti===64?r+="."+(o.descriptors[0].bytes[0]>>3).toString():o.oti===32?r+="."+o.descriptors[0].bytes[4].toString():o.oti===221&&(r="vorbis")):i.type==="audio"?r+=".40.2":r+=".20.9"}else if(r==="av01")r+="."+getAv1Codec(sn(n,"av1C"));else if(r==="vp09"){var u=sn(n,"vpcC"),l=u[0],c=u[1],g=u[2]>>4,m=(u[2]&15)>>1,T=(u[2]&15)>>3,E=u[3],C=u[4],P=u[5];r+="."+padStart(l,2,"0"),r+="."+padStart(c,2,"0"),r+="."+padStart(g,2,"0"),r+="."+padStart(m,2,"0"),r+="."+padStart(E,2,"0"),r+="."+padStart(C,2,"0"),r+="."+padStart(P,2,"0"),r+="."+padStart(T,2,"0")}else if(r==="theo")r="theora";else if(r==="spex")r="speex";else if(r===".mp3")r="mp4a.40.34";else if(r==="msVo")r="vorbis";else if(r==="Opus"){r="opus";var H=sn(n,"dOps");i.info.opus=parseOpusHead(H),i.info.codecDelay=65e5}else r=r.toLowerCase();i.codec=r},j0=function(i,n){n===void 0&&(n=!0),i=toUint8(i);var r=fi(i,["moov","trak"],!0),e=[];return r.forEach(function(t){var a={bytes:t},o=fi(t,["mdia"])[0],u=fi(o,["hdlr"])[0],l=bytesToString(u.subarray(8,12));l==="soun"?a.type="audio":l==="vide"?a.type="video":a.type=l;var c=fi(t,["tkhd"])[0];if(c){var g=new DataView(c.buffer,c.byteOffset,c.byteLength),m=g.getUint8(0);a.number=m===0?g.getUint32(12):g.getUint32(20)}var T=fi(o,["mdhd"])[0];if(T){var E=T[0],C=E===0?12:20;a.timescale=(T[C]<<24|T[C+1]<<16|T[C+2]<<8|T[C+3])>>>0}for(var P=fi(o,["minf","stbl"])[0],H=fi(P,["stsd"])[0],ie=bytesToNumber(H.subarray(4,8)),be=8;ie--;){var G=bytesToNumber(H.subarray(be,be+4)),q=H.subarray(be+4,be+4+G);jf(a,q),be+=4+G}n&&(a.frameTable=Hf(P,a.timescale)),e.push(a)}),e},W0=function(i){var n=fi(i,["moov","mvhd"],!0)[0];if(!(!n||!n.length)){var r={};return n[0]===1?(r.timestampScale=bytesToNumber(n.subarray(20,24)),r.duration=bytesToNumber(n.subarray(24,32))):(r.timestampScale=bytesToNumber(n.subarray(12,16)),r.duration=bytesToNumber(n.subarray(16,20))),r.bytes=n,r}},gt={EBML:Me([26,69,223,163]),DocType:Me([66,130]),Segment:Me([24,83,128,103]),SegmentInfo:Me([21,73,169,102]),Tracks:Me([22,84,174,107]),Track:Me([174]),TrackNumber:Me([215]),DefaultDuration:Me([35,227,131]),TrackEntry:Me([174]),TrackType:Me([131]),FlagDefault:Me([136]),CodecID:Me([134]),CodecPrivate:Me([99,162]),VideoTrack:Me([224]),AudioTrack:Me([225]),Cluster:Me([31,67,182,117]),Timestamp:Me([231]),TimestampScale:Me([42,215,177]),BlockGroup:Me([160]),BlockDuration:Me([155]),Block:Me([161]),SimpleBlock:Me([163])},ho=[128,64,32,16,8,4,2,1],Wf=function(i){for(var n=1,r=0;r<ho.length&&!(i&ho[r]);r++)n++;return n},Rr=function(i,n,r,e){r===void 0&&(r=!0),e===void 0&&(e=!1);var t=Wf(i[n]),a=i.subarray(n,n+t);return r&&(a=Array.prototype.slice.call(i,n,n+t),a[0]^=ho[t-1]),{length:t,value:Ii(a,{signed:e}),bytes:a}},tl=function s(i){return typeof i=="string"?i.match(/.{1,2}/g).map(function(n){return s(n)}):typeof i=="number"?er(i):i},Gf=function(i){return Array.isArray(i)?i.map(function(n){return tl(n)}):[tl(i)]},qf=function s(i,n,r){if(r>=n.length)return n.length;var e=Rr(n,r,!1);if(nt(i.bytes,e.bytes))return r;var t=Rr(n,r+e.length);return s(i,n,r+t.length+t.value+e.length)},At=function s(i,n){n=Gf(n),i=Me(i);var r=[];if(!n.length)return r;for(var e=0;e<i.length;){var t=Rr(i,e,!1),a=Rr(i,e+t.length),o=e+t.length+a.length;a.value===127&&(a.value=qf(t,i,o),a.value!==i.length&&(a.value-=o));var u=o+a.value>i.length?i.length:o+a.value,l=i.subarray(o,u);nt(n[0],t.bytes)&&(n.length===1?r.push(l):r=r.concat(s(l,n.slice(1))));var c=t.length+a.length+l.length;e+=c}return r},zf=function(i,n,r,e){var t;n==="group"&&(t=At(i,[gt.BlockDuration])[0],t&&(t=bytesToNumber(t),t=1/r*t*r/1e3),i=At(i,[gt.Block])[0],n="block");var a=new DataView(i.buffer,i.byteOffset,i.byteLength),o=Rr(i,0),u=a.getInt16(o.length,!1),l=i[o.length+2],c=i.subarray(o.length+3),g=1/r*(e+u)*r/1e3,m={duration:t,trackNumber:o.value,keyframe:n==="simple"&&l>>7===1,invisible:(l&8)>>3===1,lacing:(l&6)>>1,discardable:n==="simple"&&(l&1)===1,frames:[],pts:g,dts:g,timestamp:u};if(!m.lacing)return m.frames.push(c),m;var T=c[0]+1,E=[],C=1;if(m.lacing===2)for(var P=(c.length-C)/T,H=0;H<T;H++)E.push(P);if(m.lacing===1)for(var ie=0;ie<T-1;ie++){var be=0;do be+=c[C],C++;while(c[C-1]===255);E.push(be)}if(m.lacing===3)for(var G=0,q=0;q<T-1;q++){var ue=q===0?Rr(c,C):Rr(c,C,!0,!0);G+=ue.value,E.push(G),C+=ue.length}return E.forEach(function($){m.frames.push(c.subarray(C,C+$)),C+=$}),m},Kf=function(i){for(var n=0,r={};n<i.length;){var e=i[n]&127,t=i[n+1],a=void 0;t===1?a=i[n+2]:a=i.subarray(n+2,n+2+t),e===1?r.profile=a:e===2?r.level=a:e===3?r.bitDepth=a:e===4?r.chromaSubsampling=a:r[e]=a,n+=2+t}return r},Xf=function(i){i=toUint8(i);var n=[],r=At(i,[gt.Segment,gt.Tracks,gt.Track]);return r.length||(r=At(i,[gt.Tracks,gt.Track])),r.length||(r=At(i,[gt.Track])),r.length?(r.forEach(function(e){var t=At(e,gt.TrackType)[0];if(!(!t||!t.length)){if(t[0]===1)t="video";else if(t[0]===2)t="audio";else if(t[0]===17)t="subtitle";else return;var a={rawCodec:bytesToString(At(e,[gt.CodecID])[0]),type:t,codecPrivate:At(e,[gt.CodecPrivate])[0],number:bytesToNumber(At(e,[gt.TrackNumber])[0]),defaultDuration:bytesToNumber(At(e,[gt.DefaultDuration])[0]),default:At(e,[gt.FlagDefault])[0],rawData:e},o="";if(/V_MPEG4\/ISO\/AVC/.test(a.rawCodec))o="avc1."+getAvcCodec(a.codecPrivate);else if(/V_MPEGH\/ISO\/HEVC/.test(a.rawCodec))o="hev1."+getHvcCodec(a.codecPrivate);else if(/V_MPEG4\/ISO\/ASP/.test(a.rawCodec))a.codecPrivate?o="mp4v.20."+a.codecPrivate[4].toString():o="mp4v.20.9";else if(/^V_THEORA/.test(a.rawCodec))o="theora";else if(/^V_VP8/.test(a.rawCodec))o="vp8";else if(/^V_VP9/.test(a.rawCodec))if(a.codecPrivate){var u=Kf(a.codecPrivate),l=u.profile,c=u.level,g=u.bitDepth,m=u.chromaSubsampling;o="vp09.",o+=padStart(l,2,"0")+".",o+=padStart(c,2,"0")+".",o+=padStart(g,2,"0")+".",o+=""+padStart(m,2,"0");var T=At(e,[224,[85,176],[85,177]])[0]||[],E=At(e,[224,[85,176],[85,185]])[0]||[],C=At(e,[224,[85,176],[85,186]])[0]||[],P=At(e,[224,[85,176],[85,187]])[0]||[];(T.length||E.length||C.length||P.length)&&(o+="."+padStart(P[0],2,"0"),o+="."+padStart(C[0],2,"0"),o+="."+padStart(T[0],2,"0"),o+="."+padStart(E[0],2,"0"))}else o="vp9";else/^V_AV1/.test(a.rawCodec)?o="av01."+getAv1Codec(a.codecPrivate):/A_ALAC/.test(a.rawCodec)?o="alac":/A_MPEG\/L2/.test(a.rawCodec)?o="mp2":/A_MPEG\/L3/.test(a.rawCodec)?o="mp3":/^A_AAC/.test(a.rawCodec)?a.codecPrivate?o="mp4a.40."+(a.codecPrivate[0]>>>3).toString():o="mp4a.40.2":/^A_AC3/.test(a.rawCodec)?o="ac-3":/^A_PCM/.test(a.rawCodec)?o="pcm":/^A_MS\/ACM/.test(a.rawCodec)?o="speex":/^A_EAC3/.test(a.rawCodec)?o="ec-3":/^A_VORBIS/.test(a.rawCodec)?o="vorbis":/^A_FLAC/.test(a.rawCodec)?o="flac":/^A_OPUS/.test(a.rawCodec)&&(o="opus");a.codec=o,n.push(a)}}),n.sort(function(e,t){return e.number-t.number})):n},G0=function(i,n){var r=[],e=At(i,[gt.Segment])[0],t=At(e,[gt.SegmentInfo,gt.TimestampScale])[0];t&&t.length?t=bytesToNumber(t):t=1e6;var a=At(e,[gt.Cluster]);return n||(n=Xf(e)),a.forEach(function(o,u){var l=At(o,[gt.SimpleBlock]).map(function(T){return{type:"simple",data:T}}),c=At(o,[gt.BlockGroup]).map(function(T){return{type:"group",data:T}}),g=At(o,[gt.Timestamp])[0]||0;g&&g.length&&(g=bytesToNumber(g));var m=l.concat(c).sort(function(T,E){return T.data.byteOffset-E.data.byteOffset});m.forEach(function(T,E){var C=zf(T.data,T.type,t,g);r.push(C)})}),{tracks:n,blocks:r}},$f=Me([0,0,0,1]),Yf=Me([0,0,1]),Qf=Me([0,0,3]),Zf=function(i){for(var n=[],r=1;r<i.length-2;)nt(i.subarray(r,r+3),Qf)&&(n.push(r+2),r++),r++;if(n.length===0)return i;var e=i.length-n.length,t=new Uint8Array(e),a=0;for(r=0;r<e;a++,r++)a===n[0]&&(a++,n.shift()),t[r]=i[a];return t},il=function(i,n,r,e){e===void 0&&(e=1/0),i=Me(i),r=[].concat(r);for(var t=0,a,o=0;t<i.length&&(o<e||a);){var u=void 0;if(nt(i.subarray(t),$f)?u=4:nt(i.subarray(t),Yf)&&(u=3),!u){t++;continue}if(o++,a)return Zf(i.subarray(a,t));var l=void 0;n==="h264"?l=i[t+u]&31:n==="h265"&&(l=i[t+u]>>1&63),r.indexOf(l)!==-1&&(a=t+u),t+=u+(n==="h264"?1:2)}return i.subarray(0,0)},Jf=function(i,n,r){return il(i,"h264",n,r)},eh=function(i,n,r){return il(i,"h265",n,r)},ii={webm:Me([119,101,98,109]),matroska:Me([109,97,116,114,111,115,107,97]),flac:Me([102,76,97,67]),ogg:Me([79,103,103,83]),ac3:Me([11,119]),riff:Me([82,73,70,70]),avi:Me([65,86,73]),wav:Me([87,65,86,69]),"3gp":Me([102,116,121,112,51,103]),mp4:Me([102,116,121,112]),fmp4:Me([115,116,121,112]),mov:Me([102,116,121,112,113,116]),moov:Me([109,111,111,118]),moof:Me([109,111,111,102])},on={aac:function(i){var n=kt(i);return nt(i,[255,16],{offset:n,mask:[255,22]})},mp3:function(i){var n=kt(i);return nt(i,[255,2],{offset:n,mask:[255,6]})},webm:function(i){var n=At(i,[gt.EBML,gt.DocType])[0];return nt(n,ii.webm)},mkv:function(i){var n=At(i,[gt.EBML,gt.DocType])[0];return nt(n,ii.matroska)},mp4:function(i){if(on["3gp"](i)||on.mov(i))return!1;if(nt(i,ii.mp4,{offset:4})||nt(i,ii.fmp4,{offset:4})||nt(i,ii.moof,{offset:4})||nt(i,ii.moov,{offset:4}))return!0},mov:function(i){return nt(i,ii.mov,{offset:4})},"3gp":function(i){return nt(i,ii["3gp"],{offset:4})},ac3:function(i){var n=kt(i);return nt(i,ii.ac3,{offset:n})},ts:function(i){if(i.length<189&&i.length>=1)return i[0]===71;for(var n=0;n+188<i.length&&n<188;){if(i[n]===71&&i[n+188]===71)return!0;n+=1}return!1},flac:function(i){var n=kt(i);return nt(i,ii.flac,{offset:n})},ogg:function(i){return nt(i,ii.ogg)},avi:function(i){return nt(i,ii.riff)&&nt(i,ii.avi,{offset:8})},wav:function(i){return nt(i,ii.riff)&&nt(i,ii.wav,{offset:8})},h264:function(i){return Jf(i,7,3).length},h265:function(i){return eh(i,[32,33],3).length}},po=Object.keys(on).filter(function(s){return s!=="ts"&&s!=="h264"&&s!=="h265"}).concat(["ts","h264","h265"]);po.forEach(function(s){var i=on[s];on[s]=function(n){return i(Me(n))}});var th=on,mo=function(i){i=Me(i);for(var n=0;n<po.length;n++){var r=po[n];if(th[r](i))return r}return""},ih=function(i){return fi(i,["moof"]).length>0},ka=R(72852);for(var rl="7.20.3",rr={},Sr=function(i,n){return rr[i]=rr[i]||[],n&&(rr[i]=rr[i].concat(n)),rr[i]},rh=function(i,n){Sr(i,n)},nl=function(i,n){var r=Sr(i).indexOf(n);return r<=-1?!1:(rr[i]=rr[i].slice(),rr[i].splice(r,1),!0)},nh=function(i,n){Sr(i,[].concat(n).map(function(r){var e=function t(){return nl(i,t),r.apply(void 0,arguments)};return e}))},Da={prefixed:!0},Oa=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],al=Oa[0],zn,La=0;La<Oa.length;La++)if(Oa[La][1]in N()){zn=Oa[La];break}if(zn){for(var Ma=0;Ma<zn.length;Ma++)Da[al[Ma]]=zn[Ma];Da.prefixed=zn[0]!==al[0]}var hi=[],ah=function(i,n){return function(r,e,t){var a=n.levels[e],o=new RegExp("^("+a+")$");if(r!=="log"&&t.unshift(r.toUpperCase()+":"),t.unshift(i+":"),hi){hi.push([].concat(t));var u=hi.length-1e3;hi.splice(0,u>0?u:0)}if(!!x().console){var l=x().console[r];!l&&r==="debug"&&(l=x().console.info||x().console.log),!(!l||!a||!o.test(r))&&l[Array.isArray(t)?"apply":"call"](x().console,t)}}};function sl(s){var i="info",n,r=function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];n("log",i,a)};return n=ah(s,r),r.createLogger=function(e){return sl(s+": "+e)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=function(e){if(typeof e=="string"){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},r.history=function(){return hi?[].concat(hi):[]},r.history.filter=function(e){return(hi||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},r.history.clear=function(){hi&&(hi.length=0)},r.history.disable=function(){hi!==null&&(hi.length=0,hi=null)},r.history.enable=function(){hi===null&&(hi=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n("error",i,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n("warn",i,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n("debug",i,t)},r}var $e=sl("VIDEOJS"),ol=$e.createLogger,sh=Object.prototype.toString,ul=function(i){return nr(i)?Object.keys(i):[]};function un(s,i){ul(s).forEach(function(n){return i(s[n],n)})}function oh(s,i,n){return n===void 0&&(n=0),ul(s).reduce(function(r,e){return i(r,s[e],e)},n)}function It(s){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return Object.assign?Q.Z.apply(void 0,[s].concat(n)):(n.forEach(function(e){!e||un(e,function(t,a){s[a]=t})}),s)}function nr(s){return!!s&&typeof s=="object"}function Kn(s){return nr(s)&&sh.call(s)==="[object Object]"&&s.constructor===Object}function Xn(s,i){if(!s||!i)return"";if(typeof x().getComputedStyle=="function"){var n;try{n=x().getComputedStyle(s)}catch(r){return""}return n?n.getPropertyValue(i)||n[i]:""}return""}var Ht=x().navigator&&x().navigator.userAgent||"",ll=/AppleWebKit\/([\d.]+)/i.exec(Ht),uh=ll?parseFloat(ll.pop()):null,dl=/iPod/i.test(Ht),lh=function(){var s=Ht.match(/OS (\d+)_/i);return s&&s[1]?s[1]:null}(),ar=/Android/i.test(Ht),go=function(){var s=Ht.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!s)return null;var i=s[1]&&parseFloat(s[1]),n=s[2]&&parseFloat(s[2]);return i&&n?parseFloat(s[1]+"."+s[2]):i||null}(),cl=ar&&go<5&&uh<537,fl=/Firefox/i.test(Ht),$n=/Edg/i.test(Ht),sr=!$n&&(/Chrome/i.test(Ht)||/CriOS/i.test(Ht)),hl=function(){var s=Ht.match(/(Chrome|CriOS)\/(\d+)/);return s&&s[2]?parseFloat(s[2]):null}(),Yn=function(){var s=/MSIE\s(\d+)\.\d/.exec(Ht),i=s&&parseFloat(s[1]);return!i&&/Trident\/7.0/i.test(Ht)&&/rv:11.0/.test(Ht)&&(i=11),i}(),vo=/Safari/i.test(Ht)&&!sr&&!ar&&!$n,pl=/Windows/i.test(Ht),ln=Boolean(dn()&&("ontouchstart"in x()||x().navigator.maxTouchPoints||x().DocumentTouch&&x().document instanceof x().DocumentTouch)),_o=/iPad/i.test(Ht)||vo&&ln&&!/iPhone/i.test(Ht),yo=/iPhone/i.test(Ht)&&!_o,ri=yo||_o||dl,Ra=(vo||ri)&&!sr,dh=Object.freeze({__proto__:null,IS_IPOD:dl,IOS_VERSION:lh,IS_ANDROID:ar,ANDROID_VERSION:go,IS_NATIVE_ANDROID:cl,IS_FIREFOX:fl,IS_EDGE:$n,IS_CHROME:sr,CHROME_VERSION:hl,IE_VERSION:Yn,IS_SAFARI:vo,IS_WINDOWS:pl,TOUCH_ENABLED:ln,IS_IPAD:_o,IS_IPHONE:yo,IS_IOS:ri,IS_ANY_SAFARI:Ra});function ml(s){return typeof s=="string"&&Boolean(s.trim())}function gl(s){if(s.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function ch(s){return new RegExp("(^|\\s)"+s+"($|\\s)")}function dn(){return N()===x().document}function cn(s){return nr(s)&&s.nodeType===1}function vl(){try{return x().parent!==x().self}catch(s){return!0}}function _l(s){return function(i,n){if(!ml(i))return N()[s](null);ml(n)&&(n=N().querySelector(n));var r=cn(n)?n:N();return r[s]&&r[s](i)}}function Je(s,i,n,r){s===void 0&&(s="div"),i===void 0&&(i={}),n===void 0&&(n={});var e=N().createElement(s);return Object.getOwnPropertyNames(i).forEach(function(t){var a=i[t];t.indexOf("aria-")!==-1||t==="role"||t==="type"?($e.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+t+" to "+a+".")),e.setAttribute(t,a)):t==="textContent"?Nr(e,a):(e[t]!==a||t==="tabIndex")&&(e[t]=a)}),Object.getOwnPropertyNames(n).forEach(function(t){e.setAttribute(t,n[t])}),r&&xo(e,r),e}function Nr(s,i){return typeof s.textContent=="undefined"?s.innerText=i:s.textContent=i,s}function To(s,i){i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s)}function Fr(s,i){return gl(i),s.classList?s.classList.contains(i):ch(i).test(s.className)}function or(s,i){return s.classList?s.classList.add(i):Fr(s,i)||(s.className=(s.className+" "+i).trim()),s}function Qn(s,i){return s?(s.classList?s.classList.remove(i):(gl(i),s.className=s.className.split(/\s+/).filter(function(n){return n!==i}).join(" ")),s):($e.warn("removeClass was called with an element that doesn't exist"),null)}function yl(s,i,n){var r=Fr(s,i);if(typeof n=="function"&&(n=n(s,i)),typeof n!="boolean"&&(n=!r),n!==r)return n?or(s,i):Qn(s,i),s}function Tl(s,i){Object.getOwnPropertyNames(i).forEach(function(n){var r=i[n];r===null||typeof r=="undefined"||r===!1?s.removeAttribute(n):s.setAttribute(n,r===!0?"":r)})}function ur(s){var i={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(s&&s.attributes&&s.attributes.length>0)for(var r=s.attributes,e=r.length-1;e>=0;e--){var t=r[e].name,a=r[e].value;(typeof s[t]=="boolean"||n.indexOf(","+t+",")!==-1)&&(a=a!==null),i[t]=a}return i}function bl(s,i){return s.getAttribute(i)}function fn(s,i,n){s.setAttribute(i,n)}function Na(s,i){s.removeAttribute(i)}function xl(){N().body.focus(),N().onselectstart=function(){return!1}}function Sl(){N().onselectstart=function(){return!0}}function hn(s){if(s&&s.getBoundingClientRect&&s.parentNode){var i=s.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(r){i[r]!==void 0&&(n[r]=i[r])}),n.height||(n.height=parseFloat(Xn(s,"height"))),n.width||(n.width=parseFloat(Xn(s,"width"))),n}}function Zn(s){if(!s||s&&!s.offsetParent)return{left:0,top:0,width:0,height:0};for(var i=s.offsetWidth,n=s.offsetHeight,r=0,e=0;s.offsetParent&&s!==N()[Da.fullscreenElement];)r+=s.offsetLeft,e+=s.offsetTop,s=s.offsetParent;return{left:r,top:e,width:i,height:n}}function Fa(s,i){var n={x:0,y:0};if(ri)for(var r=s;r&&r.nodeName.toLowerCase()!=="html";){var e=Xn(r,"transform");if(/^matrix/.test(e)){var t=e.slice(7,-1).split(/,\s/).map(Number);n.x+=t[4],n.y+=t[5]}else if(/^matrix3d/.test(e)){var a=e.slice(9,-1).split(/,\s/).map(Number);n.x+=a[12],n.y+=a[13]}r=r.parentNode}var o={},u=Zn(i.target),l=Zn(s),c=l.width,g=l.height,m=i.offsetY-(l.top-u.top),T=i.offsetX-(l.left-u.left);return i.changedTouches&&(T=i.changedTouches[0].pageX-l.left,m=i.changedTouches[0].pageY+l.top,ri&&(T-=n.x,m-=n.y)),o.y=1-Math.max(0,Math.min(1,m/g)),o.x=Math.max(0,Math.min(1,T/c)),o}function El(s){return nr(s)&&s.nodeType===3}function bo(s){for(;s.firstChild;)s.removeChild(s.firstChild);return s}function Cl(s){return typeof s=="function"&&(s=s()),(Array.isArray(s)?s:[s]).map(function(i){if(typeof i=="function"&&(i=i()),cn(i)||El(i))return i;if(typeof i=="string"&&/\S/.test(i))return N().createTextNode(i)}).filter(function(i){return i})}function xo(s,i){return Cl(i).forEach(function(n){return s.appendChild(n)}),s}function wl(s,i){return xo(bo(s),i)}function Jn(s){return s.button===void 0&&s.buttons===void 0||s.button===0&&s.buttons===void 0||s.type==="mouseup"&&s.button===0&&s.buttons===0?!0:!(s.button!==0||s.buttons!==1)}var Er=_l("querySelector"),Al=_l("querySelectorAll"),Pl=Object.freeze({__proto__:null,isReal:dn,isEl:cn,isInFrame:vl,createEl:Je,textContent:Nr,prependTo:To,hasClass:Fr,addClass:or,removeClass:Qn,toggleClass:yl,setAttributes:Tl,getAttributes:ur,getAttribute:bl,setAttribute:fn,removeAttribute:Na,blockTextSelection:xl,unblockTextSelection:Sl,getBoundingClientRect:hn,findPosition:Zn,getPointerPosition:Fa,isTextNode:El,emptyEl:bo,normalizeContent:Cl,appendContent:xo,insertContent:wl,isSingleLeftClick:Jn,$:Er,$$:Al}),Il=!1,So,fh=function(){if(So.options.autoSetup!==!1){var i=Array.prototype.slice.call(N().getElementsByTagName("video")),n=Array.prototype.slice.call(N().getElementsByTagName("audio")),r=Array.prototype.slice.call(N().getElementsByTagName("video-js")),e=i.concat(n,r);if(e&&e.length>0)for(var t=0,a=e.length;t<a;t++){var o=e[t];if(o&&o.getAttribute){if(o.player===void 0){var u=o.getAttribute("data-setup");u!==null&&So(o)}}else{Eo(1);break}}else Il||Eo(1)}};function Eo(s,i){!dn()||(i&&(So=i),x().setTimeout(fh,s))}function Co(){Il=!0,x().removeEventListener("load",Co)}dn()&&(N().readyState==="complete"?Co():x().addEventListener("load",Co));var kl=function(i){var n=N().createElement("style");return n.className=i,n},Dl=function(i,n){i.styleSheet?i.styleSheet.cssText=n:i.textContent=n},hh=3,ph=hh;function lr(){return ph++}var Ol;x().WeakMap||(Ol=function(){function s(){this.vdata="vdata"+Math.floor(x().performance&&x().performance.now()||Date.now()),this.data={}}var i=s.prototype;return i.set=function(r,e){var t=r[this.vdata]||lr();return r[this.vdata]||(r[this.vdata]=t),this.data[t]=e,this},i.get=function(r){var e=r[this.vdata];if(e)return this.data[e];$e("We have no data for this element",r)},i.has=function(r){var e=r[this.vdata];return e in this.data},i.delete=function(r){var e=r[this.vdata];e&&(delete this.data[e],delete r[this.vdata])},s}());var ni=x().WeakMap?new WeakMap:new Ol;function Ll(s,i){if(!!ni.has(s)){var n=ni.get(s);n.handlers[i].length===0&&(delete n.handlers[i],s.removeEventListener?s.removeEventListener(i,n.dispatcher,!1):s.detachEvent&&s.detachEvent("on"+i,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&ni.delete(s)}}function wo(s,i,n,r){n.forEach(function(e){s(i,e,r)})}function Ua(s){if(s.fixed_)return s;function i(){return!0}function n(){return!1}if(!s||!s.isPropagationStopped||!s.isImmediatePropagationStopped){var r=s||x().event;s={};for(var e in r)e!=="layerX"&&e!=="layerY"&&e!=="keyLocation"&&e!=="webkitMovementX"&&e!=="webkitMovementY"&&e!=="path"&&(e==="returnValue"&&r.preventDefault||(s[e]=r[e]));if(s.target||(s.target=s.srcElement||N()),s.relatedTarget||(s.relatedTarget=s.fromElement===s.target?s.toElement:s.fromElement),s.preventDefault=function(){r.preventDefault&&r.preventDefault(),s.returnValue=!1,r.returnValue=!1,s.defaultPrevented=!0},s.defaultPrevented=!1,s.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),s.cancelBubble=!0,r.cancelBubble=!0,s.isPropagationStopped=i},s.isPropagationStopped=n,s.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),s.isImmediatePropagationStopped=i,s.stopPropagation()},s.isImmediatePropagationStopped=n,s.clientX!==null&&s.clientX!==void 0){var t=N().documentElement,a=N().body;s.pageX=s.clientX+(t&&t.scrollLeft||a&&a.scrollLeft||0)-(t&&t.clientLeft||a&&a.clientLeft||0),s.pageY=s.clientY+(t&&t.scrollTop||a&&a.scrollTop||0)-(t&&t.clientTop||a&&a.clientTop||0)}s.which=s.charCode||s.keyCode,s.button!==null&&s.button!==void 0&&(s.button=s.button&1?0:s.button&4?1:s.button&2?2:0)}return s.fixed_=!0,s}var Ba,mh=function(){if(typeof Ba!="boolean"){Ba=!1;try{var i=Object.defineProperty({},"passive",{get:function(){Ba=!0}});x().addEventListener("test",null,i),x().removeEventListener("test",null,i)}catch(n){}}return Ba},gh=["touchstart","touchmove"];function vi(s,i,n){if(Array.isArray(i))return wo(vi,s,i,n);ni.has(s)||ni.set(s,{});var r=ni.get(s);if(r.handlers||(r.handlers={}),r.handlers[i]||(r.handlers[i]=[]),n.guid||(n.guid=lr()),r.handlers[i].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,a){if(!r.disabled){t=Ua(t);var o=r.handlers[t.type];if(o)for(var u=o.slice(0),l=0,c=u.length;l<c&&!t.isImmediatePropagationStopped();l++)try{u[l].call(s,t,a)}catch(g){$e.error(g)}}}),r.handlers[i].length===1)if(s.addEventListener){var e=!1;mh()&&gh.indexOf(i)>-1&&(e={passive:!0}),s.addEventListener(i,r.dispatcher,e)}else s.attachEvent&&s.attachEvent("on"+i,r.dispatcher)}function Yt(s,i,n){if(!!ni.has(s)){var r=ni.get(s);if(!!r.handlers){if(Array.isArray(i))return wo(Yt,s,i,n);var e=function(l,c){r.handlers[c]=[],Ll(l,c)};if(i===void 0){for(var t in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},t)&&e(s,t);return}var a=r.handlers[i];if(!!a){if(!n){e(s,i);return}if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);Ll(s,i)}}}}function pn(s,i,n){var r=ni.has(s)?ni.get(s):{},e=s.parentNode||s.ownerDocument;if(typeof i=="string"?i={type:i,target:s}:i.target||(i.target=s),i=Ua(i),r.dispatcher&&r.dispatcher.call(s,i,n),e&&!i.isPropagationStopped()&&i.bubbles===!0)pn.call(null,e,i,n);else if(!e&&!i.defaultPrevented&&i.target&&i.target[i.type]){ni.has(i.target)||ni.set(i.target,{});var t=ni.get(i.target);i.target[i.type]&&(t.disabled=!0,typeof i.target[i.type]=="function"&&i.target[i.type](),t.disabled=!1)}return!i.defaultPrevented}function Va(s,i,n){if(Array.isArray(i))return wo(Va,s,i,n);var r=function e(){Yt(s,i,e),n.apply(this,arguments)};r.guid=n.guid=n.guid||lr(),vi(s,i,r)}function Ml(s,i,n){var r=function e(){Yt(s,i,e),n.apply(this,arguments)};r.guid=n.guid=n.guid||lr(),vi(s,i,r)}var vh=Object.freeze({__proto__:null,fixEvent:Ua,on:vi,off:Yt,trigger:pn,one:Va,any:Ml}),Mi=30,vt=function(i,n,r){n.guid||(n.guid=lr());var e=n.bind(i);return e.guid=r?r+"_"+n.guid:n.guid,e},dr=function(i,n){var r=x().performance.now(),e=function(){var a=x().performance.now();a-r>=n&&(i.apply(void 0,arguments),r=a)};return e},_h=function(i,n,r,e){e===void 0&&(e=x());var t,a=function(){e.clearTimeout(t),t=null},o=function(){var l=this,c=arguments,g=function(){t=null,g=null,r||i.apply(l,c)};!t&&r&&i.apply(l,c),e.clearTimeout(t),t=e.setTimeout(g,n)};return o.cancel=a,o},jt=function(){};jt.prototype.allowedEvents_={},jt.prototype.on=function(s,i){var n=this.addEventListener;this.addEventListener=function(){},vi(this,s,i),this.addEventListener=n},jt.prototype.addEventListener=jt.prototype.on,jt.prototype.off=function(s,i){Yt(this,s,i)},jt.prototype.removeEventListener=jt.prototype.off,jt.prototype.one=function(s,i){var n=this.addEventListener;this.addEventListener=function(){},Va(this,s,i),this.addEventListener=n},jt.prototype.any=function(s,i){var n=this.addEventListener;this.addEventListener=function(){},Ml(this,s,i),this.addEventListener=n},jt.prototype.trigger=function(s){var i=s.type||s;typeof s=="string"&&(s={type:i}),s=Ua(s),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](s),pn(this,s)},jt.prototype.dispatchEvent=jt.prototype.trigger;var ea;jt.prototype.queueTrigger=function(s){var i=this;ea||(ea=new Map);var n=s.type||s,r=ea.get(this);r||(r=new Map,ea.set(this,r));var e=r.get(n);r.delete(n),x().clearTimeout(e);var t=x().setTimeout(function(){r.size===0&&(r=null,ea.delete(i)),i.trigger(s)},0);r.set(n,t)};var Ha=function(i){return typeof i.name=="function"?i.name():typeof i.name=="string"?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i},cr=function(i){return i instanceof jt||!!i.eventBusEl_&&["on","one","off","trigger"].every(function(n){return typeof i[n]=="function"})},yh=function(i,n){cr(i)?n():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(n))},Ao=function(i){return typeof i=="string"&&/\S/.test(i)||Array.isArray(i)&&!!i.length},ja=function(i,n,r){if(!i||!i.nodeName&&!cr(i))throw new Error("Invalid target for "+Ha(n)+"#"+r+"; must be a DOM node or evented object.")},Rl=function(i,n,r){if(!Ao(i))throw new Error("Invalid event type for "+Ha(n)+"#"+r+"; must be a non-empty string or array.")},Nl=function(i,n,r){if(typeof i!="function")throw new Error("Invalid listener for "+Ha(n)+"#"+r+"; must be a function.")},Po=function(i,n,r){var e=n.length<3||n[0]===i||n[0]===i.eventBusEl_,t,a,o;return e?(t=i.eventBusEl_,n.length>=3&&n.shift(),a=n[0],o=n[1]):(t=n[0],a=n[1],o=n[2]),ja(t,i,r),Rl(a,i,r),Nl(o,i,r),o=vt(i,o),{isTargetingSelf:e,target:t,type:a,listener:o}},Ur=function(i,n,r,e){ja(i,i,n),i.nodeName?vh[n](i,r,e):i[n](r,e)},Th={on:function(){for(var i=this,n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t=Po(this,r,"on"),a=t.isTargetingSelf,o=t.target,u=t.type,l=t.listener;if(Ur(o,"on",u,l),!a){var c=function(){return i.off(o,u,l)};c.guid=l.guid;var g=function(){return i.off("dispose",c)};g.guid=l.guid,Ur(this,"on","dispose",c),Ur(o,"on","dispose",g)}},one:function(){for(var i=this,n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t=Po(this,r,"one"),a=t.isTargetingSelf,o=t.target,u=t.type,l=t.listener;if(a)Ur(o,"one",u,l);else{var c=function g(){i.off(o,u,g);for(var m=arguments.length,T=new Array(m),E=0;E<m;E++)T[E]=arguments[E];l.apply(null,T)};c.guid=l.guid,Ur(o,"one",u,c)}},any:function(){for(var i=this,n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t=Po(this,r,"any"),a=t.isTargetingSelf,o=t.target,u=t.type,l=t.listener;if(a)Ur(o,"any",u,l);else{var c=function g(){i.off(o,u,g);for(var m=arguments.length,T=new Array(m),E=0;E<m;E++)T[E]=arguments[E];l.apply(null,T)};c.guid=l.guid,Ur(o,"any",u,c)}},off:function(i,n,r){if(!i||Ao(i))Yt(this.eventBusEl_,i,n);else{var e=i,t=n;ja(e,this,"off"),Rl(t,this,"off"),Nl(r,this,"off"),r=vt(this,r),this.off("dispose",r),e.nodeName?(Yt(e,t,r),Yt(e,"dispose",r)):cr(e)&&(e.off(t,r),e.off("dispose",r))}},trigger:function(i,n){ja(this.eventBusEl_,this,"trigger");var r=i&&typeof i!="string"?i.type:i;if(!Ao(r)){var e="Invalid event type for "+Ha(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(i)(this.log||$e).error(e);else throw new Error(e)}return pn(this.eventBusEl_,i,n)}};function Io(s,i){i===void 0&&(i={});var n=i,r=n.eventBusKey;if(r){if(!s[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');s.eventBusEl_=s[r]}else s.eventBusEl_=Je("span",{className:"vjs-event-bus"});return It(s,Th),s.eventedCallbacks&&s.eventedCallbacks.forEach(function(e){e()}),s.on("dispose",function(){s.off(),[s,s.el_,s.eventBusEl_].forEach(function(e){e&&ni.has(e)&&ni.delete(e)}),x().setTimeout(function(){s.eventBusEl_=null},0)}),s}var bh={state:{},setState:function(i){var n=this;typeof i=="function"&&(i=i());var r;return un(i,function(e,t){n.state[t]!==e&&(r=r||{},r[t]={from:n.state[t],to:e}),n.state[t]=e}),r&&cr(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function Fl(s,i){return It(s,bh),s.state=It({},s.state,i),typeof s.handleStateChanged=="function"&&cr(s)&&s.on("statechanged",s.handleStateChanged),s}var Wa=function(i){return typeof i!="string"?i:i.replace(/./,function(n){return n.toLowerCase()})},Dt=function(i){return typeof i!="string"?i:i.replace(/./,function(n){return n.toUpperCase()})},xh=function(i,n){return Dt(i)===Dt(n)};function _t(){for(var s={},i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return n.forEach(function(e){!e||un(e,function(t,a){if(!Kn(t)){s[a]=t;return}Kn(s[a])||(s[a]={}),s[a]=_t(s[a],t)})}),s}var Sh=function(){function s(){this.map_={}}var i=s.prototype;return i.has=function(r){return r in this.map_},i.delete=function(r){var e=this.has(r);return delete this.map_[r],e},i.set=function(r,e){return this.map_[r]=e,this},i.forEach=function(r,e){for(var t in this.map_)r.call(e,this.map_[t],t,this)},s}(),Eh=x().Map?x().Map:Sh,Ch=function(){function s(){this.set_={}}var i=s.prototype;return i.has=function(r){return r in this.set_},i.delete=function(r){var e=this.has(r);return delete this.set_[r],e},i.add=function(r){return this.set_[r]=1,this},i.forEach=function(r,e){for(var t in this.set_)r.call(e,t,t,this)},s}(),ko=x().Set?x().Set:Ch,ae=function(){function s(n,r,e){var t=this;if(!n&&this.play?this.player_=n=this:this.player_=n,this.isDisposed_=!1,this.parentComponent_=null,this.options_=_t({},this.options_),r=this.options_=_t(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var a=n&&n.id&&n.id()||"no_player";this.id_=a+"_component_"+lr()}this.name_=r.name||null,r.el?this.el_=r.el:r.createEl!==!1&&(this.el_=this.createEl()),r.className&&this.el_&&r.className.split(" ").forEach(function(o){return t.addClass(o)}),r.evented!==!1&&(Io(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Fl(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new ko,this.setIntervalIds_=new ko,this.rafIds_=new ko,this.namedRafs_=new Eh,this.clearingTimersOnDispose_=!1,r.initChildren!==!1&&this.initChildren(),this.ready(e),r.reportTouchActivity!==!1&&this.enableTouchActivity()}var i=s.prototype;return i.dispose=function(r){if(r===void 0&&(r={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(r.restoreEl?this.el_.parentNode.replaceChild(r.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},i.isDisposed=function(){return Boolean(this.isDisposed_)},i.player=function(){return this.player_},i.options=function(r){return r?(this.options_=_t(this.options_,r),this.options_):this.options_},i.el=function(){return this.el_},i.createEl=function(r,e,t){return Je(r,e,t)},i.localize=function(r,e,t){t===void 0&&(t=r);var a=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),u=o&&o[a],l=a&&a.split("-")[0],c=o&&o[l],g=t;return u&&u[r]?g=u[r]:c&&c[r]&&(g=c[r]),e&&(g=g.replace(/\{(\d+)\}/g,function(m,T){var E=e[T-1],C=E;return typeof E=="undefined"&&(C=m),C})),g},i.handleLanguagechange=function(){},i.contentEl=function(){return this.contentEl_||this.el_},i.id=function(){return this.id_},i.name=function(){return this.name_},i.children=function(){return this.children_},i.getChildById=function(r){return this.childIndex_[r]},i.getChild=function(r){if(!!r)return this.childNameIndex_[r]},i.getDescendant=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e=e.reduce(function(u,l){return u.concat(l)},[]);for(var a=this,o=0;o<e.length;o++)if(a=a.getChild(e[o]),!a||!a.getChild)return;return a},i.addChild=function(r,e,t){e===void 0&&(e={}),t===void 0&&(t=this.children_.length);var a,o;if(typeof r=="string"){o=Dt(r);var u=e.componentClass||o;e.name=o;var l=s.getComponent(u);if(!l)throw new Error("Component "+u+" does not exist");if(typeof l!="function")return null;a=new l(this.player_||this,e)}else a=r;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(t,0,a),a.parentComponent_=this,typeof a.id=="function"&&(this.childIndex_[a.id()]=a),o=o||a.name&&Dt(a.name()),o&&(this.childNameIndex_[o]=a,this.childNameIndex_[Wa(o)]=a),typeof a.el=="function"&&a.el()){var c=null;this.children_[t+1]&&(this.children_[t+1].el_?c=this.children_[t+1].el_:cn(this.children_[t+1])&&(c=this.children_[t+1])),this.contentEl().insertBefore(a.el(),c)}return a},i.removeChild=function(r){if(typeof r=="string"&&(r=this.getChild(r)),!(!r||!this.children_)){for(var e=!1,t=this.children_.length-1;t>=0;t--)if(this.children_[t]===r){e=!0,this.children_.splice(t,1);break}if(!!e){r.parentComponent_=null,this.childIndex_[r.id()]=null,this.childNameIndex_[Dt(r.name())]=null,this.childNameIndex_[Wa(r.name())]=null;var a=r.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}}},i.initChildren=function(){var r=this,e=this.options_.children;if(e){var t=this.options_,a=function(c){var g=c.name,m=c.opts;if(t[g]!==void 0&&(m=t[g]),m!==!1){m===!0&&(m={}),m.playerOptions=r.options_.playerOptions;var T=r.addChild(g,m);T&&(r[g]=T)}},o,u=s.getComponent("Tech");Array.isArray(e)?o=e:o=Object.keys(e),o.concat(Object.keys(this.options_).filter(function(l){return!o.some(function(c){return typeof c=="string"?l===c:l===c.name})})).map(function(l){var c,g;return typeof l=="string"?(c=l,g=e[c]||r.options_[c]||{}):(c=l.name,g=l),{name:c,opts:g}}).filter(function(l){var c=s.getComponent(l.opts.componentClass||Dt(l.name));return c&&!u.isTech(c)}).forEach(a)}},i.buildCSSClass=function(){return""},i.ready=function(r,e){if(e===void 0&&(e=!1),!!r){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(r);return}e?r.call(this):this.setTimeout(r,1)}},i.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},i.$=function(r,e){return Er(r,e||this.contentEl())},i.$$=function(r,e){return Al(r,e||this.contentEl())},i.hasClass=function(r){return Fr(this.el_,r)},i.addClass=function(r){or(this.el_,r)},i.removeClass=function(r){Qn(this.el_,r)},i.toggleClass=function(r,e){yl(this.el_,r,e)},i.show=function(){this.removeClass("vjs-hidden")},i.hide=function(){this.addClass("vjs-hidden")},i.lockShowing=function(){this.addClass("vjs-lock-showing")},i.unlockShowing=function(){this.removeClass("vjs-lock-showing")},i.getAttribute=function(r){return bl(this.el_,r)},i.setAttribute=function(r,e){fn(this.el_,r,e)},i.removeAttribute=function(r){Na(this.el_,r)},i.width=function(r,e){return this.dimension("width",r,e)},i.height=function(r,e){return this.dimension("height",r,e)},i.dimensions=function(r,e){this.width(r,!0),this.height(e)},i.dimension=function(r,e,t){if(e!==void 0){(e===null||e!==e)&&(e=0),(""+e).indexOf("%")!==-1||(""+e).indexOf("px")!==-1?this.el_.style[r]=e:e==="auto"?this.el_.style[r]="":this.el_.style[r]=e+"px",t||this.trigger("componentresize");return}if(!this.el_)return 0;var a=this.el_.style[r],o=a.indexOf("px");return parseInt(o!==-1?a.slice(0,o):this.el_["offset"+Dt(r)],10)},i.currentDimension=function(r){var e=0;if(r!=="width"&&r!=="height")throw new Error("currentDimension only accepts width or height value");if(e=Xn(this.el_,r),e=parseFloat(e),e===0||isNaN(e)){var t="offset"+Dt(r);e=this.el_[t]}return e},i.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function(){return this.currentDimension("width")},i.currentHeight=function(){return this.currentDimension("height")},i.focus=function(){this.el_.focus()},i.blur=function(){this.el_.blur()},i.handleKeyDown=function(r){this.player_&&(Z().isEventKey(r,"Tab")||r.stopPropagation(),this.player_.handleKeyDown(r))},i.handleKeyPress=function(r){this.handleKeyDown(r)},i.emitTapEvents=function(){var r=0,e=null,t=10,a=200,o;this.on("touchstart",function(l){l.touches.length===1&&(e={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},r=x().performance.now(),o=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)o=!1;else if(e){var c=l.touches[0].pageX-e.pageX,g=l.touches[0].pageY-e.pageY,m=Math.sqrt(c*c+g*g);m>t&&(o=!1)}});var u=function(){o=!1};this.on("touchleave",u),this.on("touchcancel",u),this.on("touchend",function(l){if(e=null,o===!0){var c=x().performance.now()-r;c<a&&(l.preventDefault(),this.trigger("tap"))}})},i.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var r=vt(this.player(),this.player().reportUserActivity),e;this.on("touchstart",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)});var t=function(o){r(),this.clearInterval(e)};this.on("touchmove",r),this.on("touchend",t),this.on("touchcancel",t)}},i.setTimeout=function(r,e){var t=this,a;return r=vt(this,r),this.clearTimersOnDispose_(),a=x().setTimeout(function(){t.setTimeoutIds_.has(a)&&t.setTimeoutIds_.delete(a),r()},e),this.setTimeoutIds_.add(a),a},i.clearTimeout=function(r){return this.setTimeoutIds_.has(r)&&(this.setTimeoutIds_.delete(r),x().clearTimeout(r)),r},i.setInterval=function(r,e){r=vt(this,r),this.clearTimersOnDispose_();var t=x().setInterval(r,e);return this.setIntervalIds_.add(t),t},i.clearInterval=function(r){return this.setIntervalIds_.has(r)&&(this.setIntervalIds_.delete(r),x().clearInterval(r)),r},i.requestAnimationFrame=function(r){var e=this;if(!this.supportsRaf_)return this.setTimeout(r,1e3/60);this.clearTimersOnDispose_();var t;return r=vt(this,r),t=x().requestAnimationFrame(function(){e.rafIds_.has(t)&&e.rafIds_.delete(t),r()}),this.rafIds_.add(t),t},i.requestNamedAnimationFrame=function(r,e){var t=this;if(!this.namedRafs_.has(r)){this.clearTimersOnDispose_(),e=vt(this,e);var a=this.requestAnimationFrame(function(){e(),t.namedRafs_.has(r)&&t.namedRafs_.delete(r)});return this.namedRafs_.set(r,a),r}},i.cancelNamedAnimationFrame=function(r){!this.namedRafs_.has(r)||(this.cancelAnimationFrame(this.namedRafs_.get(r)),this.namedRafs_.delete(r))},i.cancelAnimationFrame=function(r){return this.supportsRaf_?(this.rafIds_.has(r)&&(this.rafIds_.delete(r),x().cancelAnimationFrame(r)),r):this.clearTimeout(r)},i.clearTimersOnDispose_=function(){var r=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var t=e[0],a=e[1];r[t].forEach(function(o,u){return r[a](u)})}),r.clearingTimersOnDispose_=!1}))},s.registerComponent=function(r,e){if(typeof r!="string"||!r)throw new Error('Illegal component name, "'+r+'"; must be a non-empty string.');var t=s.getComponent("Tech"),a=t&&t.isTech(e),o=s===e||s.prototype.isPrototypeOf(e.prototype);if(a||!o){var u;throw a?u="techs must be registered using Tech.registerTech()":u="must be a Component subclass",new Error('Illegal component, "'+r+'"; '+u+".")}r=Dt(r),s.components_||(s.components_={});var l=s.getComponent("Player");if(r==="Player"&&l&&l.players){var c=l.players,g=Object.keys(c);if(c&&g.length>0&&g.map(function(m){return c[m]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return s.components_[r]=e,s.components_[Wa(r)]=e,e},s.getComponent=function(r){if(!(!r||!s.components_))return s.components_[r]},s}();ae.prototype.supportsRaf_=typeof x().requestAnimationFrame=="function"&&typeof x().cancelAnimationFrame=="function",ae.registerComponent("Component",ae);function wh(s,i,n){if(typeof i!="number"||i<0||i>n)throw new Error("Failed to execute '"+s+"' on 'TimeRanges': The index provided ("+i+") is non-numeric or out of bounds (0-"+n+").")}function Ul(s,i,n,r){return wh(s,r,n.length-1),n[r][i]}function Do(s){var i;return s===void 0||s.length===0?i={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:i={length:s.length,start:Ul.bind(null,"start",0,s),end:Ul.bind(null,"end",1,s)},x().Symbol&&x().Symbol.iterator&&(i[x().Symbol.iterator]=function(){return(s||[]).values()}),i}function Br(s,i){return Array.isArray(s)?Do(s):s===void 0||i===void 0?Do():Do([[s,i]])}function Bl(s,i){var n=0,r,e;if(!i)return 0;(!s||!s.length)&&(s=Br(0,0));for(var t=0;t<s.length;t++)r=s.start(t),e=s.end(t),e>i&&(e=i),n+=e-r;return n/i}function ai(s){if(s instanceof ai)return s;typeof s=="number"?this.code=s:typeof s=="string"?this.message=s:nr(s)&&(typeof s.code=="number"&&(this.code=s.code),It(this,s)),this.message||(this.message=ai.defaultMessages[this.code]||"")}ai.prototype.code=0,ai.prototype.message="",ai.prototype.status=null,ai.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ai.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var mn=0;mn<ai.errorTypes.length;mn++)ai[ai.errorTypes[mn]]=mn,ai.prototype[ai.errorTypes[mn]]=mn;function ta(s){return s!=null&&typeof s.then=="function"}function qi(s){ta(s)&&s.then(null,function(i){})}var Oo=function(i){var n=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(r,e,t){return i[e]&&(r[e]=i[e]),r},{cues:i.cues&&Array.prototype.map.call(i.cues,function(r){return{startTime:r.startTime,endTime:r.endTime,text:r.text,id:r.id}})});return n},Ah=function(i){var n=i.$$("track"),r=Array.prototype.map.call(n,function(t){return t.track}),e=Array.prototype.map.call(n,function(t){var a=Oo(t.track);return t.src&&(a.src=t.src),a});return e.concat(Array.prototype.filter.call(i.textTracks(),function(t){return r.indexOf(t)===-1}).map(Oo))},Ph=function(i,n){return i.forEach(function(r){var e=n.addRemoteTextTrack(r).track;!r.src&&r.cues&&r.cues.forEach(function(t){return e.addCue(t)})}),n.textTracks()},Vl={textTracksToJson:Ah,jsonToTextTracks:Ph,trackToJson_:Oo},Lo="vjs-modal-dialog",gn=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.handleKeyDown_=function(a){return t.handleKeyDown(a)},t.close_=function(a){return t.close(a)},t.opened_=t.hasBeenOpened_=t.hasBeenFilled_=!1,t.closeable(!t.options_.uncloseable),t.content(t.options_.content),t.contentEl_=Je("div",{className:Lo+"-content"},{role:"document"}),t.descEl_=Je("p",{className:Lo+"-description vjs-control-text",id:t.el().getAttribute("aria-describedby")}),Nr(t.descEl_,t.description()),t.el_.appendChild(t.descEl_),t.el_.appendChild(t.contentEl_),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,s.prototype.dispose.call(this)},n.buildCSSClass=function(){return Lo+" vjs-hidden "+s.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_},n.close=function(){if(!!this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if(typeof e=="boolean"){var t=this.closeable_=!!e,a=this.getChild("closeButton");if(t&&!a){var o=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(a,"close",this.close_)}!t&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),a=t.parentNode,o=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(t),this.empty(),wl(t,e),this.trigger("modalfill"),o?a.insertBefore(t,o):a.appendChild(t);var u=this.getChild("closeButton");u&&a.appendChild(u.el_)},n.empty=function(){this.trigger("beforemodalempty"),bo(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return typeof e!="undefined"&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=N().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),Z().isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(!!Z().isEventKey(e,"Tab")){for(var t=this.focusableEls_(),a=this.el_.querySelector(":focus"),o,u=0;u<t.length;u++)if(a===t[u]){o=u;break}N().activeElement===this.el_&&(o=0),e.shiftKey&&o===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&o===t.length-1&&(t[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(t){return(t instanceof x().HTMLAnchorElement||t instanceof x().HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof x().HTMLInputElement||t instanceof x().HTMLSelectElement||t instanceof x().HTMLTextAreaElement||t instanceof x().HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof x().HTMLIFrameElement||t instanceof x().HTMLObjectElement||t instanceof x().HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable")})},i}(ae);gn.prototype.options_={pauseOnOpen:!0,temporary:!0},ae.registerComponent("ModalDialog",gn);var vn=function(s){K(i,s);function i(r){var e;r===void 0&&(r=[]),e=s.call(this)||this,e.tracks_=[],Object.defineProperty((0,J.Z)(e),"length",{get:function(){return this.tracks_.length}});for(var t=0;t<r.length;t++)e.addTrack(r[t]);return e}var n=i.prototype;return n.addTrack=function(e){var t=this,a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},cr(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,a=0,o=this.length;a<o;a++)if(this[a]===e){t=this[a],t.off&&t.off(),this.tracks_.splice(a,1);break}!t||this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,a=0,o=this.length;a<o;a++){var u=this[a];if(u.id===e){t=u;break}}return t},i}(jt);vn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var Ih in vn.prototype.allowedEvents_)vn.prototype["on"+Ih]=null;var Mo=function(i,n){for(var r=0;r<i.length;r++)!Object.keys(i[r]).length||n.id===i[r].id||(i[r].enabled=!1)},kh=function(s){K(i,s);function i(r){var e;r===void 0&&(r=[]);for(var t=r.length-1;t>=0;t--)if(r[t].enabled){Mo(r,r[t]);break}return e=s.call(this,r)||this,e.changing_=!1,e}var n=i.prototype;return n.addTrack=function(e){var t=this;e.enabled&&Mo(this,e),s.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,Mo(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},n.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},i}(vn),Ro=function(i,n){for(var r=0;r<i.length;r++)!Object.keys(i[r]).length||n.id===i[r].id||(i[r].selected=!1)},Dh=function(s){K(i,s);function i(r){var e;r===void 0&&(r=[]);for(var t=r.length-1;t>=0;t--)if(r[t].selected){Ro(r,r[t]);break}return e=s.call(this,r)||this,e.changing_=!1,Object.defineProperty((0,J.Z)(e),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),e}var n=i.prototype;return n.addTrack=function(e){var t=this;e.selected&&Ro(this,e),s.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,Ro(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},n.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},i}(vn),Hl=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.addTrack=function(e){var t=this;s.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_);var a=["metadata","chapters"];a.indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},i}(vn),Oh=function(){function s(n){n===void 0&&(n=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,e=n.length;r<e;r++)this.addTrackElement_(n[r])}var i=s.prototype;return i.addTrackElement_=function(r){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),this.trackElements_.indexOf(r)===-1&&this.trackElements_.push(r)},i.getTrackElementByTrack_=function(r){for(var e,t=0,a=this.trackElements_.length;t<a;t++)if(r===this.trackElements_[t].track){e=this.trackElements_[t];break}return e},i.removeTrackElement_=function(r){for(var e=0,t=this.trackElements_.length;e<t;e++)if(r===this.trackElements_[e]){this.trackElements_[e].track&&typeof this.trackElements_[e].track.off=="function"&&this.trackElements_[e].track.off(),typeof this.trackElements_[e].off=="function"&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},s}(),jl=function(){function s(n){s.prototype.setCues_.call(this,n),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var i=s.prototype;return i.setCues_=function(r){var e=this.length||0,t=0,a=r.length;this.cues_=r,this.length_=r.length;var o=function(l){""+l in this||Object.defineProperty(this,""+l,{get:function(){return this.cues_[l]}})};if(e<a)for(t=e;t<a;t++)o.call(this,t)},i.getCueById=function(r){for(var e=null,t=0,a=this.length;t<a;t++){var o=this[t];if(o.id===r){e=o;break}}return e},s}(),Lh={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Mh={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Rh={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Wl={disabled:"disabled",hidden:"hidden",showing:"showing"},No=function(s){K(i,s);function i(n){var r;n===void 0&&(n={}),r=s.call(this)||this;var e={id:n.id||"vjs_track_"+lr(),kind:n.kind||"",language:n.language||""},t=n.label||"",a=function(l){Object.defineProperty((0,J.Z)(r),l,{get:function(){return e[l]},set:function(){}})};for(var o in e)a(o);return Object.defineProperty((0,J.Z)(r),"label",{get:function(){return t},set:function(l){l!==t&&(t=l,this.trigger("labelchange"))}}),r}return i}(jt),Fo=function(i){var n=["protocol","hostname","port","pathname","search","hash","host"],r=N().createElement("a");r.href=i;for(var e={},t=0;t<n.length;t++)e[n[t]]=r[n[t]];return e.protocol==="http:"&&(e.host=e.host.replace(/:80$/,"")),e.protocol==="https:"&&(e.host=e.host.replace(/:443$/,"")),e.protocol||(e.protocol=x().location.protocol),e.host||(e.host=x().location.host),e},Gl=function(i){if(!i.match(/^https?:\/\//)){var n=N().createElement("a");n.href=i,i=n.href}return i},Uo=function(i){if(typeof i=="string"){var n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,r=n.exec(i);if(r)return r.pop().toLowerCase()}return""},Ga=function(i,n){n===void 0&&(n=x().location);var r=Fo(i),e=r.protocol===":"?n.protocol:r.protocol,t=e+r.host!==n.protocol+n.host;return t},Nh=Object.freeze({__proto__:null,parseUrl:Fo,getAbsoluteURL:Gl,getFileExtension:Uo,isCrossOrigin:Ga}),ql=function(i,n){var r=new(x()).WebVTT.Parser(x(),x().vttjs,x().WebVTT.StringDecoder()),e=[];r.oncue=function(t){n.addCue(t)},r.onparsingerror=function(t){e.push(t)},r.onflush=function(){n.trigger({type:"loadeddata",target:n})},r.parse(i),e.length>0&&(x().console&&x().console.groupCollapsed&&x().console.groupCollapsed("Text Track parsing errors for "+n.src),e.forEach(function(t){return $e.error(t)}),x().console&&x().console.groupEnd&&x().console.groupEnd()),r.flush()},zl=function(i,n){var r={uri:i},e=Ga(i);e&&(r.cors=e);var t=n.tech_.crossOrigin()==="use-credentials";t&&(r.withCredentials=t),et()(r,vt(this,function(a,o,u){if(a)return $e.error(a,o);n.loaded_=!0,typeof x().WebVTT!="function"?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],function(l){if(l.type==="vttjserror"){$e.error("vttjs failed to load, stopping trying to process "+n.src);return}return ql(u,n)}):ql(u,n)}))},ia=function(s){K(i,s);function i(r){var e;if(r===void 0&&(r={}),!r.tech)throw new Error("A tech was not provided.");var t=_t(r,{kind:Rh[r.kind]||"subtitles",language:r.language||r.srclang||""}),a=Wl[t.mode]||"disabled",o=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(a="hidden"),e=s.call(this,t)||this,e.tech_=t.tech,e.cues_=[],e.activeCues_=[],e.preload_=e.tech_.preloadTextTracks!==!1;var u=new jl(e.cues_),l=new jl(e.activeCues_),c=!1;e.timeupdateHandler=vt((0,J.Z)(e),function(m){if(m===void 0&&(m={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var g=function(){e.stopTracking()};return e.tech_.one("dispose",g),a!=="disabled"&&e.startTracking(),Object.defineProperties((0,J.Z)(e),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return a},set:function(T){!Wl[T]||a!==T&&(a=T,!this.preload_&&a!=="disabled"&&this.cues.length===0&&zl(this.src,this),this.stopTracking(),a!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?u:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return l;for(var T=this.tech_.currentTime(),E=[],C=0,P=this.cues.length;C<P;C++){var H=this.cues[C];(H.startTime<=T&&H.endTime>=T||H.startTime===H.endTime&&H.startTime<=T&&H.startTime+.5>=T)&&E.push(H)}if(c=!1,E.length!==this.activeCues_.length)c=!0;else for(var ie=0;ie<E.length;ie++)this.activeCues_.indexOf(E[ie])===-1&&(c=!0);return this.activeCues_=E,l.setCues_(this.activeCues_),l},set:function(){}}}),t.src?(e.src=t.src,e.preload_||(e.loaded_=!0),(e.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&zl(e.src,(0,J.Z)(e))):e.loaded_=!0,e}var n=i.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(x().vttjs&&!(e instanceof x().vttjs.VTTCue)){t=new(x()).vttjs.VTTCue(e.startTime,e.endTime,e.text);for(var a in e)a in t||(t[a]=e[a]);t.id=e.id,t.originalCue_=e}for(var o=this.tech_.textTracks(),u=0;u<o.length;u++)o[u]!==this&&o[u].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var a=this.cues_[t];if(a===e||a.originalCue_&&a.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},i}(No);ia.prototype.allowedEvents_={cuechange:"cuechange"};var Kl=function(s){K(i,s);function i(n){var r;n===void 0&&(n={});var e=_t(n,{kind:Mh[n.kind]||""});r=s.call(this,e)||this;var t=!1;return Object.defineProperty((0,J.Z)(r),"enabled",{get:function(){return t},set:function(o){typeof o!="boolean"||o===t||(t=o,this.trigger("enabledchange"))}}),e.enabled&&(r.enabled=e.enabled),r.loaded_=!0,r}return i}(No),Xl=function(s){K(i,s);function i(n){var r;n===void 0&&(n={});var e=_t(n,{kind:Lh[n.kind]||""});r=s.call(this,e)||this;var t=!1;return Object.defineProperty((0,J.Z)(r),"selected",{get:function(){return t},set:function(o){typeof o!="boolean"||o===t||(t=o,this.trigger("selectedchange"))}}),e.selected&&(r.selected=e.selected),r}return i}(No),$l=0,Fh=1,Yl=2,Uh=3,_n=function(s){K(i,s);function i(n){var r;n===void 0&&(n={}),r=s.call(this)||this;var e,t=new ia(n);return r.kind=t.kind,r.src=t.src,r.srclang=t.language,r.label=t.label,r.default=t.default,Object.defineProperties((0,J.Z)(r),{readyState:{get:function(){return e}},track:{get:function(){return t}}}),e=$l,t.addEventListener("loadeddata",function(){e=Yl,r.trigger({type:"load",target:(0,J.Z)(r)})}),r}return i}(jt);_n.prototype.allowedEvents_={load:"load"},_n.NONE=$l,_n.LOADING=Fh,_n.LOADED=Yl,_n.ERROR=Uh;var Ei={audio:{ListClass:kh,TrackClass:Kl,capitalName:"Audio"},video:{ListClass:Dh,TrackClass:Xl,capitalName:"Video"},text:{ListClass:Hl,TrackClass:ia,capitalName:"Text"}};Object.keys(Ei).forEach(function(s){Ei[s].getterName=s+"Tracks",Ei[s].privateName=s+"Tracks_"});var yn={remoteText:{ListClass:Hl,TrackClass:ia,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Oh,TrackClass:_n,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},si=(0,Q.Z)({},Ei,yn);yn.names=Object.keys(yn),Ei.names=Object.keys(Ei),si.names=[].concat(yn.names).concat(Ei.names);function Bh(s,i,n,r,e){e===void 0&&(e={});var t=s.textTracks();e.kind=i,n&&(e.label=n),r&&(e.language=r),e.tech=s;var a=new si.text.TrackClass(e);return t.addTrack(a),a}var ct=function(s){K(i,s);function i(r,e){var t;return r===void 0&&(r={}),e===void 0&&(e=function(){}),r.reportTouchActivity=!1,t=s.call(this,null,r,e)||this,t.onDurationChange_=function(a){return t.onDurationChange(a)},t.trackProgress_=function(a){return t.trackProgress(a)},t.trackCurrentTime_=function(a){return t.trackCurrentTime(a)},t.stopTrackingCurrentTime_=function(a){return t.stopTrackingCurrentTime(a)},t.disposeSourceHandler_=function(a){return t.disposeSourceHandler(a)},t.queuedHanders_=new Set,t.hasStarted_=!1,t.on("playing",function(){this.hasStarted_=!0}),t.on("loadstart",function(){this.hasStarted_=!1}),si.names.forEach(function(a){var o=si[a];r&&r[o.getterName]&&(t[o.privateName]=r[o.getterName])}),t.featuresProgressEvents||t.manualProgressOn(),t.featuresTimeupdateEvents||t.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){r["native"+a+"Tracks"]===!1&&(t["featuresNative"+a+"Tracks"]=!1)}),r.nativeCaptions===!1||r.nativeTextTracks===!1?t.featuresNativeTextTracks=!1:(r.nativeCaptions===!0||r.nativeTextTracks===!0)&&(t.featuresNativeTextTracks=!0),t.featuresNativeTextTracks||t.emulateTextTracks(),t.preloadTextTracks=r.preloadTextTracks!==!1,t.autoRemoteTextTracks_=new si.text.ListClass,t.initTrackListeners(),r.nativeControlsForTouch||t.emitTapEvents(),t.constructor&&(t.name_=t.constructor.name||"Unknown Tech"),t}var n=i.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(vt(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return Br(0,0)},n.bufferedPercent=function(){return Bl(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Ei.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),s.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach(function(a){for(var o=t[a+"Tracks"]()||[],u=o.length;u--;){var l=o[u];a==="text"&&t.removeRemoteTextTrack(l),o.removeTrack(l)}})},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var a=e[t];this.removeRemoteTextTrack(a)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return e!==void 0&&(this.error_=new ai(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?Br(0,0):Br()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;Ei.names.forEach(function(t){var a=Ei[t],o=function(){e.trigger(t+"trackchange")},u=e[a.getterName]();u.addEventListener("removetrack",o),u.addEventListener("addtrack",o),e.on("dispose",function(){u.removeEventListener("removetrack",o),u.removeEventListener("addtrack",o)})})},n.addWebVttScript_=function(){var e=this;if(!x().WebVTT)if(N().body.contains(this.el())){if(!this.options_["vtt.js"]&&Kn(me())&&Object.keys(me()).length>0){this.trigger("vttjsloaded");return}var t=N().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),x().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),a=this.remoteTextTracks(),o=function(m){return t.addTrack(m.track)},u=function(m){return t.removeTrack(m.track)};a.on("addtrack",o),a.on("removetrack",u),this.addWebVttScript_();var l=function(){return e.trigger("texttrackchange")},c=function(){l();for(var m=0;m<t.length;m++){var T=t[m];T.removeEventListener("cuechange",l),T.mode==="showing"&&T.addEventListener("cuechange",l)}};c(),t.addEventListener("change",c),t.addEventListener("addtrack",c),t.addEventListener("removetrack",c),this.on("dispose",function(){a.off("addtrack",o),a.off("removetrack",u),t.removeEventListener("change",c),t.removeEventListener("addtrack",c),t.removeEventListener("removetrack",c);for(var g=0;g<t.length;g++){var m=t[g];m.removeEventListener("cuechange",l)}})},n.addTextTrack=function(e,t,a){if(!e)throw new Error("TextTrack kind is required but was not provided");return Bh(this,e,t,a)},n.createRemoteTextTrack=function(e){var t=_t(e,{tech:this});return new yn.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var a=this;e===void 0&&(e={});var o=this.createRemoteTextTrack(e);return t!==!0&&t!==!1&&($e.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),t!==!0&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(o.track)}),o},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||x().Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,a=lr();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",function(){t.queuedHanders_.has(a)&&(t.queuedHanders_.delete(a),e())})):this.requestNamedAnimationFrame(a,e),a},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(e,t){return i.canPlayType(e.type)},i.isTech=function(e){return e.prototype instanceof i||e instanceof i||e===i},i.registerTech=function(e,t){if(i.techs_||(i.techs_={}),!i.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Dt(e),i.techs_[e]=t,i.techs_[Wa(e)]=t,e!=="Tech"&&i.defaultTechOrder_.push(e),t},i.getTech=function(e){if(!!e){if(i.techs_&&i.techs_[e])return i.techs_[e];if(e=Dt(e),x()&&x().videojs&&x().videojs[e])return $e.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),x().videojs[e]}},i}(ae);si.names.forEach(function(s){var i=si[s];ct.prototype[i.getterName]=function(){return this[i.privateName]=this[i.privateName]||new i.ListClass,this[i.privateName]}}),ct.prototype.featuresVolumeControl=!0,ct.prototype.featuresMuteControl=!0,ct.prototype.featuresFullscreenResize=!1,ct.prototype.featuresPlaybackRate=!1,ct.prototype.featuresProgressEvents=!1,ct.prototype.featuresSourceset=!1,ct.prototype.featuresTimeupdateEvents=!1,ct.prototype.featuresNativeTextTracks=!1,ct.prototype.featuresVideoFrameCallback=!1,ct.withSourceHandlers=function(s){s.registerSourceHandler=function(n,r){var e=s.sourceHandlers;e||(e=s.sourceHandlers=[]),r===void 0&&(r=e.length),e.splice(r,0,n)},s.canPlayType=function(n){for(var r=s.sourceHandlers||[],e,t=0;t<r.length;t++)if(e=r[t].canPlayType(n),e)return e;return""},s.selectSourceHandler=function(n,r){for(var e=s.sourceHandlers||[],t,a=0;a<e.length;a++)if(t=e[a].canHandleSource(n,r),t)return e[a];return null},s.canPlaySource=function(n,r){var e=s.selectSourceHandler(n,r);return e?e.canHandleSource(n,r):""};var i=["seekable","seeking","duration"];i.forEach(function(n){var r=this[n];typeof r=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},s.prototype),s.prototype.setSource=function(n){var r=s.selectSourceHandler(n,this.options_);r||(s.nativeSourceHandler?r=s.nativeSourceHandler:$e.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==s.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=r.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},s.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ae.registerComponent("Tech",ct),ct.registerTech("Tech",ct),ct.defaultTechOrder_=[];var Vr={},Bo={},qa={};function Vh(s,i){Vr[s]=Vr[s]||[],Vr[s].push(i)}function Hh(s,i,n){s.setTimeout(function(){return Hr(i,Vr[i.type],n,s)},1)}function jh(s,i){s.forEach(function(n){return n.setTech&&n.setTech(i)})}function Wh(s,i,n){return s.reduceRight(Vo(n),i[n]())}function Gh(s,i,n,r){return i[n](s.reduce(Vo(n),r))}function Ql(s,i,n,r){r===void 0&&(r=null);var e="call"+Dt(n),t=s.reduce(Vo(e),r),a=t===qa,o=a?null:i[n](t);return Kh(s,n,o,a),o}var qh={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},zh={setCurrentTime:1,setMuted:1,setVolume:1},Zl={play:1,pause:1};function Vo(s){return function(i,n){return i===qa?qa:n[s]?n[s](i):i}}function Kh(s,i,n,r){for(var e=s.length-1;e>=0;e--){var t=s[e];t[i]&&t[i](r,n)}}function Xh(s){Bo[s.id()]=null}function $h(s,i){var n=Bo[s.id()],r=null;if(n==null)return r=i(s),Bo[s.id()]=[[i,r]],r;for(var e=0;e<n.length;e++){var t=n[e],a=t[0],o=t[1];a===i&&(r=o)}return r===null&&(r=i(s),n.push([i,r])),r}function Hr(s,i,n,r,e,t){s===void 0&&(s={}),i===void 0&&(i=[]),e===void 0&&(e=[]),t===void 0&&(t=!1);var a=i,o=a[0],u=a.slice(1);if(typeof o=="string")Hr(s,Vr[o],n,r,e,t);else if(o){var l=$h(r,o);if(!l.setSource)return e.push(l),Hr(s,u,n,r,e,t);l.setSource(It({},s),function(c,g){if(c)return Hr(s,u,n,r,e,t);e.push(l),Hr(g,s.type===g.type?u:Vr[g.type],n,r,e,t)})}else u.length?Hr(s,u,n,r,e,t):t?n(s,e):Hr(s,Vr["*"],n,r,e,!0)}var Yh={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},za=function(i){i===void 0&&(i="");var n=Uo(i),r=Yh[n.toLowerCase()];return r||""},Qh=function(i,n){if(!n)return"";if(i.cache_.source.src===n&&i.cache_.source.type)return i.cache_.source.type;var r=i.cache_.sources.filter(function(o){return o.src===n});if(r.length)return r[0].type;for(var e=i.$$("source"),t=0;t<e.length;t++){var a=e[t];if(a.type&&a.src&&a.src===n)return a.type}return za(n)},Zh=function s(i){if(Array.isArray(i)){var n=[];i.forEach(function(r){r=s(r),Array.isArray(r)?n=n.concat(r):nr(r)&&n.push(r)}),i=n}else typeof i=="string"&&i.trim()?i=[Jl({src:i})]:nr(i)&&typeof i.src=="string"&&i.src&&i.src.trim()?i=[Jl(i)]:i=[];return i};function Jl(s){if(!s.type){var i=za(s.src);i&&(s.type=i)}return s}var Jh=function(s){K(i,s);function i(n,r,e){var t,a=_t({createEl:!1},r);if(t=s.call(this,n,a,e)||this,!r.playerOptions.sources||r.playerOptions.sources.length===0)for(var o=0,u=r.playerOptions.techOrder;o<u.length;o++){var l=Dt(u[o]),c=ct.getTech(l);if(l||(c=ae.getComponent(l)),c&&c.isSupported()){n.loadTech_(l);break}}else n.src(r.playerOptions.sources);return t}return i}(ae);ae.registerComponent("MediaLoader",Jh);var Ka=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.options_.controlText&&t.controlText(t.options_.controlText),t.handleMouseOver_=function(a){return t.handleMouseOver(a)},t.handleMouseOut_=function(a){return t.handleMouseOut(a)},t.handleClick_=function(a){return t.handleClick(a)},t.handleKeyDown_=function(a){return t.handleKeyDown(a)},t.emitTapEvents(),t.enable(),t}var n=i.prototype;return n.createEl=function(e,t,a){e===void 0&&(e="div"),t===void 0&&(t={}),a===void 0&&(a={}),t=It({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&$e.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),a=It({role:"button"},a),this.tabIndex_=t.tabIndex;var o=Je(e,t,a);return o.appendChild(Je("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},n.dispose=function(){this.controlTextEl_=null,s.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=Je("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(t===void 0&&(t=this.el()),e===void 0)return this.controlText_||"Need Text";var a=this.localize(e);this.controlText_=e,Nr(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",a)},n.buildCSSClass=function(){return"vjs-control vjs-button "+s.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_!="undefined"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_!="undefined"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(e){Z().isEventKey(e,"Space")||Z().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):s.prototype.handleKeyDown.call(this,e)},i}(ae);ae.registerComponent("ClickableComponent",Ka);var ep=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.update(),t.update_=function(a){return t.update(a)},r.on("posterchange",t.update_),t}var n=i.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),s.prototype.dispose.call(this)},n.createEl=function(){var e=Je("div",{className:"vjs-poster",tabIndex:-1});return e},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(!!this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Yn||$n)&&t)&&this.player_.tech(!0).focus(),this.player_.paused()?qi(this.player_.play()):this.player_.pause()}},i}(Ka);ae.registerComponent("PosterImage",ep);var Ci="#222",ed="#ccc",tp={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Ho(s,i){var n;if(s.length===4)n=s[1]+s[1]+s[2]+s[2]+s[3]+s[3];else if(s.length===7)n=s.slice(1);else throw new Error("Invalid color code provided, "+s+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+i+")"}function jo(s,i,n){try{s.style[i]=n}catch(r){return}}var ip=function(s){K(i,s);function i(r,e,t){var a;a=s.call(this,r,e,t)||this;var o=function(l){return a.updateDisplay(l)};return r.on("loadstart",function(u){return a.toggleDisplay(u)}),r.on("texttrackchange",o),r.on("loadedmetadata",function(u){return a.preselectTrack(u)}),r.ready(vt((0,J.Z)(a),function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",o),r.on("playerresize",o),x().addEventListener("orientationchange",o),r.on("dispose",function(){return x().removeEventListener("orientationchange",o)});for(var u=this.options_.playerOptions.tracks||[],l=0;l<u.length;l++)this.player_.addRemoteTextTrack(u[l],!0);this.preselectTrack()})),a}var n=i.prototype;return n.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o,u,l,c=0;c<t.length;c++){var g=t[c];a&&a.enabled&&a.language&&a.language===g.language&&g.kind in e?g.kind===a.kind?l=g:l||(l=g):a&&!a.enabled?(l=null,o=null,u=null):g.default&&(g.kind==="descriptions"&&!o?o=g:g.kind in e&&!u&&(u=g))}l?l.mode="showing":u?u.mode="showing":o&&(o.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){typeof x().WebVTT=="function"&&x().WebVTT.processCues(x(),[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var a=[],o=0;o<e.length;++o){var u=e[o];u.mode==="showing"&&a.push(u)}this.updateForTrack(a);return}for(var l=null,c=null,g=e.length;g--;){var m=e[g];m.mode==="showing"&&(m.kind==="descriptions"?l=m:c=m)}c?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):l&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(l))},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),a=e.activeCues,o=a.length;o--;){var u=a[o];if(!!u){var l=u.displayState;if(t.color&&(l.firstChild.style.color=t.color),t.textOpacity&&jo(l.firstChild,"color",Ho(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(l.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&jo(l.firstChild,"backgroundColor",Ho(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?jo(l,"backgroundColor",Ho(t.windowColor,t.windowOpacity)):l.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?l.firstChild.style.textShadow="2px 2px 3px "+Ci+", 2px 2px 4px "+Ci+", 2px 2px 5px "+Ci:t.edgeStyle==="raised"?l.firstChild.style.textShadow="1px 1px "+Ci+", 2px 2px "+Ci+", 3px 3px "+Ci:t.edgeStyle==="depressed"?l.firstChild.style.textShadow="1px 1px "+ed+", 0 1px "+ed+", -1px -1px "+Ci+", 0 -1px "+Ci:t.edgeStyle==="uniform"&&(l.firstChild.style.textShadow="0 0 4px "+Ci+", 0 0 4px "+Ci+", 0 0 4px "+Ci+", 0 0 4px "+Ci)),t.fontPercent&&t.fontPercent!==1){var c=x().parseFloat(l.style.fontSize);l.style.fontSize=c*t.fontPercent+"px",l.style.height="auto",l.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=tp[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),!(typeof x().WebVTT!="function"||e.every(function(T){return!T.activeCues}))){for(var t=[],a=0;a<e.length;++a)for(var o=e[a],u=0;u<o.activeCues.length;++u)t.push(o.activeCues[u]);x().WebVTT.processCues(x(),t,this.el_);for(var l=0;l<e.length;++l){for(var c=e[l],g=0;g<c.activeCues.length;++g){var m=c.activeCues[g].displayState;or(m,"vjs-text-track-cue"),or(m,"vjs-text-track-cue-"+(c.language?c.language:l)),c.language&&fn(m,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},i}(ae);ae.registerComponent("TextTrackDisplay",ip);var rp=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),a=Je("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),o=s.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(a),o},i}(ae);ae.registerComponent("LoadingSpinner",rp);var Ri=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.createEl=function(e,t,a){t===void 0&&(t={}),a===void 0&&(a={}),e="button",t=It({className:this.buildCSSClass()},t),a=It({type:"button"},a);var o=Je(e,t,a);return o.appendChild(Je("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},n.addChild=function(e,t){t===void 0&&(t={});var a=this.constructor.name;return $e.warn("Adding an actionable (user controllable) child to a Button ("+a+") is not supported; use a ClickableComponent instead."),ae.prototype.addChild.call(this,e,t)},n.enable=function(){s.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){s.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(e){if(Z().isEventKey(e,"Space")||Z().isEventKey(e,"Enter")){e.stopPropagation();return}s.prototype.handleKeyDown.call(this,e)},i}(Ka);ae.registerComponent("Button",Ri);var td=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.mouseused_=!1,t.on("mousedown",function(a){return t.handleMouseDown(a)}),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;qi(t),this.player_.tech(!0)&&!((Yn||$n)&&a)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),u=o&&o.getChild("playToggle");if(!u){this.player_.tech(!0).focus();return}var l=function(){return u.focus()};ta(t)?t.then(l,function(){}):this.setTimeout(l,1)},n.handleKeyDown=function(e){this.mouseused_=!1,s.prototype.handleKeyDown.call(this,e)},n.handleMouseDown=function(e){this.mouseused_=!0},i}(Ri);td.prototype.controlText_="Play Video",ae.registerComponent("BigPlayButton",td);var np=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.controlText(e&&e.controlText||t.localize("Close")),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+s.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(e){Z().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):s.prototype.handleKeyDown.call(this,e)},i}(Ri);ae.registerComponent("CloseButton",np);var id=function(s){K(i,s);function i(r,e){var t;return e===void 0&&(e={}),t=s.call(this,r,e)||this,e.replay=e.replay===void 0||e.replay,t.on(r,"play",function(a){return t.handlePlay(a)}),t.on(r,"pause",function(a){return t.handlePause(a)}),e.replay&&t.on(r,"ended",function(a){return t.handleEnded(a)}),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+s.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?qi(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return t.handleSeeked(a)})},i}(Ri);id.prototype.controlText_="Play",ae.registerComponent("PlayToggle",id);var rd=function(i,n){i=i<0?0:i;var r=Math.floor(i%60),e=Math.floor(i/60%60),t=Math.floor(i/3600),a=Math.floor(n/60%60),o=Math.floor(n/3600);return(isNaN(i)||i===1/0)&&(t=e=r="-"),t=t>0||o>0?t+":":"",e=((t||a>=10)&&e<10?"0"+e:e)+":",r=r<10?"0"+r:r,t+e+r},Wo=rd;function ap(s){Wo=s}function sp(){Wo=rd}function Tn(s,i){return i===void 0&&(i=s),Wo(s,i)}var bn=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.on(r,["timeupdate","ended"],function(a){return t.updateContent(a)}),t.updateTextNode_(),t}var n=i.prototype;return n.createEl=function(){var e=this.buildCSSClass(),t=s.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),a=Je("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return t.appendChild(a),this.contentEl_=Je("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,this.textNode_=null,s.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;e===void 0&&(e=0),e=Tn(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!!t.contentEl_){var a=t.textNode_;a&&t.contentEl_.firstChild!==a&&(a=null,$e.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=N().createTextNode(t.formattedTime_),t.textNode_&&(a?t.contentEl_.replaceChild(t.textNode_,a):t.contentEl_.appendChild(t.textNode_))}}))},n.updateContent=function(e){},i}(ae);bn.prototype.labelText_="Time",bn.prototype.controlText_="Time",ae.registerComponent("TimeDisplay",bn);var Go=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},i}(bn);Go.prototype.labelText_="Current Time",Go.prototype.controlText_="Current Time",ae.registerComponent("CurrentTimeDisplay",Go);var qo=function(s){K(i,s);function i(r,e){var t;t=s.call(this,r,e)||this;var a=function(u){return t.updateContent(u)};return t.on(r,"durationchange",a),t.on(r,"loadstart",a),t.on(r,"loadedmetadata",a),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},i}(bn);qo.prototype.labelText_="Duration",qo.prototype.controlText_="Duration",ae.registerComponent("DurationDisplay",qo);var op=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=s.prototype.createEl.call(this,"div"),a=s.prototype.createEl.call(this,"span",{textContent:"/"});return t.appendChild(a),e.appendChild(t),e},i}(ae);ae.registerComponent("TimeDivider",op);var zo=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.on(r,"durationchange",function(a){return t.updateContent(a)}),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var e=s.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&e.insertBefore(Je("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},n.updateContent=function(e){if(typeof this.player_.duration()=="number"){var t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}},i}(bn);zo.prototype.labelText_="Remaining Time",zo.prototype.controlText_="Remaining Time",ae.registerComponent("RemainingTimeDisplay",zo);var up=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.updateShowing(),t.on(t.player(),"durationchange",function(a){return t.updateShowing(a)}),t}var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Je("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Je("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(N().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},n.dispose=function(){this.contentEl_=null,s.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},i}(ae);ae.registerComponent("LiveDisplay",up);var nd=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.updateLiveEdgeStatus(),t.player_.liveTracker&&(t.updateLiveEdgeStatusHandler_=function(a){return t.updateLiveEdgeStatus(a)},t.on(t.player_.liveTracker,"liveedgechange",t.updateLiveEdgeStatusHandler_)),t}var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Je("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,s.prototype.dispose.call(this)},i}(Ri);nd.prototype.controlText_="Seek to live, currently playing live",ae.registerComponent("SeekToLive",nd);var Xa=function(i,n,r){return i=Number(i),Math.min(r,Math.max(n,isNaN(i)?n:i))},Ko=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.handleMouseDown_=function(a){return t.handleMouseDown(a)},t.handleMouseUp_=function(a){return t.handleMouseUp(a)},t.handleKeyDown_=function(a){return t.handleKeyDown(a)},t.handleClick_=function(a){return t.handleClick(a)},t.handleMouseMove_=function(a){return t.handleMouseMove(a)},t.update_=function(a){return t.update(a)},t.bar=t.getChild(t.options_.barName),t.vertical(!!t.options_.vertical),t.enable(),t}var n=i.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(!!this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(e,t,a){return t===void 0&&(t={}),a===void 0&&(a={}),t.className=t.className+" vjs-slider",t=It({tabIndex:0},t),a=It({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),s.prototype.createEl.call(this,e,t,a)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!sr&&e.preventDefault(),xl(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Sl(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(!(!this.el_||!this.bar)){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",function(){var a=e.vertical()?"height":"width";e.bar.el().style[a]=(t*100).toFixed(2)+"%"})),t}},n.getProgress=function(){return Number(Xa(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=Fa(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(e){Z().isEventKey(e,"Left")||Z().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Z().isEventKey(e,"Right")||Z().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):s.prototype.handleKeyDown.call(this,e)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},i}(ae);ae.registerComponent("Slider",Ko);var Xo=function(i,n){return Xa(i/n*100,0,100).toFixed(2)+"%"},lp=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.partEls_=[],t.on(r,"progress",function(a){return t.update(a)}),t}var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),t=Je("span",{className:"vjs-control-text"}),a=Je("span",{textContent:this.localize("Loaded")}),o=N().createTextNode(": ");return this.percentageEl_=Je("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(a),t.appendChild(o),t.appendChild(this.percentageEl_),e},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,s.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=t.player_.liveTracker,o=t.player_.buffered(),u=a&&a.isLive()?a.seekableEnd():t.player_.duration(),l=t.player_.bufferedEnd(),c=t.partEls_,g=Xo(l,u);t.percent_!==g&&(t.el_.style.width=g,Nr(t.percentageEl_,g),t.percent_=g);for(var m=0;m<o.length;m++){var T=o.start(m),E=o.end(m),C=c[m];C||(C=t.el_.appendChild(Je()),c[m]=C),!(C.dataset.start===T&&C.dataset.end===E)&&(C.dataset.start=T,C.dataset.end=E,C.style.left=Xo(T,l),C.style.width=Xo(E-T,l))}for(var P=c.length;P>o.length;P--)t.el_.removeChild(c[P-1]);c.length=o.length})},i}(ae);ae.registerComponent("LoadProgressBar",lp);var dp=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.update=dr(vt((0,J.Z)(t),t.update),Mi),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,a){var o=Zn(this.el_),u=hn(this.player_.el()),l=e.width*t;if(!(!u||!o)){var c=e.left-u.left+l,g=e.width-l+(u.right-e.right),m=o.width/2;c<m?m+=m-c:g<m&&(m=g),m<0?m=0:m>o.width&&(m=o.width),m=Math.round(m),this.el_.style.right="-"+m+"px",this.write(a)}},n.write=function(e){Nr(this.el_,e)},n.updateTime=function(e,t,a,o){var u=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var l,c=u.player_.duration();if(u.player_.liveTracker&&u.player_.liveTracker.isLive()){var g=u.player_.liveTracker.liveWindow(),m=g-t*g;l=(m<1?"":"-")+Tn(m,g)}else l=Tn(a,c);u.update(e,t,l),o&&o()})},i}(ae);ae.registerComponent("TimeTooltip",dp);var $o=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.update=dr(vt((0,J.Z)(t),t.update),Mi),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var a=this.getChild("timeTooltip");if(!!a){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(e,t,o)}},i}(ae);$o.prototype.options_={children:[]},!ri&&!ar&&$o.prototype.options_.children.push("timeTooltip"),ae.registerComponent("PlayProgressBar",$o);var ad=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.update=dr(vt((0,J.Z)(t),t.update),Mi),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var a=this,o=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,o,function(){a.el_.style.left=e.width*t+"px"})},i}(ae);ad.prototype.options_={children:["timeTooltip"]},ae.registerComponent("MouseTimeDisplay",ad);var $a=5,sd=12,Yo=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.setEventHandlers_(),t}var n=i.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=vt(this,this.update),this.update=dr(this.update_,Mi),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in N()&&"visibilityState"in N()&&this.on(N(),"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){N().visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Mi))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(e){var t=this;if(N().visibilityState!=="hidden"){var a=s.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=t.player_.ended()?t.player_.duration():t.getCurrentTime_(),u=t.player_.liveTracker,l=t.player_.duration();u&&u.isLive()&&(l=t.player_.liveTracker.liveCurrentTime()),t.percent_!==a&&(t.el_.setAttribute("aria-valuenow",(a*100).toFixed(2)),t.percent_=a),(t.currentTime_!==o||t.duration_!==l)&&(t.el_.setAttribute("aria-valuetext",t.localize("progress bar timing: currentTime={1} duration={2}",[Tn(o,l),Tn(l,l)],"{1} of {2}")),t.currentTime_=o,t.duration_=l),t.bar&&t.bar.update(hn(t.el()),t.getProgress())}),a}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e=this.getCurrentTime_(),t,a=this.player_.liveTracker;return a&&a.isLive()?(t=(e-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t},n.handleMouseDown=function(e){!Jn(e)||(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),s.prototype.handleMouseDown.call(this,e))},n.handleMouseMove=function(e,t){if(t===void 0&&(t=!1),!!Jn(e)){!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var a,o=this.calculateDistance(e),u=this.player_.liveTracker;if(!u||!u.isLive())a=o*this.player_.duration(),a===this.player_.duration()&&(a=a-.1);else{if(o>=.99){u.seekToLiveEdge();return}var l=u.seekableStart(),c=u.liveCurrentTime();if(a=l+o*u.liveWindow(),a>=c&&(a=c),a<=l&&(a=l+.1),a===1/0)return}this.userSeek_(a)}},n.enable=function(){s.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");!e||e.show()},n.disable=function(){s.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");!e||e.hide()},n.handleMouseUp=function(e){s.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?qi(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+$a)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-$a)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(e){var t=this.player_.liveTracker;if(Z().isEventKey(e,"Space")||Z().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Z().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(Z().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Z()(e))){e.preventDefault(),e.stopPropagation();var a=(Z().codes[Z()(e)]-Z().codes[0])*10/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else Z().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-$a*sd)):Z().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+$a*sd)):s.prototype.handleKeyDown.call(this,e)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in N()&&"visibilityState"in N()&&this.off(N(),"visibilitychange",this.toggleVisibility_),s.prototype.dispose.call(this)},i}(Ko);Yo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!ri&&!ar&&Yo.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),ae.registerComponent("SeekBar",Yo);var od=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.handleMouseMove=dr(vt((0,J.Z)(t),t.handleMouseMove),Mi),t.throttledHandleMouseSeek=dr(vt((0,J.Z)(t),t.handleMouseSeek),Mi),t.handleMouseUpHandler_=function(a){return t.handleMouseUp(a)},t.handleMouseDownHandler_=function(a){return t.handleMouseDown(a)},t.enable(),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(!!t){var a=t.getChild("playProgressBar"),o=t.getChild("mouseTimeDisplay");if(!(!a&&!o)){var u=t.el(),l=Zn(u),c=Fa(u,e).x;c=Xa(c,0,1),o&&o.update(l,c),a&&a.update(l,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach(function(t){return t.disable&&t.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&qi(this.player_.play())}},n.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},i}(ae);od.prototype.options_={children:["seekBar"]},ae.registerComponent("ProgressControl",od);var ud=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.on(r,["enterpictureinpicture","leavepictureinpicture"],function(a){return t.handlePictureInPictureChange(a)}),t.on(r,["disablepictureinpicturechanged","loadedmetadata"],function(a){return t.handlePictureInPictureEnabledChange(a)}),t.on(r,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var a=r.currentType().substring(0,5)==="audio";a||r.audioPosterMode()||r.audioOnlyMode()?(r.isInPictureInPicture()&&r.exitPictureInPicture(),t.hide()):t.show()}),t.disable(),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+s.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){N().pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},i}(Ri);ud.prototype.controlText_="Picture-in-Picture",ae.registerComponent("PictureInPictureToggle",ud);var ld=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.on(r,"fullscreenchange",function(a){return t.handleFullscreenChange(a)}),N()[r.fsApi_.fullscreenEnabled]===!1&&t.disable(),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+s.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},i}(Ri);ld.prototype.controlText_="Fullscreen",ae.registerComponent("FullscreenToggle",ld);var cp=function(i,n){n.tech_&&!n.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(n,"loadstart",function(){n.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})},fp=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(s.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},i}(ae);ae.registerComponent("VolumeLevel",fp);var hp=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.update=dr(vt((0,J.Z)(t),t.update),Mi),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,a,o){if(!a){var u=hn(this.el_),l=hn(this.player_.el()),c=e.width*t;if(!l||!u)return;var g=e.left-l.left+c,m=e.width-c+(l.right-e.right),T=u.width/2;g<T?T+=T-g:m<T&&(T=m),T<0?T=0:T>u.width&&(T=u.width),this.el_.style.right="-"+T+"px"}this.write(o+"%")},n.write=function(e){Nr(this.el_,e)},n.updateVolume=function(e,t,a,o,u){var l=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){l.update(e,t,a,o.toFixed(0)),u&&u()})},i}(ae);ae.registerComponent("VolumeLevelTooltip",hp);var dd=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.update=dr(vt((0,J.Z)(t),t.update),Mi),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,a){var o=this,u=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,a,u,function(){a?o.el_.style.bottom=e.height*t+"px":o.el_.style.left=e.width*t+"px"})},i}(ae);dd.prototype.options_={children:["volumeLevelTooltip"]},ae.registerComponent("MouseVolumeLevelDisplay",dd);var Ya=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.on("slideractive",function(a){return t.updateLastVolume_(a)}),t.on(r,"volumechange",function(a){return t.updateARIAAttributes(a)}),r.ready(function(){return t.updateARIAAttributes()}),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(e){!Jn(e)||s.prototype.handleMouseDown.call(this,e)},n.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var a=this.el(),o=hn(a),u=this.vertical(),l=Fa(a,e);l=u?l.y:l.x,l=Xa(l,0,1),t.update(o,l,u)}!Jn(e)||(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){e.player_.volume()===0&&e.player_.lastVolume_(t)})},i}(Ko);Ya.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!ri&&!ar&&Ya.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Ya.prototype.playerEvent="volumechange",ae.registerComponent("VolumeBar",Ya);var cd=function(s){K(i,s);function i(r,e){var t;return e===void 0&&(e={}),e.vertical=e.vertical||!1,(typeof e.volumeBar=="undefined"||Kn(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),t=s.call(this,r,e)||this,cp((0,J.Z)(t),r),t.throttledHandleMouseMove=dr(vt((0,J.Z)(t),t.handleMouseMove),Mi),t.handleMouseUpHandler_=function(a){return t.handleMouseUp(a)},t.on("mousedown",function(a){return t.handleMouseDown(a)}),t.on("touchstart",function(a){return t.handleMouseDown(a)}),t.on("mousemove",function(a){return t.handleMouseMove(a)}),t.on(t.volumeBar,["focus","slideractive"],function(){t.volumeBar.addClass("vjs-slider-active"),t.addClass("vjs-slider-active"),t.trigger("slideractive")}),t.on(t.volumeBar,["blur","sliderinactive"],function(){t.volumeBar.removeClass("vjs-slider-active"),t.removeClass("vjs-slider-active"),t.trigger("sliderinactive")}),t}var n=i.prototype;return n.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),s.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},i}(ae);cd.prototype.options_={children:["volumeBar"]},ae.registerComponent("VolumeControl",cd);var pp=function(i,n){n.tech_&&!n.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(n,"loadstart",function(){n.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})},fd=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,pp((0,J.Z)(t),r),t.on(r,["loadstart","volumechange"],function(a){return t.update(a)}),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+s.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),a=this.player_.lastVolume_();if(t===0){var o=a<.1?.1:a;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;ri&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var a=0;a<4;a++)Qn(this.el_,"vjs-vol-"+a);or(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||this.player_.volume()===0,t=e?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},i}(Ri);fd.prototype.controlText_="Mute",ae.registerComponent("MuteToggle",fd);var hd=function(s){K(i,s);function i(r,e){var t;return e===void 0&&(e={}),typeof e.inline!="undefined"?e.inline=e.inline:e.inline=!0,(typeof e.volumeControl=="undefined"||Kn(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),t=s.call(this,r,e)||this,t.handleKeyPressHandler_=function(a){return t.handleKeyPress(a)},t.on(r,["loadstart"],function(a){return t.volumePanelState_(a)}),t.on(t.muteToggle,"keyup",function(a){return t.handleKeyPress(a)}),t.on(t.volumeControl,"keyup",function(a){return t.handleVolumeControlKeyUp(a)}),t.on("keydown",function(a){return t.handleKeyPress(a)}),t.on("mouseover",function(a){return t.handleMouseOver(a)}),t.on("mouseout",function(a){return t.handleMouseOut(a)}),t.on(t.volumeControl,["slideractive"],t.sliderActive_),t.on(t.volumeControl,["sliderinactive"],t.sliderInactive_),t}var n=i.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),s.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},n.dispose=function(){this.handleMouseOut(),s.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){Z().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),vi(N(),"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),Yt(N(),"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){Z().isEventKey(e,"Esc")&&this.handleMouseOut()},i}(ae);hd.prototype.options_={children:["muteToggle","volumeControl"]},ae.registerComponent("VolumePanel",hd);var pd=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,e&&(t.menuButton_=e.menuButton),t.focusedChild_=-1,t.on("keydown",function(a){return t.handleKeyDown(a)}),t.boundHandleBlur_=function(a){return t.handleBlur(a)},t.boundHandleTapClick_=function(a){return t.handleTapClick(a)},t}var n=i.prototype;return n.addEventListenerForItem=function(e){e instanceof ae&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof ae&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),s.prototype.removeChild.call(this,e)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=Je(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=s.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),vi(t,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),t},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,s.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||N().activeElement;if(!this.children().some(function(o){return o.el()===t})){var a=this.menuButton_;a&&a.buttonPressed_&&t!==a.el().firstChild&&a.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var a=t.filter(function(o){return o.el()===e.target})[0];if(!a)return;a.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},n.handleKeyDown=function(e){Z().isEventKey(e,"Left")||Z().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Z().isEventKey(e,"Right")||Z().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){e===void 0&&(e=0);var t=this.children().slice(),a=t.length&&t[0].hasClass("vjs-menu-title");a&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},i}(ae);ae.registerComponent("Menu",pd);var Qo=function(s){K(i,s);function i(r,e){var t;e===void 0&&(e={}),t=s.call(this,r,e)||this,t.menuButton_=new Ri(r,e),t.menuButton_.controlText(t.controlText_),t.menuButton_.el_.setAttribute("aria-haspopup","true");var a=Ri.prototype.buildCSSClass();t.menuButton_.el_.className=t.buildCSSClass()+" "+a,t.menuButton_.removeClass("vjs-control"),t.addChild(t.menuButton_),t.update(),t.enabled_=!0;var o=function(l){return t.handleClick(l)};return t.handleMenuKeyUp_=function(u){return t.handleMenuKeyUp(u)},t.on(t.menuButton_,"tap",o),t.on(t.menuButton_,"click",o),t.on(t.menuButton_,"keydown",function(u){return t.handleKeyDown(u)}),t.on(t.menuButton_,"mouseenter",function(){t.addClass("vjs-hover"),t.menu.show(),vi(N(),"keyup",t.handleMenuKeyUp_)}),t.on("mouseleave",function(u){return t.handleMouseLeave(u)}),t.on("keydown",function(u){return t.handleSubmenuKeyDown(u)}),t}var n=i.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e=new pd(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=Je("li",{className:"vjs-menu-title",textContent:Dt(this.options_.title),tabIndex:-1}),a=new ae(this.player_,{el:t});e.addItem(a)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)e.addItem(this.items[o]);return e},n.createItems=function(){},n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";var t=Ri.prototype.buildCSSClass();return"vjs-menu-button "+e+" "+t+" "+s.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+s.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return t===void 0&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),s.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Yt(N(),"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){Z().isEventKey(e,"Esc")||Z().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Z().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Z().isEventKey(e,"Up")||Z().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(Z().isEventKey(e,"Esc")||Z().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(Z().isEventKey(e,"Esc")||Z().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Z().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ri&&vl())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},i}(ae);ae.registerComponent("MenuButton",Qo);var Zo=function(s){K(i,s);function i(n,r){var e,t=r.tracks;if(e=s.call(this,n,r)||this,e.items.length<=1&&e.hide(),!t)return(0,J.Z)(e);var a=vt((0,J.Z)(e),e.update);return t.addEventListener("removetrack",a),t.addEventListener("addtrack",a),t.addEventListener("labelchange",a),e.player_.on("ready",a),e.player_.on("dispose",function(){t.removeEventListener("removetrack",a),t.removeEventListener("addtrack",a),t.removeEventListener("labelchange",a)}),e}return i}(Qo);ae.registerComponent("TrackButton",Zo);var mp=["Tab","Esc","Up","Down","Right","Left"],ra=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.selectable=e.selectable,t.isSelected_=e.selected||!1,t.multiSelectable=e.multiSelectable,t.selected(t.isSelected_),t.selectable?t.multiSelectable?t.el_.setAttribute("role","menuitemcheckbox"):t.el_.setAttribute("role","menuitemradio"):t.el_.setAttribute("role","menuitem"),t}var n=i.prototype;return n.createEl=function(e,t,a){this.nonIconControl=!0;var o=s.prototype.createEl.call(this,"li",It({className:"vjs-menu-item",tabIndex:-1},t),a);return o.replaceChild(Je("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},n.handleKeyDown=function(e){mp.some(function(t){return Z().isEventKey(e,t)})||s.prototype.handleKeyDown.call(this,e)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},i}(Ka);ae.registerComponent("MenuItem",ra);var na=function(s){K(i,s);function i(r,e){var t,a=e.track,o=r.textTracks();e.label=a.label||a.language||"Unknown",e.selected=a.mode==="showing",t=s.call(this,r,e)||this,t.track=a,t.kinds=(e.kinds||[e.kind||t.track.kind]).filter(Boolean);var u=function(){for(var m=arguments.length,T=new Array(m),E=0;E<m;E++)T[E]=arguments[E];t.handleTracksChange.apply((0,J.Z)(t),T)},l=function(){for(var m=arguments.length,T=new Array(m),E=0;E<m;E++)T[E]=arguments[E];t.handleSelectedLanguageChange.apply((0,J.Z)(t),T)};if(r.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",l),t.on("dispose",function(){r.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",l)}),o.onchange===void 0){var c;t.on(["tap","click"],function(){if(typeof x().Event!="object")try{c=new(x()).Event("change")}catch(g){}c||(c=N().createEvent("Event"),c.initEvent("change",!0,!0)),o.dispatchEvent(c)})}return t.handleTracksChange(),t}var n=i.prototype;return n.handleClick=function(e){var t=this.track,a=this.player_.textTracks();if(s.prototype.handleClick.call(this,e),!!a)for(var o=0;o<a.length;o++){var u=a[o];this.kinds.indexOf(u.kind)!==-1&&(u===t?u.mode!=="showing"&&(u.mode="showing"):u.mode!=="disabled"&&(u.mode="disabled"))}},n.handleTracksChange=function(e){var t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if(this.track.mode==="showing"){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,s.prototype.dispose.call(this)},i}(ra);ae.registerComponent("TextTrackMenuItem",na);var md=function(s){K(i,s);function i(r,e){return e.track={player:r,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,s.call(this,r,e)||this}var n=i.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),a=!0,o=0,u=t.length;o<u;o++){var l=t[o];if(this.options_.kinds.indexOf(l.kind)>-1&&l.mode==="showing"){a=!1;break}}a!==this.isSelected_&&this.selected(a)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),a=!0,o=0,u=t.length;o<u;o++){var l=t[o];if(["captions","descriptions","subtitles"].indexOf(l.kind)>-1&&l.mode==="showing"){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},i}(na);ae.registerComponent("OffTextTrackMenuItem",md);var xn=function(s){K(i,s);function i(r,e){return e===void 0&&(e={}),e.tracks=r.textTracks(),s.call(this,r,e)||this}var n=i.prototype;return n.createItems=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=na);var a;this.label_&&(a=this.label_+" off"),e.push(new md(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var u=0;u<o.length;u++){var l=o[u];if(this.kinds_.indexOf(l.kind)>-1){var c=new t(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+l.kind+"-menu-item"),e.push(c)}}return e},i}(Zo);ae.registerComponent("TextTrackButton",xn);var gd=function(s){K(i,s);function i(r,e){var t,a=e.track,o=e.cue,u=r.currentTime();return e.selectable=!0,e.multiSelectable=!1,e.label=o.text,e.selected=o.startTime<=u&&u<o.endTime,t=s.call(this,r,e)||this,t.track=a,t.cue=o,t}var n=i.prototype;return n.handleClick=function(e){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},i}(ra);ae.registerComponent("ChaptersTrackMenuItem",gd);var Jo=function(s){K(i,s);function i(r,e,t){var a;return a=s.call(this,r,e,t)||this,a.selectCurrentItem_=function(){a.items.forEach(function(o){o.selected(a.track_.activeCues[0]===o.cue)})},a}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+s.prototype.buildWrapperCSSClass.call(this)},n.update=function(e){if(!(e&&e.track&&e.track.kind!=="chapters")){var t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),s.prototype.update.call(this)):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&s.prototype.update.call(this)}},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var a=e[t];if(a.kind===this.kind_)return a}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Dt(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),s.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var a=0,o=t.length;a<o;a++){var u=t[a],l=new gd(this.player_,{track:this.track_,cue:u});e.push(l)}return e},i}(xn);Jo.prototype.kind_="chapters",Jo.prototype.controlText_="Chapters",ae.registerComponent("ChaptersButton",Jo);var eu=function(s){K(i,s);function i(r,e,t){var a;a=s.call(this,r,e,t)||this;var o=r.textTracks(),u=vt((0,J.Z)(a),a.handleTracksChange);return o.addEventListener("change",u),a.on("dispose",function(){o.removeEventListener("change",u)}),a}var n=i.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),a=!1,o=0,u=t.length;o<u;o++){var l=t[o];if(l.kind!==this.kind_&&l.mode==="showing"){a=!0;break}}a?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},i}(xn);eu.prototype.kind_="descriptions",eu.prototype.controlText_="Descriptions",ae.registerComponent("DescriptionsButton",eu);var tu=function(s){K(i,s);function i(r,e,t){return s.call(this,r,e,t)||this}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+s.prototype.buildWrapperCSSClass.call(this)},i}(xn);tu.prototype.kind_="subtitles",tu.prototype.controlText_="Subtitles",ae.registerComponent("SubtitlesButton",tu);var iu=function(s){K(i,s);function i(r,e){var t;return e.track={player:r,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",t=s.call(this,r,e)||this,t.addClass("vjs-texttrack-settings"),t.controlText(", opens "+e.kind+" settings dialog"),t}var n=i.prototype;return n.handleClick=function(e){this.player().getChild("textTrackSettings").open()},i}(na);ae.registerComponent("CaptionSettingsMenuItem",iu);var ru=function(s){K(i,s);function i(r,e,t){return s.call(this,r,e,t)||this}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+s.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new iu(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),s.prototype.createItems.call(this,e)},i}(xn);ru.prototype.kind_="captions",ru.prototype.controlText_="Captions",ae.registerComponent("CaptionsButton",ru);var vd=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.createEl=function(e,t,a){var o=s.prototype.createEl.call(this,e,t,a),u=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(u.appendChild(Je("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(Je("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},i}(na);ae.registerComponent("SubsCapsMenuItem",vd);var nu=function(s){K(i,s);function i(r,e){var t;return e===void 0&&(e={}),t=s.call(this,r,e)||this,t.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(t.player_.language_)>-1&&(t.label_="captions"),t.menuButton_.controlText(Dt(t.label_)),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+s.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new iu(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=s.prototype.createItems.call(this,e,vd),e},i}(xn);nu.prototype.kinds_=["captions","subtitles"],nu.prototype.controlText_="Subtitles",ae.registerComponent("SubsCapsButton",nu);var _d=function(s){K(i,s);function i(r,e){var t,a=e.track,o=r.audioTracks();e.label=a.label||a.language||"Unknown",e.selected=a.enabled,t=s.call(this,r,e)||this,t.track=a,t.addClass("vjs-"+a.kind+"-menu-item");var u=function(){for(var c=arguments.length,g=new Array(c),m=0;m<c;m++)g[m]=arguments[m];t.handleTracksChange.apply((0,J.Z)(t),g)};return o.addEventListener("change",u),t.on("dispose",function(){o.removeEventListener("change",u)}),t}var n=i.prototype;return n.createEl=function(e,t,a){var o=s.prototype.createEl.call(this,e,t,a),u=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(u.appendChild(Je("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(Je("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},n.handleClick=function(e){if(s.prototype.handleClick.call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var t=this.player_.audioTracks(),a=0;a<t.length;a++){var o=t[a];o!==this.track&&(o.enabled=o===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},i}(ra);ae.registerComponent("AudioTrackMenuItem",_d);var yd=function(s){K(i,s);function i(r,e){return e===void 0&&(e={}),e.tracks=r.audioTracks(),s.call(this,r,e)||this}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+s.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){e===void 0&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),a=0;a<t.length;a++){var o=t[a];e.push(new _d(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return e},i}(Zo);yd.prototype.controlText_="Audio Track",ae.registerComponent("AudioTrackButton",yd);var au=function(s){K(i,s);function i(r,e){var t,a=e.rate,o=parseFloat(a,10);return e.label=a,e.selected=o===r.playbackRate(),e.selectable=!0,e.multiSelectable=!1,t=s.call(this,r,e)||this,t.label=a,t.rate=o,t.on(r,"ratechange",function(u){return t.update(u)}),t}var n=i.prototype;return n.handleClick=function(e){s.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},i}(ra);au.prototype.contentElType="button",ae.registerComponent("PlaybackRateMenuItem",au);var Td=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.menuButton_.el_.setAttribute("aria-describedby",t.labelElId_),t.updateVisibility(),t.updateLabel(),t.on(r,"loadstart",function(a){return t.updateVisibility(a)}),t.on(r,"ratechange",function(a){return t.updateLabel(a)}),t.on(r,"playbackrateschange",function(a){return t.handlePlaybackRateschange(a)}),t}var n=i.prototype;return n.createEl=function(){var e=s.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Je("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},n.dispose=function(){this.labelEl_=null,s.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+s.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+s.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],a=e.length-1;a>=0;a--)t.push(new au(this.player(),{rate:e[a]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),a=this.playbackRates(),o=a.indexOf(t),u=(o+1)%a.length;this.player().playbackRate(a[u])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},i}(Qo);Td.prototype.controlText_="Playback Rate",ae.registerComponent("PlaybackRateMenuButton",Td);var bd=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+s.prototype.buildCSSClass.call(this)},n.createEl=function(e,t,a){return e===void 0&&(e="div"),t===void 0&&(t={}),a===void 0&&(a={}),t.className||(t.className=this.buildCSSClass()),s.prototype.createEl.call(this,e,t,a)},i}(ae);ae.registerComponent("Spacer",bd);var gp=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+s.prototype.buildCSSClass.call(this)},n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"})},i}(bd);ae.registerComponent("CustomControlSpacer",gp);var Qa=function(s){K(i,s);function i(){return s.apply(this,arguments)||this}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},i}(ae);Qa.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in N()&&Qa.prototype.options_.children.splice(Qa.prototype.options_.children.length-1,0,"pictureInPictureToggle"),ae.registerComponent("ControlBar",Qa);var xd=function(s){K(i,s);function i(r,e){var t;return t=s.call(this,r,e)||this,t.on(r,"error",function(a){return t.open(a)}),t}var n=i.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+s.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},i}(gn);xd.prototype.options_=(0,Q.Z)({},gn.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ae.registerComponent("ErrorDisplay",xd);var su="vjs-text-track-settings",Sd=["#000","Black"],Ed=["#00F","Blue"],Cd=["#0FF","Cyan"],wd=["#0F0","Green"],Ad=["#F0F","Magenta"],Pd=["#F00","Red"],Id=["#FFF","White"],kd=["#FF0","Yellow"],ou=["1","Opaque"],uu=["0.5","Semi-Transparent"],Dd=["0","Transparent"],jr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Sd,Id,Pd,wd,Ed,kd,Ad,Cd]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ou,uu,Dd]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Id,Sd,Pd,wd,Ed,kd,Ad,Cd]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(i){return i==="1.00"?null:Number(i)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ou,uu]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Dd,uu,ou]}};jr.windowColor.options=jr.backgroundColor.options;function Od(s,i){if(i&&(s=i(s)),s&&s!=="none")return s}function vp(s,i){var n=s.options[s.options.selectedIndex].value;return Od(n,i)}function _p(s,i,n){if(!!i){for(var r=0;r<s.options.length;r++)if(Od(s.options[r].value,n)===i){s.selectedIndex=r;break}}}var yp=function(s){K(i,s);function i(r,e){var t;return e.temporary=!1,t=s.call(this,r,e)||this,t.updateDisplay=t.updateDisplay.bind((0,J.Z)(t)),t.fill(),t.hasBeenOpened_=t.hasBeenFilled_=!0,t.endDialog=Je("p",{className:"vjs-control-text",textContent:t.localize("End of dialog window.")}),t.el().appendChild(t.endDialog),t.setDefaults(),e.persistTextTrackSettings===void 0&&(t.options_.persistTextTrackSettings=t.options_.playerOptions.persistTextTrackSettings),t.on(t.$(".vjs-done-button"),"click",function(){t.saveSettings(),t.close()}),t.on(t.$(".vjs-default-button"),"click",function(){t.setDefaults(),t.updateDisplay()}),un(jr,function(a){t.on(t.$(a.selector),"change",t.updateDisplay)}),t.options_.persistTextTrackSettings&&t.restoreSettings(),t}var n=i.prototype;return n.dispose=function(){this.endDialog=null,s.prototype.dispose.call(this)},n.createElSelect_=function(e,t,a){var o=this;t===void 0&&(t=""),a===void 0&&(a="label");var u=jr[e],l=u.id.replace("%s",this.id_),c=[t,l].join(" ").trim();return["<"+a+' id="'+l+'" class="'+(a==="label"?"vjs-label":"")+'">',this.localize(u.label),"</"+a+">",'<select aria-labelledby="'+c+'">'].concat(u.options.map(function(g){var m=l+"-"+g[1].replace(/\W+/g,"");return['<option id="'+m+'" value="'+g[0]+'" ','aria-labelledby="'+c+" "+m+'">',o.localize(g[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return Je("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return Je("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return Je("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return s.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e=this;return oh(jr,function(t,a,o){var u=vp(e.$(a.selector),a.parser);return u!==void 0&&(t[o]=u),t},{})},n.setValues=function(e){var t=this;un(jr,function(a,o){_p(t.$(a.selector),e[o],a.parser)})},n.setDefaults=function(){var e=this;un(jr,function(t){var a=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=a})},n.restoreSettings=function(){var e;try{e=JSON.parse(x().localStorage.getItem(su))}catch(t){$e.warn(t)}e&&this.setValues(e)},n.saveSettings=function(){if(!!this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?x().localStorage.setItem(su,JSON.stringify(e)):x().localStorage.removeItem(su)}catch(t){$e.warn(t)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,a=e&&e.captionsButton;t?t.focus():a&&a.focus()},i}(gn);ae.registerComponent("TextTrackSettings",yp);var Tp=function(s){K(i,s);function i(r,e){var t,a=e.ResizeObserver||x().ResizeObserver;e.ResizeObserver===null&&(a=!1);var o=_t({createEl:!a,reportTouchActivity:!1},e);return t=s.call(this,r,o)||this,t.ResizeObserver=e.ResizeObserver||x().ResizeObserver,t.loadListener_=null,t.resizeObserver_=null,t.debouncedHandler_=_h(function(){t.resizeHandler()},100,!1,(0,J.Z)(t)),a?(t.resizeObserver_=new t.ResizeObserver(t.debouncedHandler_),t.resizeObserver_.observe(r.el())):(t.loadListener_=function(){if(!(!t.el_||!t.el_.contentWindow)){var u=t.debouncedHandler_,l=t.unloadListener_=function(){Yt(this,"resize",u),Yt(this,"unload",l),l=null};vi(t.el_.contentWindow,"unload",l),vi(t.el_.contentWindow,"resize",u)}},t.one("load",t.loadListener_)),t}var n=i.prototype;return n.createEl=function(){return s.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},n.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,s.prototype.dispose.call(this)},i}(ae);ae.registerComponent("ResizeManager",Tp);var bp={trackingThreshold:20,liveTolerance:15},xp=function(s){K(i,s);function i(r,e){var t,a=_t(bp,e,{createEl:!1});return t=s.call(this,r,a)||this,t.handleVisibilityChange_=function(o){return t.handleVisibilityChange(o)},t.trackLiveHandler_=function(){return t.trackLive_()},t.handlePlay_=function(o){return t.handlePlay(o)},t.handleFirstTimeupdate_=function(o){return t.handleFirstTimeupdate(o)},t.handleSeeked_=function(o){return t.handleSeeked(o)},t.seekToLiveEdge_=function(o){return t.seekToLiveEdge(o)},t.reset_(),t.on(t.player_,"durationchange",function(o){return t.handleDurationchange(o)}),t.on(t.player_,"canplay",function(){return t.toggleTracking()}),Yn&&"hidden"in N()&&"visibilityState"in N()&&t.on(N(),"visibilitychange",t.handleVisibilityChange_),t}var n=i.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(N().hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e=this.player_.seekable();if(!(!e||!e.length)){var t=Number(x().performance.now().toFixed(4)),a=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+a;var o=this.liveCurrentTime(),u=this.player_.currentTime(),l=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-u)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(l=!1),l!==this.behindLiveEdge_&&(this.behindLiveEdge_=l,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Mi),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],a=e?e.length:0;a--;)t.push(e.end(a));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],a=e?e.length:0;a--;)t.push(e.start(a));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return typeof this.trackingInterval_=="number"},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(N(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),s.prototype.dispose.call(this)},i}(ae);ae.registerComponent("LiveTracker",xp);var lu=function(i){var n=i.el();if(n.hasAttribute("src"))return i.triggerSourceset(n.src),!0;var r=i.$$("source"),e=[],t="";if(!r.length)return!1;for(var a=0;a<r.length;a++){var o=r[a].src;o&&e.indexOf(o)===-1&&e.push(o)}return e.length?(e.length===1&&(t=e[0]),i.triggerSourceset(t),!0):!1},Sp=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(i){var n=N().createElement(this.nodeName.toLowerCase());n.innerHTML=i;for(var r=N().createDocumentFragment();n.childNodes.length;)r.appendChild(n.childNodes[0]);return this.innerText="",x().Element.prototype.appendChild.call(this,r),this.innerHTML}}),Ld=function(i,n){for(var r={},e=0;e<i.length&&(r=Object.getOwnPropertyDescriptor(i[e],n),!(r&&r.set&&r.get));e++);return r.enumerable=!0,r.configurable=!0,r},Ep=function(i){return Ld([i.el(),x().HTMLMediaElement.prototype,x().Element.prototype,Sp],"innerHTML")},Md=function(i){var n=i.el();if(!n.resetSourceWatch_){var r={},e=Ep(i),t=function(o){return function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var g=o.apply(n,l);return lu(i),g}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){!n[a]||(r[a]=n[a],n[a]=t(r[a]))}),Object.defineProperty(n,"innerHTML",_t(e,{set:t(e.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(r).forEach(function(a){n[a]=r[a]}),Object.defineProperty(n,"innerHTML",e)},i.one("sourceset",n.resetSourceWatch_)}},Cp=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Gl(x().Element.prototype.getAttribute.call(this,"src")):""},set:function(i){return x().Element.prototype.setAttribute.call(this,"src",i),i}}),wp=function(i){return Ld([i.el(),x().HTMLMediaElement.prototype,Cp],"src")},Ap=function(i){if(!!i.featuresSourceset){var n=i.el();if(!n.resetSourceset_){var r=wp(i),e=n.setAttribute,t=n.load;Object.defineProperty(n,"src",_t(r,{set:function(o){var u=r.set.call(n,o);return i.triggerSourceset(n.src),u}})),n.setAttribute=function(a,o){var u=e.call(n,a,o);return/src/i.test(a)&&i.triggerSourceset(n.src),u},n.load=function(){var a=t.call(n);return lu(i)||(i.triggerSourceset(""),Md(i)),a},n.currentSrc?i.triggerSourceset(n.currentSrc):lu(i)||Md(i),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=t,n.setAttribute=e,Object.defineProperty(n,"src",r),n.resetSourceWatch_&&n.resetSourceWatch_()}}}},du=function(i,n,r,e){e===void 0&&(e=!0);var t=function(u){return Object.defineProperty(i,n,{value:u,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var u=r();return t(u),u}};return e&&(a.set=t),Object.defineProperty(i,n,a)},Pe=function(s){K(i,s);function i(r,e){var t;t=s.call(this,r,e)||this;var a=r.source,o=!1;if(t.featuresVideoFrameCallback=t.featuresVideoFrameCallback&&t.el_.tagName==="VIDEO",a&&(t.el_.currentSrc!==a.src||r.tag&&r.tag.initNetworkState_===3)?t.setSource(a):t.handleLateInit_(t.el_),r.enableSourceset&&t.setupSourcesetHandling_(),t.isScrubbing_=!1,t.el_.hasChildNodes()){for(var u=t.el_.childNodes,l=u.length,c=[];l--;){var g=u[l],m=g.nodeName.toLowerCase();m==="track"&&(t.featuresNativeTextTracks?(t.remoteTextTrackEls().addTrackElement_(g),t.remoteTextTracks().addTrack(g.track),t.textTracks().addTrack(g.track),!o&&!t.el_.hasAttribute("crossorigin")&&Ga(g.src)&&(o=!0)):c.push(g))}for(var T=0;T<c.length;T++)t.el_.removeChild(c[T])}return t.proxyNativeTracks_(),t.featuresNativeTextTracks&&o&&$e.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),t.restoreMetadataTracksInIOSNativePlayer_(),(ln||yo||cl)&&r.nativeControlsForTouch===!0&&t.setControls(!0),t.proxyWebkitFullscreen_(),t.triggerReady(),t}var n=i.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),i.disposeMediaElement(this.el_),this.options_=null,s.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){Ap(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t,a=function(){t=[];for(var l=0;l<e.length;l++){var c=e[l];c.kind==="metadata"&&t.push({track:c,storedMode:c.mode})}};a(),e.addEventListener("change",a),this.on("dispose",function(){return e.removeEventListener("change",a)});var o=function u(){for(var l=0;l<t.length;l++){var c=t[l];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}e.removeEventListener("change",u)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",a),e.removeEventListener("change",o),e.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",a),e.addEventListener("change",a),e.removeEventListener("change",o)})},n.overrideNative_=function(e,t){var a=this;if(t===this["featuresNative"+e+"Tracks"]){var o=e.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(u){var l=a.el()[o+"Tracks"];l.removeEventListener(u,a[o+"TracksListeners_"][u])}),this["featuresNative"+e+"Tracks"]=!t,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,a=Ei[e],o=this.el()[a.getterName],u=this[a.getterName]();if(!(!this["featuresNative"+a.capitalName+"Tracks"]||!o||!o.addEventListener)){var l={change:function(m){var T={type:"change",target:u,currentTarget:u,srcElement:u};u.trigger(T),e==="text"&&t[yn.remoteText.getterName]().trigger(T)},addtrack:function(m){u.addTrack(m.track)},removetrack:function(m){u.removeTrack(m.track)}},c=function(){for(var m=[],T=0;T<u.length;T++){for(var E=!1,C=0;C<o.length;C++)if(o[C]===u[T]){E=!0;break}E||m.push(u[T])}for(;m.length;)u.removeTrack(m.shift())};this[a.getterName+"Listeners_"]=l,Object.keys(l).forEach(function(g){var m=l[g];o.addEventListener(g,m),t.on("dispose",function(T){return o.removeEventListener(g,m)})}),this.on("loadstart",c),this.on("dispose",function(g){return t.off("loadstart",c)})}},n.proxyNativeTracks_=function(){var e=this;Ei.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},n.createEl=function(){var e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),i.disposeMediaElement(e),e=t}else{e=N().createElement("video");var a=this.options_.tag&&ur(this.options_.tag),o=_t({},a);(!ln||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,Tl(e,It(o,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload!="undefined"&&fn(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var u=["loop","muted","playsinline","autoplay"],l=0;l<u.length;l++){var c=u[l],g=this.options_[c];typeof g!="undefined"&&(g?fn(e,c,c):Na(e,c),e[c]=g)}return e},n.handleLateInit_=function(e){if(!(e.networkState===0||e.networkState===3)){if(e.readyState===0){var t=!1,a=function(){t=!0};this.on("loadstart",a);var o=function(){t||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",o),t||this.trigger("loadstart")});return}var u=["loadstart"];u.push("loadedmetadata"),e.readyState>=2&&u.push("loadeddata"),e.readyState>=3&&u.push("canplay"),e.readyState>=4&&u.push("canplaythrough"),this.ready(function(){u.forEach(function(l){this.trigger(l)},this)})}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Ra?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){$e(t,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;if(this.el_.duration===1/0&&ar&&sr&&this.el_.currentTime===0){var t=function a(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",a))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){e.off("webkitbeginfullscreen",a),e.off("webkitendfullscreen",t)})}},n.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var e=x().navigator&&x().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)qi(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},n.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):s.prototype.requestVideoFrameCallback.call(this,e)},n.cancelVideoFrameCallback=function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):s.prototype.cancelVideoFrameCallback.call(this,e)},n.src=function(e){if(e===void 0)return this.el_.src;this.setSrc(e)},n.reset=function(){i.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(e,t,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,a):s.prototype.addTextTrack.call(this,e,t,a)},n.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return s.prototype.createRemoteTextTrack.call(this,e);var t=N().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},n.addRemoteTextTrack=function(e,t){var a=s.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(a),a},n.removeRemoteTextTrack=function(e){if(s.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),a=t.length;a--;)(e===t[a]||e===t[a].track)&&this.el().removeChild(t[a])},n.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var e={};return typeof this.el().webkitDroppedFrameCount!="undefined"&&typeof this.el().webkitDecodedFrameCount!="undefined"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),x().performance&&typeof x().performance.now=="function"?e.creationTime=x().performance.now():x().performance&&x().performance.timing&&typeof x().performance.timing.navigationStart=="number"&&(e.creationTime=x().Date.now()-x().performance.timing.navigationStart),e},i}(ct);du(Pe,"TEST_VID",function(){if(!!dn()){var s=N().createElement("video"),i=N().createElement("track");return i.kind="captions",i.srclang="en",i.label="English",s.appendChild(i),s}}),Pe.isSupported=function(){try{Pe.TEST_VID.volume=.5}catch(s){return!1}return!!(Pe.TEST_VID&&Pe.TEST_VID.canPlayType)},Pe.canPlayType=function(s){return Pe.TEST_VID.canPlayType(s)},Pe.canPlaySource=function(s,i){return Pe.canPlayType(s.type)},Pe.canControlVolume=function(){try{var s=Pe.TEST_VID.volume;Pe.TEST_VID.volume=s/2+.1;var i=s!==Pe.TEST_VID.volume;return i&&ri?(x().setTimeout(function(){Pe&&Pe.prototype&&(Pe.prototype.featuresVolumeControl=s!==Pe.TEST_VID.volume)}),!1):i}catch(n){return!1}},Pe.canMuteVolume=function(){try{var s=Pe.TEST_VID.muted;return Pe.TEST_VID.muted=!s,Pe.TEST_VID.muted?fn(Pe.TEST_VID,"muted","muted"):Na(Pe.TEST_VID,"muted","muted"),s!==Pe.TEST_VID.muted}catch(i){return!1}},Pe.canControlPlaybackRate=function(){if(ar&&sr&&hl<58)return!1;try{var s=Pe.TEST_VID.playbackRate;return Pe.TEST_VID.playbackRate=s/2+.1,s!==Pe.TEST_VID.playbackRate}catch(i){return!1}},Pe.canOverrideAttributes=function(){try{var s=function(){};Object.defineProperty(N().createElement("video"),"src",{get:s,set:s}),Object.defineProperty(N().createElement("audio"),"src",{get:s,set:s}),Object.defineProperty(N().createElement("video"),"innerHTML",{get:s,set:s}),Object.defineProperty(N().createElement("audio"),"innerHTML",{get:s,set:s})}catch(i){return!1}return!0},Pe.supportsNativeTextTracks=function(){return Ra||ri&&sr},Pe.supportsNativeVideoTracks=function(){return!!(Pe.TEST_VID&&Pe.TEST_VID.videoTracks)},Pe.supportsNativeAudioTracks=function(){return!!(Pe.TEST_VID&&Pe.TEST_VID.audioTracks)},Pe.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(s){var i=s[0],n=s[1];du(Pe.prototype,i,function(){return Pe[n]()},!0)}),Pe.prototype.featuresVolumeControl=Pe.canControlVolume(),Pe.prototype.movingMediaElementInDOM=!ri,Pe.prototype.featuresFullscreenResize=!0,Pe.prototype.featuresProgressEvents=!0,Pe.prototype.featuresTimeupdateEvents=!0,Pe.prototype.featuresVideoFrameCallback=!!(Pe.TEST_VID&&Pe.TEST_VID.requestVideoFrameCallback);var Za;Pe.patchCanPlayType=function(){go>=4&&!fl&&!sr&&(Za=Pe.TEST_VID&&Pe.TEST_VID.constructor.prototype.canPlayType,Pe.TEST_VID.constructor.prototype.canPlayType=function(s){var i=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return s&&i.test(s)?"maybe":Za.call(this,s)})},Pe.unpatchCanPlayType=function(){var s=Pe.TEST_VID.constructor.prototype.canPlayType;return Za&&(Pe.TEST_VID.constructor.prototype.canPlayType=Za),s},Pe.patchCanPlayType(),Pe.disposeMediaElement=function(s){if(!!s){for(s.parentNode&&s.parentNode.removeChild(s);s.hasChildNodes();)s.removeChild(s.firstChild);s.removeAttribute("src"),typeof s.load=="function"&&function(){try{s.load()}catch(i){}}()}},Pe.resetMediaElement=function(s){if(!!s){for(var i=s.querySelectorAll("source"),n=i.length;n--;)s.removeChild(i[n]);s.removeAttribute("src"),typeof s.load=="function"&&function(){try{s.load()}catch(r){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(s){Pe.prototype[s]=function(){return this.el_[s]||this.el_.hasAttribute(s)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(s){Pe.prototype["set"+Dt(s)]=function(i){this.el_[s]=i,i?this.el_.setAttribute(s,s):this.el_.removeAttribute(s)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(s){Pe.prototype[s]=function(){return this.el_[s]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(s){Pe.prototype["set"+Dt(s)]=function(i){this.el_[s]=i}}),["pause","load","play"].forEach(function(s){Pe.prototype[s]=function(){return this.el_[s]()}}),ct.withSourceHandlers(Pe),Pe.nativeSourceHandler={},Pe.nativeSourceHandler.canPlayType=function(s){try{return Pe.TEST_VID.canPlayType(s)}catch(i){return""}},Pe.nativeSourceHandler.canHandleSource=function(s,i){if(s.type)return Pe.nativeSourceHandler.canPlayType(s.type);if(s.src){var n=Uo(s.src);return Pe.nativeSourceHandler.canPlayType("video/"+n)}return""},Pe.nativeSourceHandler.handleSource=function(s,i,n){i.setSrc(s.src)},Pe.nativeSourceHandler.dispose=function(){},Pe.registerSourceHandler(Pe.nativeSourceHandler),ct.registerTech("Html5",Pe);var Rd=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],cu={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},fu=["tiny","xsmall","small","medium","large","xlarge","huge"],Ja={};fu.forEach(function(s){var i=s.charAt(0)==="x"?"x-"+s.substring(1):s;Ja[s]="vjs-layout-"+i});var Pp={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Nt=function(s){K(i,s);function i(r,e,t){var a;if(r.id=r.id||e.id||"vjs_video_"+lr(),e=It(i.getTagSettings(r),e),e.initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if(typeof r.closest=="function"){var o=r.closest("[lang]");o&&o.getAttribute&&(e.language=o.getAttribute("lang"))}else for(var u=r;u&&u.nodeType===1;){if(ur(u).hasOwnProperty("lang")){e.language=u.getAttribute("lang");break}u=u.parentNode}if(a=s.call(this,null,e,t)||this,a.boundDocumentFullscreenChange_=function(m){return a.documentFullscreenChange_(m)},a.boundFullWindowOnEscKey_=function(m){return a.fullWindowOnEscKey(m)},a.boundUpdateStyleEl_=function(m){return a.updateStyleEl_(m)},a.boundApplyInitTime_=function(m){return a.applyInitTime_(m)},a.boundUpdateCurrentBreakpoint_=function(m){return a.updateCurrentBreakpoint_(m)},a.boundHandleTechClick_=function(m){return a.handleTechClick_(m)},a.boundHandleTechDoubleClick_=function(m){return a.handleTechDoubleClick_(m)},a.boundHandleTechTouchStart_=function(m){return a.handleTechTouchStart_(m)},a.boundHandleTechTouchMove_=function(m){return a.handleTechTouchMove_(m)},a.boundHandleTechTouchEnd_=function(m){return a.handleTechTouchEnd_(m)},a.boundHandleTechTap_=function(m){return a.handleTechTap_(m)},a.isFullscreen_=!1,a.log=ol(a.id_),a.fsApi_=Da,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=r,a.tagAttributes=r&&ur(r),a.language(a.options_.language),e.languages){var l={};Object.getOwnPropertyNames(e.languages).forEach(function(m){l[m.toLowerCase()]=e.languages[m]}),a.languages_=l}else a.languages_=i.prototype.options_.languages;a.resetCache_(),a.poster_=e.poster||"",a.controls_=!!e.controls,r.controls=!1,r.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],r.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(function(m){if(typeof a[m]!="function")throw new Error('plugin "'+m+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),Io((0,J.Z)(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(vi(N(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var c=_t(a.options_);e.plugins&&Object.keys(e.plugins).forEach(function(m){a[m](e.plugins[m])}),e.debug&&a.debug(!0),a.options_.playerOptions=c,a.middleware_=[],a.playbackRates(e.playbackRates),a.initChildren(),a.isAudio(r.nodeName.toLowerCase()==="audio"),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),ln&&a.addClass("vjs-touch-enabled"),ri||a.addClass("vjs-workinghover"),i.players[a.id_]=(0,J.Z)(a);var g=rl.split(".")[0];return a.addClass("vjs-v"+g),a.userActive(!0),a.reportUserActivity(),a.one("play",function(m){return a.listenForUserActivity_(m)}),a.on("stageclick",function(m){return a.handleStageClick_(m)}),a.on("keydown",function(m){return a.handleKeyDown(m)}),a.on("languagechange",function(m){return a.handleLanguagechange(m)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}var n=i.prototype;return n.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),Yt(N(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Yt(N(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),i.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Xh(this),si.names.forEach(function(t){var a=si[t],o=e[a.getterName]();o&&o.off&&o.off()}),s.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var e=this.tag,t,a=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";a?t=this.el_=e.parentNode:o||(t=this.el_=s.prototype.createEl.call(this,"div"));var u=ur(e);if(o){for(t=this.el_=e,e=this.tag=N().createElement("video");t.children.length;)e.appendChild(t.firstChild);Fr(t,"video-js")||or(t,"video-js"),t.appendChild(e),a=this.playerElIngest_=t,Object.keys(t).forEach(function(E){try{e[E]=t[E]}catch(C){}})}if(e.setAttribute("tabindex","-1"),u.tabindex="-1",(Yn||sr&&pl)&&(e.setAttribute("role","application"),u.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in u&&delete u.width,"height"in u&&delete u.height,Object.getOwnPropertyNames(u).forEach(function(E){o&&E==="class"||t.setAttribute(E,u[E]),o&&e.setAttribute(E,u[E])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),x().VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=kl("vjs-styles-dimensions");var l=Er(".vjs-styles-defaults"),c=Er("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var g=e.getElementsByTagName("a"),m=0;m<g.length;m++){var T=g.item(m);or(T,"vjs-hidden"),T.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!a&&e.parentNode.insertBefore(t,e),To(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");if(e!=="anonymous"&&e!=="use-credentials"){$e.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"');return}this.techCall_("setCrossOrigin",e)},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var a=e+"_";if(t===void 0)return this[a]||0;if(t===""||t==="auto"){this[a]=void 0,this.updateStyleEl_();return}var o=parseFloat(t);if(isNaN(o)){$e.error('Improper value "'+t+'" supplied for for '+e);return}this[a]=o,this.updateStyleEl_()},n.fluid=function(e){var t=this;if(e===void 0)return!!this.fluid_;this.fluid_=!!e,cr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),yh(this,function(){t.on(["playerreset","resize"],t.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(x().VIDEOJS_NO_DYNAMIC_STYLE===!0){var e=typeof this.width_=="number"?this.width_:this.options_.width,t=typeof this.height_=="number"?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(e>=0&&(a.width=e),t>=0&&(a.height=t));return}var o,u,l,c;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?l=this.aspectRatio_:this.videoWidth()>0?l=this.videoWidth()+":"+this.videoHeight():l="16:9";var g=l.split(":"),m=g[1]/g[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/m:o=this.videoWidth()||300,this.height_!==void 0?u=this.height_:u=o*m,/^[^a-zA-Z]/.test(this.id())?c="dimensions-"+this.id():c=this.id()+"-dimensions",this.addClass(c),Dl(this.styleEl_,`
      .`+c+` {
        width: `+o+`px;
        height: `+u+`px;
      }

      .`+c+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+m*100+`%;
      }
    `)},n.loadTech_=function(e,t){var a=this;this.tech_&&this.unloadTech_();var o=Dt(e),u=e.charAt(0).toLowerCase()+e.slice(1);o!=="Html5"&&this.tag&&(ct.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var l=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(l=!1);var c={source:t,autoplay:l,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+u+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};si.names.forEach(function(m){var T=si[m];c[T.getterName]=a[T.privateName]}),It(c,this.options_[o]),It(c,this.options_[u]),It(c,this.options_[e.toLowerCase()]),this.tag&&(c.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var g=ct.getTech(e);if(!g)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new g(c),this.tech_.ready(vt(this,this.handleTechReady_),!0),Vl.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Rd.forEach(function(m){a.on(a.tech_,m,function(T){return a["handleTech"+Dt(m)+"_"](T)})}),Object.keys(cu).forEach(function(m){a.on(a.tech_,m,function(T){if(a.tech_.playbackRate()===0&&a.tech_.seeking()){a.queuedCallbacks_.push({callback:a["handleTech"+cu[m]+"_"].bind(a),event:T});return}a["handleTech"+cu[m]+"_"](T)})}),this.on(this.tech_,"loadstart",function(m){return a.handleTechLoadStart_(m)}),this.on(this.tech_,"sourceset",function(m){return a.handleTechSourceset_(m)}),this.on(this.tech_,"waiting",function(m){return a.handleTechWaiting_(m)}),this.on(this.tech_,"ended",function(m){return a.handleTechEnded_(m)}),this.on(this.tech_,"seeking",function(m){return a.handleTechSeeking_(m)}),this.on(this.tech_,"play",function(m){return a.handleTechPlay_(m)}),this.on(this.tech_,"firstplay",function(m){return a.handleTechFirstPlay_(m)}),this.on(this.tech_,"pause",function(m){return a.handleTechPause_(m)}),this.on(this.tech_,"durationchange",function(m){return a.handleTechDurationChange_(m)}),this.on(this.tech_,"fullscreenchange",function(m,T){return a.handleTechFullscreenChange_(m,T)}),this.on(this.tech_,"fullscreenerror",function(m,T){return a.handleTechFullscreenError_(m,T)}),this.on(this.tech_,"enterpictureinpicture",function(m){return a.handleTechEnterPictureInPicture_(m)}),this.on(this.tech_,"leavepictureinpicture",function(m){return a.handleTechLeavePictureInPicture_(m)}),this.on(this.tech_,"error",function(m){return a.handleTechError_(m)}),this.on(this.tech_,"posterchange",function(m){return a.handleTechPosterChange_(m)}),this.on(this.tech_,"textdata",function(m){return a.handleTechTextData_(m)}),this.on(this.tech_,"ratechange",function(m){return a.handleTechRateChange_(m)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&To(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e=this;si.names.forEach(function(t){var a=si[t];e[a.privateName]=e[a.getterName]()}),this.textTracksJson_=Vl.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return e===void 0&&$e.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(!(!this.tech_||typeof e!="string")){var a=function(){var l=t.muted();t.muted(!0);var c=function(){t.muted(l)};t.playTerminatedQueue_.push(c);var g=t.play();if(!!ta(g))return g.catch(function(m){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(m||""))})},o;if(e==="any"&&!this.muted()?(o=this.play(),ta(o)&&(o=o.catch(a))):e==="muted"&&!this.muted()?o=a():o=this.play(),!!ta(o))return o.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},n.updateSourceCaches_=function(e){e===void 0&&(e="");var t=e,a="";typeof t!="string"&&(t=e.src,a=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!a&&(a=Qh(this,t)),this.cache_.source=_t({},e,{src:t,type:a});for(var o=this.cache_.sources.filter(function(T){return T.src&&T.src===t}),u=[],l=this.$$("source"),c=[],g=0;g<l.length;g++){var m=ur(l[g]);u.push(m),m.src&&m.src===t&&c.push(m.src)}c.length&&!o.length?this.cache_.sources=u:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var a=function(c){return t.updateSourceCaches_(c)},o=this.currentSource().src,u=e.src;o&&!/^blob:/.test(o)&&/^blob:/.test(u)&&(!this.lastSource_||this.lastSource_.tech!==u&&this.lastSource_.player!==o)&&(a=function(){}),a(u),e.src||this.tech_.any(["sourceset","loadstart"],function(l){if(l.type!=="sourceset"){var c=t.techGet("currentSrc");t.lastSource_.tech=c,t.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime(),a=function o(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",o))};this.on("timeupdate",a)},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&($e.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?qi(this.play()):this.pause())},n.handleTechDoubleClick_=function(e){if(!!this.controls_){var t=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(e.target)});t||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!(t&&t!==this)){var a=this.el(),o=N()[this.fsApi_.fullscreenElement]===a;!o&&a.matches?o=a.matches(":"+this.fsApi_.fullscreen):!o&&a.msMatchesSelector&&(o=a.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},n.handleTechFullscreenChange_=function(e,t){var a=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){a.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready(function(){if(e in zh)return Gh(this.middleware_,this.tech_,e,t);if(e in Zl)return Ql(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(a){throw $e(a),a}},!0)},n.techGet_=function(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in qh)return Wh(this.middleware_,this.tech_,e);if(e in Zl)return Ql(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?($e("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t):t.name==="TypeError"?($e("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t):($e(t),t)}}},n.play=function(){var e=this,t=this.options_.Promise||x().Promise;return t?new t(function(a){e.play_(a)}):this.play_()},n.play_=function(e){var t=this;e===void 0&&(e=qi),this.playCallbacks_.push(e);var a=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a){this.waitToPlay_=function(u){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!a&&(Ra||ri)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(a){a(e)})},n.pause=function(){this.techCall_("pause")},n.paused=function(){return this.techGet_("paused")!==!1},n.played=function(){return this.techGet_("played")||Br(0,0)},n.scrubbing=function(e){if(typeof e=="undefined")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){if(typeof e!="undefined"){if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return(!e||!e.length)&&(e=Br(0,0)),e},n.bufferedPercent=function(){return Bl(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),a=e.end(e.length-1);return a>t&&(a=t),a},n.volume=function(e){var t;if(e!==void 0){t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t},n.muted=function(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1},n.defaultMuted=function(e){return e!==void 0?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(e!==void 0){var t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||x().Promise;if(t){var a=this;return new t(function(o,u){function l(){a.off("fullscreenerror",g),a.off("fullscreenchange",c)}function c(){l(),o()}function g(T,E){l(),u(E)}a.one("fullscreenchange",c),a.one("fullscreenerror",g);var m=a.requestFullscreenHelper_(e);m&&(m.then(l,l),m.then(o,u))})}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t=this,a;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(a=e)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](a);return o&&o.then(function(){return t.isFullscreen(!0)},function(){return t.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||x().Promise;if(e){var t=this;return new e(function(a,o){function u(){t.off("fullscreenerror",c),t.off("fullscreenchange",l)}function l(){u(),a()}function c(m,T){u(),o(T)}t.one("fullscreenchange",l),t.one("fullscreenerror",c);var g=t.exitFullscreenHelper_();g&&(g.then(u,u),g.then(a,o))})}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=N()[this.fsApi_.exitFullscreen]();return t&&qi(t.then(function(){return e.isFullscreen(!1)})),t}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=N().documentElement.style.overflow,vi(N(),"keydown",this.boundFullWindowOnEscKey_),N().documentElement.style.overflow="hidden",or(N().body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){Z().isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Yt(N(),"keydown",this.boundFullWindowOnEscKey_),N().documentElement.style.overflow=this.docOrigOverflow,Qn(N().body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in N()&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in N())return N().exitPictureInPicture()},n.handleKeyDown=function(e){var t=this.options_.userActions;if(!(!t||!t.hotkeys)){var a=function(u){var l=u.tagName.toLowerCase();if(u.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if(l==="input")return c.indexOf(u.type)===-1;var g=["textarea"];return g.indexOf(l)!==-1};a(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},a=t.fullscreenKey,o=a===void 0?function(C){return Z().isEventKey(C,"f")}:a,u=t.muteKey,l=u===void 0?function(C){return Z().isEventKey(C,"m")}:u,c=t.playPauseKey,g=c===void 0?function(C){return Z().isEventKey(C,"k")||Z().isEventKey(C,"Space")}:c;if(o.call(this,e)){e.preventDefault(),e.stopPropagation();var m=ae.getComponent("FullscreenToggle");N()[this.fsApi_.fullscreenEnabled]!==!1&&m.prototype.handleClick.call(this,e)}else if(l.call(this,e)){e.preventDefault(),e.stopPropagation();var T=ae.getComponent("MuteToggle");T.prototype.handleClick.call(this,e)}else if(g.call(this,e)){e.preventDefault(),e.stopPropagation();var E=ae.getComponent("PlayToggle");E.prototype.handleClick.call(this,e)}},n.canPlayType=function(e){for(var t,a=0,o=this.options_.techOrder;a<o.length;a++){var u=o[a],l=ct.getTech(u);if(l||(l=ae.getComponent(u)),!l){$e.error('The "'+u+'" tech is undefined. Skipped browser support check for that tech.');continue}if(l.isSupported()&&(t=l.canPlayType(e),t))return t}return""},n.selectSource=function(e){var t=this,a=this.options_.techOrder.map(function(g){return[g,ct.getTech(g)]}).filter(function(g){var m=g[0],T=g[1];return T?T.isSupported():($e.error('The "'+m+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(m,T,E){var C;return m.some(function(P){return T.some(function(H){if(C=E(P,H),C)return!0})}),C},u,l=function(m){return function(T,E){return m(E,T)}},c=function(m,T){var E=m[0],C=m[1];if(C.canPlaySource(T,t.options_[E.toLowerCase()]))return{source:T,tech:E}};return this.options_.sourceOrder?u=o(e,a,l(c)):u=o(a,e,c),u||!1},n.handleSrc_=function(e,t){var a=this;if(typeof e=="undefined")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=Zh(e);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),Hh(this,o[0],function(c,g){a.middleware_=g,t||(a.cache_.sources=o),a.updateSourceCaches_(c);var m=a.src_(c);if(m){if(o.length>1)return a.handleSrc_(o.slice(1));a.changingSrc_=!1,a.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),a.triggerReady();return}jh(g,a.tech_)}),this.options_.retryOnError&&o.length>1){var u=function(){a.error(null),a.handleSrc_(o.slice(1),!0)},l=function(){a.off("error",u)};this.one("error",u),this.one("playing",l),this.resetRetryOnError_=function(){a.off("error",u),a.off("playing",l)}}},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t=this,a=this.selectSource([e]);return a?xh(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){t.changingSrc_=!1}),!1):!0},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||x().Promise;if(this.paused()||!t)this.doReset_();else{var a=this.play();qi(a.then(function(){return e.doReset_()}))}},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),cr(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,a=e.remainingTimeDisplay;t&&t.updateContent(),a&&a.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")},n.autoplay=function(e){if(e===void 0)return this.options_.autoplay||!1;var t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t=="undefined"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return e!==void 0?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")},n.poster=function(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(e===void 0)return this.error_||null;if(Sr("beforeerror").forEach(function(o){var u=o(t,e);if(!(nr(u)&&!Array.isArray(u)||typeof u=="string"||typeof u=="number"||u===null)){t.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=u}),this.options_.suppressNotSupportedError&&e&&e.code===4){var a=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),this.one("loadstart",function(){this.off(["click","touchstart"],a)});return}if(e===null){this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new ai(e),this.addClass("vjs-error"),$e.error("(CODE:"+this.error_.code+" "+ai.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Sr("error").forEach(function(o){return o(t,t.error_)})},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,a,o=vt(this,this.reportUserActivity),u=function(E){(E.screenX!==t||E.screenY!==a)&&(t=E.screenX,a=E.screenY,o())},l=function(){o(),this.clearInterval(e),e=this.setInterval(o,250)},c=function(E){o(),this.clearInterval(e)};this.on("mousedown",l),this.on("mousemove",u),this.on("mouseup",c),this.on("mouseleave",c);var g=this.getChild("controlBar");g&&!ri&&!ar&&(g.on("mouseenter",function(T){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),g.on("mouseleave",function(T){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var m;this.setInterval(function(){if(!!this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(m);var T=this.options_.inactivityTimeout;T<=0||(m=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},T))}},250)},n.playbackRate=function(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},n.defaultPlaybackRate=function(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),a=this.getChild("ControlBar"),o=a&&a.currentHeight();t.forEach(function(u){u!==a&&u.el_&&!u.hasClass("vjs-hidden")&&(u.hide(),e.audioOnlyCache_.hiddenChildren.push(u))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var a=this.options_.Promise||x().Promise;if(a){if(e){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),a.all(o).then(function(){return t.enableAudioOnlyUI_()})}return a.resolve().then(function(){return t.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){var e=this.tech_&&this.tech_;e.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){var e=this.tech_&&this.tech_;e.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if(typeof e!="boolean"||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var a=this.options_.Promise||x().Promise;if(a){if(e){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){t.enablePosterModeUI_()})}return a.resolve().then(function(){t.enablePosterModeUI_()})}return a.resolve().then(function(){t.disablePosterModeUI_()})}if(e){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},n.addTextTrack=function(e,t,a){if(this.tech_)return this.tech_.addTextTrack(e,t,a)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){e===void 0&&(e={});var t=e,a=t.track;if(a||(a=e),this.tech_)return this.tech_.removeRemoteTextTrack(a)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),cr(this)&&this.trigger("languagechange"))},n.languages=function(){return _t(i.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=_t(this.options_),t=e.tracks;e.tracks=[];for(var a=0;a<t.length;a++){var o=t[a];o=_t(o),o.player=void 0,e.tracks[a]=o}return e},n.createModal=function(e,t){var a=this;t=t||{},t.content=e||"";var o=new gn(this,t);return this.addChild(o),o.on("dispose",function(){a.removeChild(o)}),o.open(),o},n.updateCurrentBreakpoint_=function(){if(!!this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),a=0;a<fu.length;a++){var o=fu[a],u=this.breakpoints_[o];if(t<=u){if(e===o)return;e&&this.removeClass(Ja[e]),this.addClass(Ja[o]),this.breakpoint_=o;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return e===void 0?It(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=It({},Pp,e),this.updateCurrentBreakpoint_(),It(this.breakpoints_))},n.responsive=function(e){if(e===void 0)return this.responsive_;e=Boolean(e);var t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Ja[this.breakpoint_]||""},n.loadMedia=function(e,t){var a=this;if(!(!e||typeof e!="object")){this.reset(),this.cache_.media=_t(e);var o=this.cache_.media,u=o.artwork,l=o.poster,c=o.src,g=o.textTracks;!u&&l&&(this.cache_.media.artwork=[{src:l,type:za(l)}]),c&&this.src(c),l&&this.poster(l),Array.isArray(g)&&g.forEach(function(m){return a.addRemoteTextTrack(m,!1)}),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t=this.currentSources(),a=Array.prototype.map.call(this.remoteTextTracks(),function(u){return{kind:u.kind,label:u.label,language:u.language,src:u.src}}),o={src:t,textTracks:a};return e&&(o.poster=e,o.artwork=[{src:o.poster,type:za(o.poster)}]),o}return _t(this.cache_.media)},i.getTagSettings=function(e){var t={sources:[],tracks:[]},a=ur(e),o=a["data-setup"];if(Fr(e,"vjs-fill")&&(a.fill=!0),Fr(e,"vjs-fluid")&&(a.fluid=!0),o!==null){var u=Fe()(o||"{}"),l=u[0],c=u[1];l&&$e.error(l),It(a,c)}if(It(t,a),e.hasChildNodes())for(var g=e.childNodes,m=0,T=g.length;m<T;m++){var E=g[m],C=E.nodeName.toLowerCase();C==="source"?t.sources.push(ur(E)):C==="track"&&t.tracks.push(ur(E))}return t},n.flexNotSupported_=function(){var e=N().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(e===void 0)return this.cache_.playbackRates;!Array.isArray(e)||!e.every(function(t){return typeof t=="number"})||(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},i}(ae);si.names.forEach(function(s){var i=si[s];Nt.prototype[i.getterName]=function(){return this.tech_?this.tech_[i.getterName]():(this[i.privateName]=this[i.privateName]||new i.ListClass,this[i.privateName])}}),Nt.prototype.crossorigin=Nt.prototype.crossOrigin,Nt.players={};var aa=x().navigator;Nt.prototype.options_={techOrder:ct.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:aa&&(aa.languages&&aa.languages[0]||aa.userLanguage||aa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(s){Nt.prototype[s]=function(){return this.techGet_(s)}}),Rd.forEach(function(s){Nt.prototype["handleTech"+Dt(s)+"_"]=function(){return this.trigger(s)}}),ae.registerComponent("Player",Nt);var es="plugin",Sn="activePlugins_",En={},ts=function(i){return En.hasOwnProperty(i)},is=function(i){return ts(i)?En[i]:void 0},Nd=function(i,n){i[Sn]=i[Sn]||{},i[Sn][n]=!0},rs=function(i,n,r){var e=(r?"before":"")+"pluginsetup";i.trigger(e,n),i.trigger(e+":"+n.name,n)},Ip=function(i,n){var r=function(){rs(this,{name:i,plugin:n,instance:null},!0);var t=n.apply(this,arguments);return Nd(this,i),rs(this,{name:i,plugin:n,instance:t}),t};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r},Fd=function(i,n){return n.prototype.name=i,function(){rs(this,{name:i,plugin:n,instance:null},!0);for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var a=Se(n,[this].concat(e));return this[i]=function(){return a},rs(this,a.getEventHash()),a}},zi=function(){function s(n){if(this.constructor===s)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=n,this.log||(this.log=this.player.log.createLogger(this.name)),Io(this),delete this.trigger,Fl(this,this.constructor.defaultState),Nd(n,this.name),this.dispose=this.dispose.bind(this),n.on("dispose",this.dispose)}var i=s.prototype;return i.version=function(){return this.constructor.VERSION},i.getEventHash=function(r){return r===void 0&&(r={}),r.name=this.name,r.plugin=this.constructor,r.instance=this,r},i.trigger=function(r,e){return e===void 0&&(e={}),pn(this.eventBusEl_,r,this.getEventHash(e))},i.handleStateChanged=function(r){},i.dispose=function(){var r=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Sn][r]=!1,this.player=this.state=null,e[r]=Fd(r,En[r])},s.isBasic=function(r){var e=typeof r=="string"?is(r):r;return typeof e=="function"&&!s.prototype.isPrototypeOf(e.prototype)},s.registerPlugin=function(r,e){if(typeof r!="string")throw new Error('Illegal plugin name, "'+r+'", must be a string, was '+typeof r+".");if(ts(r))$e.warn('A plugin named "'+r+'" already exists. You may want to avoid re-registering plugins!');else if(Nt.prototype.hasOwnProperty(r))throw new Error('Illegal plugin name, "'+r+'", cannot share a name with an existing player method!');if(typeof e!="function")throw new Error('Illegal plugin for "'+r+'", must be a function, was '+typeof e+".");return En[r]=e,r!==es&&(s.isBasic(e)?Nt.prototype[r]=Ip(r,e):Nt.prototype[r]=Fd(r,e)),e},s.deregisterPlugin=function(r){if(r===es)throw new Error("Cannot de-register base plugin.");ts(r)&&(delete En[r],delete Nt.prototype[r])},s.getPlugins=function(r){r===void 0&&(r=Object.keys(En));var e;return r.forEach(function(t){var a=is(t);a&&(e=e||{},e[t]=a)}),e},s.getPluginVersion=function(r){var e=is(r);return e&&e.VERSION||""},s}();zi.getPlugin=is,zi.BASE_PLUGIN_NAME=es,zi.registerPlugin(es,zi),Nt.prototype.usingPlugin=function(s){return!!this[Sn]&&this[Sn][s]===!0},Nt.prototype.hasPlugin=function(s){return!!ts(s)};var kp=function(i,n){n===void 0&&(n={});var r=function(){i.apply(this,arguments)},e={};typeof n=="object"?(n.constructor!==Object.prototype.constructor&&(r=n.constructor),e=n):typeof n=="function"&&(r=n),(0,Le.Z)(r,i),i&&(r.super_=i);for(var t in e)e.hasOwnProperty(t)&&(r.prototype[t]=e[t]);return r},Ud=function(i){return i.indexOf("#")===0?i.slice(1):i};function U(s,i,n){var r=U.getPlayer(s);if(r)return i&&$e.warn('Player "'+s+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var e=typeof s=="string"?Er("#"+Ud(s)):s;if(!cn(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!e.ownerDocument.defaultView||!e.ownerDocument.body.contains(e))&&$e.warn("The element supplied is not included in the DOM"),i=i||{},i.restoreEl===!0&&(i.restoreEl=(e.parentNode&&e.parentNode.hasAttribute("data-vjs-player")?e.parentNode:e).cloneNode(!0)),Sr("beforesetup").forEach(function(a){var o=a(e,_t(i));if(!nr(o)||Array.isArray(o)){$e.error("please return an object in beforesetup hooks");return}i=_t(i,o)});var t=ae.getComponent("Player");return r=new t(e,i,n),Sr("setup").forEach(function(a){return a(r)}),r}if(U.hooks_=rr,U.hooks=Sr,U.hook=rh,U.hookOnce=nh,U.removeHook=nl,x().VIDEOJS_NO_DYNAMIC_STYLE!==!0&&dn()){var ns=Er(".vjs-styles-defaults");if(!ns){ns=kl("vjs-styles-defaults");var hu=Er("head");hu&&hu.insertBefore(ns,hu.firstChild),Dl(ns,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}Eo(1,U),U.VERSION=rl,U.options=Nt.prototype.options_,U.getPlayers=function(){return Nt.players},U.getPlayer=function(s){var i=Nt.players,n;if(typeof s=="string"){var r=Ud(s),e=i[r];if(e)return e;n=Er("#"+r)}else n=s;if(cn(n)){var t=n,a=t.player,o=t.playerId;if(a||i[o])return a||i[o]}},U.getAllPlayers=function(){return Object.keys(Nt.players).map(function(s){return Nt.players[s]}).filter(Boolean)},U.players=Nt.players,U.getComponent=ae.getComponent,U.registerComponent=function(s,i){ct.isTech(i)&&$e.warn("The "+s+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),ae.registerComponent.call(ae,s,i)},U.getTech=ct.getTech,U.registerTech=ct.registerTech,U.use=Vh,Object.defineProperty(U,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(U.middleware,"TERMINATOR",{value:qa,writeable:!1,enumerable:!0}),U.browser=dh,U.TOUCH_ENABLED=ln,U.extend=kp,U.mergeOptions=_t,U.bind=vt,U.registerPlugin=zi.registerPlugin,U.deregisterPlugin=zi.deregisterPlugin,U.plugin=function(s,i){return $e.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),zi.registerPlugin(s,i)},U.getPlugins=zi.getPlugins,U.getPlugin=zi.getPlugin,U.getPluginVersion=zi.getPluginVersion,U.addLanguage=function(s,i){var n;return s=(""+s).toLowerCase(),U.options.languages=_t(U.options.languages,(n={},n[s]=i,n)),U.options.languages[s]},U.log=$e,U.createLogger=ol,U.createTimeRange=U.createTimeRanges=Br,U.formatTime=Tn,U.setFormatTime=ap,U.resetFormatTime=sp,U.parseUrl=Fo,U.isCrossOrigin=Ga,U.EventTarget=jt,U.on=vi,U.one=Va,U.off=Yt,U.trigger=pn,U.xhr=et(),U.TextTrack=ia,U.AudioTrack=Kl,U.VideoTrack=Xl,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(s){U[s]=function(){return $e.warn("videojs."+s+"() is deprecated; use videojs.dom."+s+"() instead"),Pl[s].apply(null,arguments)}}),U.computedStyle=Xn,U.dom=Pl,U.url=Nh,U.defineLazyProperty=du,U.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Ni=We,as=function(i,n,r){return i&&r&&r.responseURL&&n!==r.responseURL?r.responseURL:n},Fi=function(i){return U.log.debug?U.log.debug.bind(U,"VHS:",i+" >"):function(){}},Cr=1/30,Ki=Cr*3,Bd=function(i,n){var r=[],e;if(i&&i.length)for(e=0;e<i.length;e++)n(i.start(e),i.end(e))&&r.push([i.start(e),i.end(e)]);return U.createTimeRanges(r)},Cn=function(i,n){return Bd(i,function(r,e){return r-Ki<=n&&e+Ki>=n})},ss=function(i,n){return Bd(i,function(r){return r-Cr>=n})},Dp=function(i){if(i.length<2)return U.createTimeRanges();for(var n=[],r=1;r<i.length;r++){var e=i.end(r-1),t=i.start(r);n.push([e,t])}return U.createTimeRanges(n)},Op=function(i,n){var r=null,e=null,t=0,a=[],o=[];if(!i||!i.length||!n||!n.length)return U.createTimeRange();for(var u=i.length;u--;)a.push({time:i.start(u),type:"start"}),a.push({time:i.end(u),type:"end"});for(u=n.length;u--;)a.push({time:n.start(u),type:"start"}),a.push({time:n.end(u),type:"end"});for(a.sort(function(l,c){return l.time-c.time}),u=0;u<a.length;u++)a[u].type==="start"?(t++,t===2&&(r=a[u].time)):a[u].type==="end"&&(t--,t===1&&(e=a[u].time)),r!==null&&e!==null&&(o.push([r,e]),r=null,e=null);return U.createTimeRanges(o)},Vd=function(i){var n=[];if(!i||!i.length)return"";for(var r=0;r<i.length;r++)n.push(i.start(r)+" => "+i.end(r));return n.join(", ")},Lp=function(i,n,r){r===void 0&&(r=1);var e=i.length?i.end(i.length-1):0;return(e-n)/r},Wr=function(i){for(var n=[],r=0;r<i.length;r++)n.push({start:i.start(r),end:i.end(r)});return n},Mp=function(i,n){if(i===n)return!1;if(!i&&n||!n&&i||i.length!==n.length)return!0;for(var r=0;r<i.length;r++)if(i.start(r)!==n.start(r)||i.end(r)!==n.end(r))return!0;return!1},Hd=function(i){if(!(!i||!i.length||!i.end))return i.end(i.length-1)},pu=function(i,n){var r=0;if(!i||!i.length)return r;for(var e=0;e<i.length;e++){var t=i.start(e),a=i.end(e);if(!(n>a)){if(n>t&&n<=a){r+=a-n;continue}r+=a-t}}return r},jd=U.createTimeRange,mu=function(i,n){if(!n.preload)return n.duration;var r=0;return(n.parts||[]).forEach(function(e){r+=e.duration}),(n.preloadHints||[]).forEach(function(e){e.type==="PART"&&(r+=i.partTargetDuration)}),r},gu=function(i){return(i.segments||[]).reduce(function(n,r,e){return r.parts?r.parts.forEach(function(t,a){n.push({duration:t.duration,segmentIndex:e,partIndex:a,part:t,segment:r})}):n.push({duration:r.duration,segmentIndex:e,partIndex:null,segment:r,part:null}),n},[])},Wd=function(i){var n=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return n&&n.parts||[]},Gd=function(i){var n=i.preloadSegment;if(!!n){var r=n.parts,e=n.preloadHints,t=(e||[]).reduce(function(a,o){return a+(o.type==="PART"?1:0)},0);return t+=r&&r.length?r.length:0,t}},qd=function(i,n){if(n.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;var r=Wd(n).length>0;return r&&n.serverControl&&n.serverControl.partHoldBack?n.serverControl.partHoldBack:r&&n.partTargetDuration?n.partTargetDuration*3:n.serverControl&&n.serverControl.holdBack?n.serverControl.holdBack:n.targetDuration?n.targetDuration*3:0},Rp=function(i,n){var r=0,e=n-i.mediaSequence,t=i.segments[e];if(t){if(typeof t.start!="undefined")return{result:t.start,precise:!0};if(typeof t.end!="undefined")return{result:t.end-t.duration,precise:!0}}for(;e--;){if(t=i.segments[e],typeof t.end!="undefined")return{result:r+t.end,precise:!0};if(r+=mu(i,t),typeof t.start!="undefined")return{result:r+t.start,precise:!0}}return{result:r,precise:!1}},Np=function(i,n){for(var r=0,e,t=n-i.mediaSequence;t<i.segments.length;t++){if(e=i.segments[t],typeof e.start!="undefined")return{result:e.start-r,precise:!0};if(r+=mu(i,e),typeof e.end!="undefined")return{result:e.end-r,precise:!0}}return{result:-1,precise:!1}},zd=function(i,n,r){if(typeof n=="undefined"&&(n=i.mediaSequence+i.segments.length),n<i.mediaSequence)return 0;var e=Rp(i,n);if(e.precise)return e.result;var t=Np(i,n);return t.precise?t.result:e.result+r},Kd=function(i,n,r){if(!i)return 0;if(typeof r!="number"&&(r=0),typeof n=="undefined"){if(i.totalDuration)return i.totalDuration;if(!i.endList)return x()[1/0]}return zd(i,n,r)},sa=function(i){var n=i.defaultDuration,r=i.durationList,e=i.startIndex,t=i.endIndex,a=0;if(e>t){var o=[t,e];e=o[0],t=o[1]}if(e<0){for(var u=e;u<Math.min(0,t);u++)a+=n;e=0}for(var l=e;l<t;l++)a+=r[l].duration;return a},Xd=function(i,n,r,e){if(!i||!i.segments)return null;if(i.endList)return Kd(i);if(n===null)return null;n=n||0;var t=zd(i,i.mediaSequence+i.segments.length,n);return r&&(e=typeof e=="number"?e:qd(null,i),t-=e),Math.max(0,t)},Fp=function(i,n,r){var e=!0,t=n||0,a=Xd(i,n,e,r);return a===null?jd():jd(t,a)},Up=function(i){for(var n=i.playlist,r=i.currentTime,e=i.startingSegmentIndex,t=i.startingPartIndex,a=i.startTime,o=i.experimentalExactManifestTimings,u=r-a,l=gu(n),c=0,g=0;g<l.length;g++){var m=l[g];if(e===m.segmentIndex&&!(typeof t=="number"&&typeof m.partIndex=="number"&&t!==m.partIndex)){c=g;break}}if(u<0){if(c>0)for(var T=c-1;T>=0;T--){var E=l[T];if(u+=E.duration,o){if(u<0)continue}else if(u+Cr<=0)continue;return{partIndex:E.partIndex,segmentIndex:E.segmentIndex,startTime:a-sa({defaultDuration:n.targetDuration,durationList:l,startIndex:c,endIndex:T})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:r}}if(c<0){for(var C=c;C<0;C++)if(u-=n.targetDuration,u<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:r};c=0}for(var P=c;P<l.length;P++){var H=l[P];if(u-=H.duration,o){if(u>0)continue}else if(u-Cr>=0)continue;return{partIndex:H.partIndex,segmentIndex:H.segmentIndex,startTime:a+sa({defaultDuration:n.targetDuration,durationList:l,startIndex:c,endIndex:P})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:r}},$d=function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},vu=function(i){return i.excludeUntil&&i.excludeUntil===1/0},os=function(i){var n=$d(i);return!i.disabled&&!n},Bp=function(i){return i.disabled},Vp=function(i){for(var n=0;n<i.segments.length;n++)if(i.segments[n].key)return!0;return!1},Yd=function(i,n){return n.attributes&&n.attributes[i]},Hp=function(i,n,r,e){if(e===void 0&&(e=0),!Yd("BANDWIDTH",r))return NaN;var t=i*r.attributes.BANDWIDTH;return(t-e*8)/n},_u=function(i,n){if(i.playlists.length===1)return!0;var r=n.attributes.BANDWIDTH||Number.MAX_VALUE;return i.playlists.filter(function(e){return os(e)?(e.attributes.BANDWIDTH||0)<r:!1}).length===0},yu=function(i,n){return!i&&!n||!i&&n||i&&!n?!1:!!(i===n||i.id&&n.id&&i.id===n.id||i.resolvedUri&&n.resolvedUri&&i.resolvedUri===n.resolvedUri||i.uri&&n.uri&&i.uri===n.uri)},Qd=function(i,n){var r=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{},e=!1;for(var t in r){for(var a in r[t])if(e=n(r[t][a]),e)break;if(e)break}return!!e},oa=function(i){if(!i||!i.playlists||!i.playlists.length){var n=Qd(i,function(a){return a.playlists&&a.playlists.length||a.uri});return n}for(var r=function(o){var u=i.playlists[o],l=u.attributes&&u.attributes.CODECS;if(l&&l.split(",").every(function(g){return Bi(g)}))return"continue";var c=Qd(i,function(g){return yu(u,g)});return c?"continue":{v:!1}},e=0;e<i.playlists.length;e++){var t=r(e);if(t!=="continue"&&typeof t=="object")return t.v}return!0},pi={liveEdgeDelay:qd,duration:Kd,seekable:Fp,getMediaInfoForTime:Up,isEnabled:os,isDisabled:Bp,isBlacklisted:$d,isIncompatible:vu,playlistEnd:Xd,isAes:Vp,hasAttribute:Yd,estimateSegmentRequestTime:Hp,isLowestEnabledRendition:_u,isAudioOnly:oa,playlistMatch:yu,segmentDurationWithParts:mu},Zd=U.log,Tu=function(i,n){return i+"-"+n},jp=function(i){var n=i.onwarn,r=i.oninfo,e=i.manifestString,t=i.customTagParsers,a=t===void 0?[]:t,o=i.customTagMappers,u=o===void 0?[]:o,l=i.experimentalLLHLS,c=new Ke;n&&c.on("warn",n),r&&c.on("info",r),a.forEach(function(C){return c.addParser(C)}),u.forEach(function(C){return c.addTagMapper(C)}),c.push(e),c.end();var g=c.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(C){g.hasOwnProperty(C)&&delete g[C]}),g.segments&&g.segments.forEach(function(C){["parts","preloadHints"].forEach(function(P){C.hasOwnProperty(P)&&delete C[P]})})),!g.targetDuration){var m=10;g.segments&&g.segments.length&&(m=g.segments.reduce(function(C,P){return Math.max(C,P.duration)},0)),n&&n("manifest has no targetDuration defaulting to "+m),g.targetDuration=m}var T=Wd(g);if(T.length&&!g.partTargetDuration){var E=T.reduce(function(C,P){return Math.max(C,P.duration)},0);n&&(n("manifest has no partTargetDuration defaulting to "+E),Zd.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),g.partTargetDuration=E}return g},ua=function(i,n){!i.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(r){if(!!i.mediaGroups[r])for(var e in i.mediaGroups[r])for(var t in i.mediaGroups[r][e]){var a=i.mediaGroups[r][e][t];n(a,r,e,t)}})},Jd=function(i){var n=i.playlist,r=i.uri,e=i.id;n.id=e,n.playlistErrors_=0,r&&(n.uri=r),n.attributes=n.attributes||{}},Wp=function(i){for(var n=i.playlists.length;n--;){var r=i.playlists[n];Jd({playlist:r,id:Tu(n,r.uri)}),r.resolvedUri=Ni(i.uri,r.uri),i.playlists[r.id]=r,i.playlists[r.uri]=r,r.attributes.BANDWIDTH||Zd.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Gp=function(i){ua(i,function(n){n.uri&&(n.resolvedUri=Ni(i.uri,n.uri))})},qp=function(i,n){var r=Tu(0,n),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:x().location.href,resolvedUri:x().location.href,playlists:[{uri:n,id:r,resolvedUri:n,attributes:{}}]};return e.playlists[r]=e.playlists[0],e.playlists[n]=e.playlists[0],e},ec=function(i,n){i.uri=n;for(var r=0;r<i.playlists.length;r++)if(!i.playlists[r].uri){var e="placeholder-uri-"+r;i.playlists[r].uri=e}var t=oa(i);ua(i,function(a,o,u,l){var c="placeholder-uri-"+o+"-"+u+"-"+l;if(!a.playlists||!a.playlists.length){if(t&&o==="AUDIO"&&!a.uri)for(var g=0;g<i.playlists.length;g++){var m=i.playlists[g];if(m.attributes&&m.attributes.AUDIO&&m.attributes.AUDIO===u)return}a.playlists=[(0,Q.Z)({},a)]}a.playlists.forEach(function(T,E){var C=Tu(E,c);T.uri?T.resolvedUri=T.resolvedUri||Ni(i.uri,T.uri):(T.uri=E===0?c:C,T.resolvedUri=T.uri),T.id=T.id||C,T.attributes=T.attributes||{},i.playlists[T.id]=T,i.playlists[T.uri]=T})}),Wp(i),Gp(i)},us=U.mergeOptions,zp=U.EventTarget,Kp=function(i,n){if(n.endList||!n.serverControl)return i;var r={};if(n.serverControl.canBlockReload){var e=n.preloadSegment,t=n.mediaSequence+n.segments.length;if(e){var a=e.parts||[],o=Gd(n)-1;o>-1&&o!==a.length-1&&(r._HLS_part=o),(o>-1||a.length)&&t--}r._HLS_msn=t}if(n.serverControl&&n.serverControl.canSkipUntil&&(r._HLS_skip=n.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var u=new(x()).URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(l){!r.hasOwnProperty(l)||u.searchParams.set(l,r[l])}),i=u.toString()}return i},Xp=function(i,n){if(!i)return n;var r=us(i,n);if(i.preloadHints&&!n.preloadHints&&delete r.preloadHints,i.parts&&!n.parts)delete r.parts;else if(i.parts&&n.parts)for(var e=0;e<n.parts.length;e++)i.parts&&i.parts[e]&&(r.parts[e]=us(i.parts[e],n.parts[e]));return!i.skipped&&n.skipped&&(r.skipped=!1),i.preload&&!n.preload&&(r.preload=!1),r},$p=function(i,n,r){var e=i.slice(),t=n.slice();r=r||0;for(var a=[],o,u=0;u<t.length;u++){var l=e[u+r],c=t[u];l?(o=l.map||o,a.push(Xp(l,c))):(o&&!c.map&&(c.map=o),a.push(c))}return a},tc=function(i,n){!i.resolvedUri&&i.uri&&(i.resolvedUri=Ni(n,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=Ni(n,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=Ni(n,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=Ni(n,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(function(r){r.resolvedUri||(r.resolvedUri=Ni(n,r.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(function(r){r.resolvedUri||(r.resolvedUri=Ni(n,r.uri))})},ic=function(i){var n=i.segments||[],r=i.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints){for(var e=0;e<r.preloadHints.length;e++)if(r.preloadHints[e].type==="MAP")return n}r.duration=i.targetDuration,r.preload=!0,n.push(r)}return n},rc=function(i,n){return i===n||i.segments&&n.segments&&i.segments.length===n.segments.length&&i.endList===n.endList&&i.mediaSequence===n.mediaSequence&&i.preloadSegment===n.preloadSegment},bu=function(i,n,r){r===void 0&&(r=rc);var e=us(i,{}),t=e.playlists[n.id];if(!t||r(t,n))return null;n.segments=ic(n);var a=us(t,n);if(a.preloadSegment&&!n.preloadSegment&&delete a.preloadSegment,t.segments){if(n.skip){n.segments=n.segments||[];for(var o=0;o<n.skip.skippedSegments;o++)n.segments.unshift({skipped:!0})}a.segments=$p(t.segments,n.segments,n.mediaSequence-t.mediaSequence)}a.segments.forEach(function(l){tc(l,a.resolvedUri)});for(var u=0;u<e.playlists.length;u++)e.playlists[u].id===n.id&&(e.playlists[u]=a);return e.playlists[n.id]=a,e.playlists[n.uri]=a,ua(i,function(l,c,g,m){if(!!l.playlists)for(var T=0;T<l.playlists.length;T++)n.id===l.playlists[T].id&&(l.playlists[T]=a)}),e},xu=function(i,n){var r=i.segments||[],e=r[r.length-1],t=e&&e.parts&&e.parts[e.parts.length-1],a=t&&t.duration||e&&e.duration;return n&&a?a*1e3:(i.partTargetDuration||i.targetDuration||10)*500},wn=function(s){K(i,s);function i(r,e,t){var a;if(t===void 0&&(t={}),a=s.call(this)||this,!r)throw new Error("A non-empty playlist URL or object is required");a.logger_=Fi("PlaylistLoader");var o=t,u=o.withCredentials,l=u===void 0?!1:u,c=o.handleManifestRedirects,g=c===void 0?!1:c;a.src=r,a.vhs_=e,a.withCredentials=l,a.handleManifestRedirects=g;var m=e.options_;return a.customTagParsers=m&&m.customTagParsers||[],a.customTagMappers=m&&m.customTagMappers||[],a.experimentalLLHLS=m&&m.experimentalLLHLS||!1,U.browser.IE_VERSION&&(a.experimentalLLHLS=!1),a.state="HAVE_NOTHING",a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind((0,J.Z)(a)),a.on("mediaupdatetimeout",a.handleMediaupdatetimeout_),a}var n=i.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if(this.state==="HAVE_METADATA"){var t=this.media(),a=Ni(this.master.uri,t.uri);this.experimentalLLHLS&&(a=Kp(a,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},function(o,u){if(!!e.request){if(o)return e.playlistRequestError(e.request,e.media(),"HAVE_METADATA");e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}})}},n.playlistRequestError=function(e,t,a){var o=t.uri,u=t.id;this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[u],status:e.status,message:"HLS playlist request error at URL: "+o+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,a=e.url,o=e.manifestString;return jp({onwarn:function(l){var c=l.message;return t.logger_("m3u8-parser warn for "+a+": "+c)},oninfo:function(l){var c=l.message;return t.logger_("m3u8-parser info for "+a+": "+c)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,a=e.playlistObject,o=e.url,u=e.id;this.request=null,this.state="HAVE_METADATA";var l=a||this.parseManifest_({url:o,manifestString:t});l.lastRequest=Date.now(),Jd({playlist:l,uri:o,id:u});var c=bu(this.master,l);this.targetDuration=l.partTargetDuration||l.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[u]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(xu(this.media(),!!c)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),x().clearTimeout(this.mediaUpdateTimeout),x().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var a=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(x().clearTimeout(this.finalRenditionTimeout),t){var o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=x().setTimeout(this.media.bind(this,e,!1),o);return}var u=this.state,l=!this.media_||e.id!==this.media_.id,c=this.master.playlists[e.id];if(c&&c.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,l&&(this.trigger("mediachanging"),u==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(xu(e,!0)),!!l){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(g,m){if(!!a.request){if(e.lastRequest=Date.now(),e.resolvedUri=as(a.handleManifestRedirects,e.resolvedUri,m),g)return a.playlistRequestError(a.request,e,u);a.haveMetadata({playlistString:m.responseText,url:e.uri,id:e.id}),u==="HAVE_MASTER"?a.trigger("loadedmetadata"):a.trigger("mediachange")}})}},n.pause=function(){this.mediaUpdateTimeout&&(x().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(x().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var a=this.media();if(e){var o=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=x().setTimeout(function(){t.mediaUpdateTimeout=null,t.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(x().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=x().setTimeout(function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)},e))},n.start=function(){var e=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=x().location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){e.setupInitialPlaylist(e.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(t,a){if(!!e.request){if(e.request=null,t)return e.error={status:a.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:a.responseText,code:2},e.state==="HAVE_NOTHING"&&(e.started=!1),e.trigger("error");e.src=as(e.handleManifestRedirects,e.src,a);var o=e.parseManifest_({manifestString:a.responseText,url:e.src});e.setupInitialPlaylist(o)}})},n.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists){this.master=e,ec(this.master,this.srcUri()),e.playlists.forEach(function(a){a.segments=ic(a),a.segments.forEach(function(o){tc(o,a.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var t=this.srcUri()||x().location.href;this.master=qp(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},i}(zp),Yp=U.xhr,Qp=U.mergeOptions,Su=function(i,n,r,e){var t=i.responseType==="arraybuffer"?i.response:i.responseText;!n&&t&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=t.byteLength||t.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),r.headers&&(i.responseHeaders=r.headers),n&&n.code==="ETIMEDOUT"&&(i.timedout=!0),!n&&!i.aborted&&r.statusCode!==200&&r.statusCode!==206&&r.statusCode!==0&&(n=new Error("XHR Failed with a response of: "+(i&&(t||i.responseText)))),e(n,i)},nc=function(){var i=function n(r,e){r=Qp({timeout:45e3},r);var t=n.beforeRequest||U.Vhs.xhr.beforeRequest;if(t&&typeof t=="function"){var a=t(r);a&&(r=a)}var o=U.Vhs.xhr.original===!0?Yp:U.Vhs.xhr,u=o(r,function(c,g){return Su(u,c,g,e)}),l=u.abort;return u.abort=function(){return u.aborted=!0,l.apply(u,arguments)},u.uri=r.uri,u.requestTime=Date.now(),u};return i.original=!0,i},Zp=function(i){var n,r=i.offset;return typeof i.offset=="bigint"||typeof i.length=="bigint"?n=x().BigInt(i.offset)+x().BigInt(i.length)-x().BigInt(1):n=i.offset+i.length-1,"bytes="+r+"-"+n},Eu=function(i){var n={};return i.byterange&&(n.Range=Zp(i.byterange)),n},Jp=function(i,n){return i.start(n)+"-"+i.end(n)},em=function(i,n){var r=i.toString(16);return"00".substring(0,2-r.length)+r+(n%2?" ":"")},tm=function(i){return i>=32&&i<126?String.fromCharCode(i):"."},ac=function(i){var n={};return Object.keys(i).forEach(function(r){var e=i[r];vr(e)?n[r]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:n[r]=e}),n},ls=function(i){var n=i.byterange||{length:1/0,offset:0};return[n.length,n.offset,i.resolvedUri].join(",")},sc=function(i){return i.resolvedUri},oc=function(i){for(var n=Array.prototype.slice.call(i),r=16,e="",t,a,o=0;o<n.length/r;o++)t=n.slice(o*r,o*r+r).map(em).join(""),a=n.slice(o*r,o*r+r).map(tm).join(""),e+=t+" "+a+`
`;return e},im=function(i){var n=i.bytes;return oc(n)},rm=function(i){var n="",r;for(r=0;r<i.length;r++)n+=Jp(i,r)+" ";return n},nm=Object.freeze({__proto__:null,createTransferableMessage:ac,initSegmentId:ls,segmentKeyId:sc,hexDump:oc,tagDump:im,textRanges:rm}),uc=.25,am=function(i,n){if(!n.dateTimeObject)return null;var r=n.videoTimingInfo.transmuxerPrependedSeconds,e=n.videoTimingInfo.transmuxedPresentationStart,t=e+r,a=i-t;return new Date(n.dateTimeObject.getTime()+a*1e3)},sm=function(i){return i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds},om=function(i,n){var r;try{r=new Date(i)}catch(g){return null}if(!n||!n.segments||n.segments.length===0)return null;var e=n.segments[0];if(r<e.dateTimeObject)return null;for(var t=0;t<n.segments.length-1;t++){e=n.segments[t];var a=n.segments[t+1].dateTimeObject;if(r<a)break}var o=n.segments[n.segments.length-1],u=o.dateTimeObject,l=o.videoTimingInfo?sm(o.videoTimingInfo):o.duration+o.duration*uc,c=new Date(u.getTime()+l*1e3);return r>c?null:(r>u&&(e=o),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:pi.duration(n,n.mediaSequence+n.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})},um=function(i,n){if(!n||!n.segments||n.segments.length===0)return null;for(var r=0,e,t=0;t<n.segments.length&&(e=n.segments[t],r=e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:r+e.duration,!(i<=r));t++);var a=n.segments[n.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>r){if(i>r+a.duration*uc)return null;e=a}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:r-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}},lm=function(i,n){var r,e;try{r=new Date(i),e=new Date(n)}catch(o){}var t=r.getTime(),a=e.getTime();return(a-t)/1e3},dm=function(i){if(!i.segments||i.segments.length===0)return!1;for(var n=0;n<i.segments.length;n++){var r=i.segments[n];if(!r.dateTimeObject)return!1}return!0},cm=function(i){var n=i.playlist,r=i.time,e=r===void 0?void 0:r,t=i.callback;if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});var a=um(e,n);if(!a)return t({message:"valid programTime was not found"});if(a.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:e},u=am(e,a.segment);return u&&(o.programDateTime=u.toISOString()),t(null,o)},fm=function s(i){var n=i.programTime,r=i.playlist,e=i.retryCount,t=e===void 0?2:e,a=i.seekTo,o=i.pauseAfterSeek,u=o===void 0?!0:o,l=i.tech,c=i.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof n=="undefined"||!r||!a)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!dm(r))return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var g=om(n,r);if(!g)return c({message:n+" was not found in the stream"});var m=g.segment,T=lm(m.dateTimeObject,n);if(g.type==="estimate"){if(t===0)return c({message:n+" is not buffered yet. Try again"});a(g.estimatedStart+T),l.one("seeked",function(){s({programTime:n,playlist:r,retryCount:t-1,seekTo:a,pauseAfterSeek:u,tech:l,callback:c})});return}var E=m.start+T,C=function(){return c(null,l.currentTime())};l.one("seeked",C),u&&l.pause(),a(E)},Cu=function(i,n){if(i.readyState===4)return n()},hm=function(i,n,r){var e=[],t,a=!1,o=function(m,T,E,C){return T.abort(),a=!0,r(m,T,E,C)},u=function(m,T){if(!a){if(m)return o(m,T,"",e);var E=T.responseText.substring(e&&e.byteLength||0,T.responseText.length);if(e=ji(e,ki(E,!0)),t=t||kt(e),e.length<10||t&&e.length<t+2)return Cu(T,function(){return o(m,T,"",e)});var C=mo(e);return C==="ts"&&e.length<188?Cu(T,function(){return o(m,T,"",e)}):!C&&e.length<376?Cu(T,function(){return o(m,T,"",e)}):o(null,T,C,e)}},l={uri:i,beforeSend:function(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function(T){return T.total,T.loaded,Su(m,null,{statusCode:m.status},u)})}},c=n(l,function(g,m){return Su(c,g,m,u)});return c},pm=U.EventTarget,lc=U.mergeOptions,dc=function(i,n){if(!rc(i,n)||i.sidx&&n.sidx&&(i.sidx.offset!==n.sidx.offset||i.sidx.length!==n.sidx.length))return!1;if(!i.sidx&&n.sidx||i.sidx&&!n.sidx||i.segments&&!n.segments||!i.segments&&n.segments)return!1;if(!i.segments&&!n.segments)return!0;for(var r=0;r<i.segments.length;r++){var e=i.segments[r],t=n.segments[r];if(e.uri!==t.uri)return!1;if(!(!e.byterange&&!t.byterange)){var a=e.byterange,o=t.byterange;if(a&&!o||!a&&o||a.offset!==o.offset||a.length!==o.length)return!1}}return!0},mm=function(i){var n=i.masterXml,r=i.srcUrl,e=i.clientOffset,t=i.sidxMapping,a=i.previousManifest,o=oo(n,{manifestUri:r,clientOffset:e,sidxMapping:t,previousManifest:a});return ec(o,r),o},gm=function(i,n,r){for(var e=!0,t=lc(i,{duration:n.duration,minimumUpdatePeriod:n.minimumUpdatePeriod,timelineStarts:n.timelineStarts}),a=0;a<n.playlists.length;a++){var o=n.playlists[a];if(o.sidx){var u=ci(o.sidx);r&&r[u]&&r[u].sidx&&ei(o,r[u].sidx,o.sidx.resolvedUri)}var l=bu(t,o,dc);l&&(t=l,e=!1)}return ua(n,function(c,g,m,T){if(c.playlists&&c.playlists.length){var E=c.playlists[0].id,C=bu(t,c.playlists[0],dc);C&&(t=C,t.mediaGroups[g][m][T].playlists[0]=t.playlists[E],e=!1)}}),n.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(e=!1),e?null:t},vm=function(i,n){var r=Boolean(!i.map&&!n.map),e=r||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length);return e&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length},cc=function(i,n){var r={};for(var e in i){var t=i[e],a=t.sidx;if(a){var o=ci(a);if(!n[o])break;var u=n[o].sidxInfo;vm(u,a)&&(r[o]=n[o])}}return r},_m=function(i,n){var r=cc(i.playlists,n),e=r;return ua(i,function(t,a,o,u){if(t.playlists&&t.playlists.length){var l=t.playlists;e=lc(e,cc(l,n))}}),e},wu=function(s){K(i,s);function i(r,e,t,a){var o;t===void 0&&(t={}),o=s.call(this)||this,o.masterPlaylistLoader_=a||(0,J.Z)(o),a||(o.isMaster_=!0);var u=t,l=u.withCredentials,c=l===void 0?!1:l,g=u.handleManifestRedirects,m=g===void 0?!1:g;if(o.vhs_=e,o.withCredentials=c,o.handleManifestRedirects=m,!r)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Fi("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=r,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=r,o}var n=i.prototype;return n.requestErrored_=function(e,t,a){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2},a&&(this.state=a),this.trigger("error"),!0},n.addSidxSegments_=function(e,t,a){var o=this,u=e.sidx&&ci(e.sidx);if(!e.sidx||!u||this.masterPlaylistLoader_.sidxMapping_[u]){this.mediaRequest_=x().setTimeout(function(){return a(!1)},0);return}var l=as(this.handleManifestRedirects,e.sidx.resolvedUri),c=function(m,T){if(!o.requestErrored_(m,T,t)){var E=o.masterPlaylistLoader_.sidxMapping_,C;try{C=te()(Me(T.response).subarray(8))}catch(P){o.requestErrored_(P,T,t);return}return E[u]={sidxInfo:e.sidx,sidx:C},ei(e,C,e.sidx.resolvedUri),a(!0)}};this.request=hm(l,this.vhs_.xhr,function(g,m,T,E){if(g)return c(g,m);if(!T||T!=="mp4")return c({status:m.status,message:"Unsupported "+(T||"unknown")+" container type for sidx segment at URL: "+l,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},m);var C=e.sidx.byterange,P=C.offset,H=C.length;if(E.length>=H+P)return c(g,{response:E.subarray(P,P+H),status:m.status,uri:m.uri});o.request=o.vhs_.xhr({uri:l,responseType:"arraybuffer",headers:Eu({byterange:e.sidx.byterange})},c)})},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},x().clearTimeout(this.minimumUpdatePeriodTimeout_),x().clearTimeout(this.mediaRequest_),x().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var a=this.state;if(typeof e=="string"){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var o=!this.media_||e.id!==this.media_.id;if(o&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!o||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,a,function(u){t.haveMetadata({startingState:a,playlist:e})}))},n.haveMetadata=function(e){var t=e.startingState,a=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),t==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),x().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(x().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},n.load=function(e){var t=this;x().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var a=this.media();if(e){var o=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=x().setTimeout(function(){return t.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},n.start=function(){var e=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=x().setTimeout(function(){return e.haveMaster_()},0);return}this.requestMaster_(function(t,a){e.haveMaster_(),!e.hasPendingRequest()&&!e.media_&&e.media(e.masterPlaylistLoader_.master.playlists[0])})},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(a,o){if(t.requestErrored_(a,o)){t.state==="HAVE_NOTHING"&&(t.started=!1);return}var u=o.responseText!==t.masterPlaylistLoader_.masterXml_;if(t.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?t.masterLoaded_=Date.parse(o.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=as(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,o),u){t.handleMaster_(),t.syncClientServerClock_(function(){return e(o,u)});return}return e(o,u)})},n.syncClientServerClock_=function(e){var t=this,a=A(this.masterPlaylistLoader_.masterXml_);if(a===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e();if(a.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=a.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Ni(this.masterPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(o,u){if(!!t.request){if(o)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var l;a.method==="HEAD"?!u.responseHeaders||!u.responseHeaders.date?l=t.masterLoaded_:l=Date.parse(u.responseHeaders.date):l=Date.parse(u.responseText),t.masterPlaylistLoader_.clientOffset_=l-Date.now(),e()}})},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,t=mm({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=gm(e,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||e;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(x().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout");return}this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=x().setTimeout(function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)},n.refreshXml_=function(){var e=this;this.requestMaster_(function(t,a){!a||(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=_m(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(o){e.refreshMedia_(e.media().id)}))})},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var a=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==a[e];if(o?this.media_=a[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var u=function l(){t.media().endList||(t.mediaUpdateTimeout=x().setTimeout(function(){t.trigger("mediaupdatetimeout"),l()},xu(t.media(),Boolean(o))))};u()}this.trigger("loadedplaylist")},i}(pm),Wt={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},ym=function(i){for(var n=new Uint8Array(new ArrayBuffer(i.length)),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n.buffer},fc=function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},Tm=function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch(r){var n=new BlobBuilder;return n.append(i),URL.createObjectURL(n.getBlob())}},hc=function(i){return function(){var n=Tm(i),r=fc(new Worker(n));r.objURL=n;var e=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(n),e.call(this)},r}},pc=function(i){return"var browserWorkerPolyFill = "+fc.toString()+`;
browserWorkerPolyFill(self);
`+i},mc=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},bm=pc(mc(function(){var s=function(){this.init=function(){var d={};this.on=function(h,f){d[h]||(d[h]=[]),d[h]=d[h].concat(f)},this.off=function(h,f){var p;return d[h]?(p=d[h].indexOf(f),d[h]=d[h].slice(),d[h].splice(p,1),p>-1):!1},this.trigger=function(h){var f,p,v,_;if(f=d[h],!!f)if(arguments.length===2)for(v=f.length,p=0;p<v;++p)f[p].call(this,arguments[1]);else{for(_=[],p=arguments.length,p=1;p<arguments.length;++p)_.push(arguments[p]);for(v=f.length,p=0;p<v;++p)f[p].apply(this,_)}},this.dispose=function(){d={}}}};s.prototype.pipe=function(y){return this.on("data",function(d){y.push(d)}),this.on("done",function(d){y.flush(d)}),this.on("partialdone",function(d){y.partialFlush(d)}),this.on("endedtimeline",function(d){y.endTimeline(d)}),this.on("reset",function(d){y.reset(d)}),y},s.prototype.push=function(y){this.trigger("data",y)},s.prototype.flush=function(y){this.trigger("done",y)},s.prototype.partialFlush=function(y){this.trigger("partialdone",y)},s.prototype.endTimeline=function(y){this.trigger("endedtimeline",y)},s.prototype.reset=function(y){this.trigger("reset",y)};var i=s,n=Math.pow(2,32),r=function(d){var h=new DataView(d.buffer,d.byteOffset,d.byteLength),f;return h.getBigUint64?(f=h.getBigUint64(0),f<Number.MAX_SAFE_INTEGER?Number(f):f):h.getUint32(0)*n+h.getUint32(4)},e={getUint64:r,MAX_UINT32:n},t=e.MAX_UINT32,a,o,u,l,c,g,m,T,E,C,P,H,ie,be,G,q,ue,$,X,se,Y,Ue,Ee,Ge,ht,yt,Ot,Ft,Et,Qt,at,_s,wi,pr,wr,Gr;(function(){var y;if(Ee={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array!="undefined"){for(y in Ee)Ee.hasOwnProperty(y)&&(Ee[y]=[y.charCodeAt(0),y.charCodeAt(1),y.charCodeAt(2),y.charCodeAt(3)]);Ge=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),yt=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ht=new Uint8Array([0,0,0,1]),Ot=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ft=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Et={video:Ot,audio:Ft},_s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),at=new Uint8Array([0,0,0,0,0,0,0,0]),wi=new Uint8Array([0,0,0,0,0,0,0,0]),pr=wi,wr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Gr=wi,Qt=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(d){var h=[],f=0,p,v,_;for(p=1;p<arguments.length;p++)h.push(arguments[p]);for(p=h.length;p--;)f+=h[p].byteLength;for(v=new Uint8Array(f+8),_=new DataView(v.buffer,v.byteOffset,v.byteLength),_.setUint32(0,v.byteLength),v.set(d,4),p=0,f=8;p<h.length;p++)v.set(h[p],f),f+=h[p].byteLength;return v},o=function(){return a(Ee.dinf,a(Ee.dref,_s))},u=function(d){return a(Ee.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},l=function(){return a(Ee.ftyp,Ge,ht,Ge,yt)},q=function(d){return a(Ee.hdlr,Et[d])},c=function(d){return a(Ee.mdat,d)},G=function(d){var h=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(h[12]=d.samplerate>>>24&255,h[13]=d.samplerate>>>16&255,h[14]=d.samplerate>>>8&255,h[15]=d.samplerate&255),a(Ee.mdhd,h)},be=function(d){return a(Ee.mdia,G(d),q(d.type),m(d))},g=function(d){return a(Ee.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},m=function(d){return a(Ee.minf,d.type==="video"?a(Ee.vmhd,Qt):a(Ee.smhd,at),o(),$(d))},T=function(d,h){for(var f=[],p=h.length;p--;)f[p]=se(h[p]);return a.apply(null,[Ee.moof,g(d)].concat(f))},E=function(d){for(var h=d.length,f=[];h--;)f[h]=H(d[h]);return a.apply(null,[Ee.moov,P(4294967295)].concat(f).concat(C(d)))},C=function(d){for(var h=d.length,f=[];h--;)f[h]=Y(d[h]);return a.apply(null,[Ee.mvex].concat(f))},P=function(d){var h=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(Ee.mvhd,h)},ue=function(d){var h=d.samples||[],f=new Uint8Array(4+h.length),p,v;for(v=0;v<h.length;v++)p=h[v].flags,f[v+4]=p.dependsOn<<4|p.isDependedOn<<2|p.hasRedundancy;return a(Ee.sdtp,f)},$=function(d){return a(Ee.stbl,X(d),a(Ee.stts,Gr),a(Ee.stsc,pr),a(Ee.stsz,wr),a(Ee.stco,wi))},function(){var y,d;X=function(f){return a(Ee.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),f.type==="video"?y(f):d(f))},y=function(f){var p=f.sps||[],v=f.pps||[],_=[],w=[],k,M;for(k=0;k<p.length;k++)_.push((p[k].byteLength&65280)>>>8),_.push(p[k].byteLength&255),_=_.concat(Array.prototype.slice.call(p[k]));for(k=0;k<v.length;k++)w.push((v[k].byteLength&65280)>>>8),w.push(v[k].byteLength&255),w=w.concat(Array.prototype.slice.call(v[k]));if(M=[Ee.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(f.width&65280)>>8,f.width&255,(f.height&65280)>>8,f.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(Ee.avcC,new Uint8Array([1,f.profileIdc,f.profileCompatibility,f.levelIdc,255].concat([p.length],_,[v.length],w))),a(Ee.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],f.sarRatio){var L=f.sarRatio[0],F=f.sarRatio[1];M.push(a(Ee.pasp,new Uint8Array([(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255,(F&4278190080)>>24,(F&16711680)>>16,(F&65280)>>8,F&255])))}return a.apply(null,M)},d=function(f){return a(Ee.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(f.channelcount&65280)>>8,f.channelcount&255,(f.samplesize&65280)>>8,f.samplesize&255,0,0,0,0,(f.samplerate&65280)>>8,f.samplerate&255,0,0]),u(f))}}(),ie=function(d){var h=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return a(Ee.tkhd,h)},se=function(d){var h,f,p,v,_,w,k;return h=a(Ee.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),w=Math.floor(d.baseMediaDecodeTime/t),k=Math.floor(d.baseMediaDecodeTime%t),f=a(Ee.tfdt,new Uint8Array([1,0,0,0,w>>>24&255,w>>>16&255,w>>>8&255,w&255,k>>>24&255,k>>>16&255,k>>>8&255,k&255])),_=32+20+8+16+8+8,d.type==="audio"?(p=Ue(d,_),a(Ee.traf,h,f,p)):(v=ue(d),p=Ue(d,v.length+_),a(Ee.traf,h,f,p,v))},H=function(d){return d.duration=d.duration||4294967295,a(Ee.trak,ie(d),be(d))},Y=function(d){var h=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(h[h.length-1]=0),a(Ee.trex,h)},function(){var y,d,h;h=function(p,v){var _=0,w=0,k=0,M=0;return p.length&&(p[0].duration!==void 0&&(_=1),p[0].size!==void 0&&(w=2),p[0].flags!==void 0&&(k=4),p[0].compositionTimeOffset!==void 0&&(M=8)),[0,0,_|w|k|M,1,(p.length&4278190080)>>>24,(p.length&16711680)>>>16,(p.length&65280)>>>8,p.length&255,(v&4278190080)>>>24,(v&16711680)>>>16,(v&65280)>>>8,v&255]},d=function(p,v){var _,w,k,M,L,F;for(M=p.samples||[],v+=8+12+16*M.length,k=h(M,v),w=new Uint8Array(k.length+M.length*16),w.set(k),_=k.length,F=0;F<M.length;F++)L=M[F],w[_++]=(L.duration&4278190080)>>>24,w[_++]=(L.duration&16711680)>>>16,w[_++]=(L.duration&65280)>>>8,w[_++]=L.duration&255,w[_++]=(L.size&4278190080)>>>24,w[_++]=(L.size&16711680)>>>16,w[_++]=(L.size&65280)>>>8,w[_++]=L.size&255,w[_++]=L.flags.isLeading<<2|L.flags.dependsOn,w[_++]=L.flags.isDependedOn<<6|L.flags.hasRedundancy<<4|L.flags.paddingValue<<1|L.flags.isNonSyncSample,w[_++]=L.flags.degradationPriority&240<<8,w[_++]=L.flags.degradationPriority&15,w[_++]=(L.compositionTimeOffset&4278190080)>>>24,w[_++]=(L.compositionTimeOffset&16711680)>>>16,w[_++]=(L.compositionTimeOffset&65280)>>>8,w[_++]=L.compositionTimeOffset&255;return a(Ee.trun,w)},y=function(p,v){var _,w,k,M,L,F;for(M=p.samples||[],v+=8+12+8*M.length,k=h(M,v),_=new Uint8Array(k.length+M.length*8),_.set(k),w=k.length,F=0;F<M.length;F++)L=M[F],_[w++]=(L.duration&4278190080)>>>24,_[w++]=(L.duration&16711680)>>>16,_[w++]=(L.duration&65280)>>>8,_[w++]=L.duration&255,_[w++]=(L.size&4278190080)>>>24,_[w++]=(L.size&16711680)>>>16,_[w++]=(L.size&65280)>>>8,_[w++]=L.size&255;return a(Ee.trun,_)},Ue=function(p,v){return p.type==="audio"?y(p,v):d(p,v)}}();var Yi={ftyp:l,mdat:c,moof:T,moov:E,initSegment:function(d){var h=l(),f=E(d),p;return p=new Uint8Array(h.byteLength+f.byteLength),p.set(h),p.set(f,h.byteLength),p}},In=function(d){var h,f,p=[],v=[];for(v.byteLength=0,v.nalCount=0,v.duration=0,p.byteLength=0,h=0;h<d.length;h++)f=d[h],f.nalUnitType==="access_unit_delimiter_rbsp"?(p.length&&(p.duration=f.dts-p.dts,v.byteLength+=p.byteLength,v.nalCount+=p.length,v.duration+=p.duration,v.push(p)),p=[f],p.byteLength=f.data.byteLength,p.pts=f.pts,p.dts=f.dts):(f.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(p.keyFrame=!0),p.duration=f.dts-p.dts,p.byteLength+=f.data.byteLength,p.push(f));return v.length&&(!p.duration||p.duration<=0)&&(p.duration=v[v.length-1].duration),v.byteLength+=p.byteLength,v.nalCount+=p.length,v.duration+=p.duration,v.push(p),v},kn=function(d){var h,f,p=[],v=[];for(p.byteLength=0,p.nalCount=0,p.duration=0,p.pts=d[0].pts,p.dts=d[0].dts,v.byteLength=0,v.nalCount=0,v.duration=0,v.pts=d[0].pts,v.dts=d[0].dts,h=0;h<d.length;h++)f=d[h],f.keyFrame?(p.length&&(v.push(p),v.byteLength+=p.byteLength,v.nalCount+=p.nalCount,v.duration+=p.duration),p=[f],p.nalCount=f.length,p.byteLength=f.byteLength,p.pts=f.pts,p.dts=f.dts,p.duration=f.duration):(p.duration+=f.duration,p.nalCount+=f.length,p.byteLength+=f.byteLength,p.push(f));return v.length&&p.duration<=0&&(p.duration=v[v.length-1].duration),v.byteLength+=p.byteLength,v.nalCount+=p.nalCount,v.duration+=p.duration,v.push(p),v},Dn=function(d){var h;return!d[0][0].keyFrame&&d.length>1&&(h=d.shift(),d.byteLength-=h.byteLength,d.nalCount-=h.nalCount,d[0][0].dts=h.dts,d[0][0].pts=h.pts,d[0][0].duration+=h.duration),d},ov=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Zc=function(d,h){var f=ov();return f.dataOffset=h,f.compositionTimeOffset=d.pts-d.dts,f.duration=d.duration,f.size=4*d.length,f.size+=d.byteLength,d.keyFrame&&(f.flags.dependsOn=2,f.flags.isNonSyncSample=0),f},uv=function(d,h){var f,p,v,_,w,k=h||0,M=[];for(f=0;f<d.length;f++)for(_=d[f],p=0;p<_.length;p++)w=_[p],v=Zc(w,k),k+=v.size,M.push(v);return M},lv=function(d){var h,f,p,v,_,w,k=0,M=d.byteLength,L=d.nalCount,F=M+4*L,z=new Uint8Array(F),xe=new DataView(z.buffer);for(h=0;h<d.length;h++)for(v=d[h],f=0;f<v.length;f++)for(_=v[f],p=0;p<_.length;p++)w=_[p],xe.setUint32(k,w.data.byteLength),k+=4,z.set(w.data,k),k+=w.data.byteLength;return z},dv=function(d,h){var f,p=h||0,v=[];return f=Zc(d,p),v.push(f),v},cv=function(d){var h,f,p=0,v=d.byteLength,_=d.length,w=v+4*_,k=new Uint8Array(w),M=new DataView(k.buffer);for(h=0;h<d.length;h++)f=d[h],M.setUint32(p,f.data.byteLength),p+=4,k.set(f.data,p),p+=f.data.byteLength;return k},ha={groupNalsIntoFrames:In,groupFramesIntoGops:kn,extendFirstKeyFrame:Dn,generateSampleTable:uv,concatenateNalData:lv,generateSampleTableForFrame:dv,concatenateNalDataForFrame:cv},Ar=[33,16,5,32,164,27],Nu=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],st=function(d){for(var h=[];d--;)h.push(0);return h},fv=function(d){return Object.keys(d).reduce(function(h,f){return h[f]=new Uint8Array(d[f].reduce(function(p,v){return p.concat(v)},[])),h},{})},Fu,hv=function(){if(!Fu){var d={96e3:[Ar,[227,64],st(154),[56]],88200:[Ar,[231],st(170),[56]],64e3:[Ar,[248,192],st(240),[56]],48e3:[Ar,[255,192],st(268),[55,148,128],st(54),[112]],44100:[Ar,[255,192],st(268),[55,163,128],st(84),[112]],32e3:[Ar,[255,192],st(268),[55,234],st(226),[112]],24e3:[Ar,[255,192],st(268),[55,255,128],st(268),[111,112],st(126),[224]],16e3:[Ar,[255,192],st(268),[55,255,128],st(268),[111,255],st(269),[223,108],st(195),[1,192]],12e3:[Nu,st(268),[3,127,248],st(268),[6,255,240],st(268),[13,255,224],st(268),[27,253,128],st(259),[56]],11025:[Nu,st(268),[3,127,248],st(268),[6,255,240],st(268),[13,255,224],st(268),[27,255,192],st(268),[55,175,128],st(108),[112]],8e3:[Nu,st(268),[3,121,16],st(47),[7]]};Fu=fv(d)}return Fu},Uu=9e4,Bu,Vu,ys,Hu,Jc,ef,tf;Bu=function(d){return d*Uu},Vu=function(d,h){return d*h},ys=function(d){return d/Uu},Hu=function(d,h){return d/h},Jc=function(d,h){return Bu(Hu(d,h))},ef=function(d,h){return Vu(ys(d),h)},tf=function(d,h,f){return ys(f?d:d-h)};var tt={ONE_SECOND_IN_TS:Uu,secondsToVideoTs:Bu,secondsToAudioTs:Vu,videoTsToSeconds:ys,audioTsToSeconds:Hu,audioTsToVideoTs:Jc,videoTsToAudioTs:ef,metadataTsToSeconds:tf},pv=function(d){var h,f,p=0;for(h=0;h<d.length;h++)f=d[h],p+=f.data.byteLength;return p},mv=function(d,h,f,p){var v,_=0,w=0,k=0,M=0,L,F,z;if(!!h.length&&(v=tt.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),_=Math.ceil(tt.ONE_SECOND_IN_TS/(d.samplerate/1024)),f&&p&&(w=v-Math.max(f,p),k=Math.floor(w/_),M=k*_),!(k<1||M>tt.ONE_SECOND_IN_TS/2))){for(L=hv()[d.samplerate],L||(L=h[0].data),F=0;F<k;F++)z=h[0],h.splice(0,0,{data:L,dts:z.dts-_,pts:z.pts-_});return d.baseMediaDecodeTime-=Math.floor(tt.videoTsToAudioTs(M,d.samplerate)),M}},gv=function(d,h,f){return h.minSegmentDts>=f?d:(h.minSegmentDts=1/0,d.filter(function(p){return p.dts>=f?(h.minSegmentDts=Math.min(h.minSegmentDts,p.dts),h.minSegmentPts=h.minSegmentDts,!0):!1}))},vv=function(d){var h,f,p=[];for(h=0;h<d.length;h++)f=d[h],p.push({size:f.data.byteLength,duration:1024});return p},_v=function(d){var h,f,p=0,v=new Uint8Array(pv(d));for(h=0;h<d.length;h++)f=d[h],v.set(f.data,p),p+=f.data.byteLength;return v},Ts={prefixWithSilence:mv,trimAdtsFramesByEarliestDts:gv,generateSampleTable:vv,concatenateFrameData:_v},yv=tt.ONE_SECOND_IN_TS,Tv=function(d,h){typeof h.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=h.pts),d.minSegmentPts===void 0?d.minSegmentPts=h.pts:d.minSegmentPts=Math.min(d.minSegmentPts,h.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=h.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,h.pts)),typeof h.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=h.dts),d.minSegmentDts===void 0?d.minSegmentDts=h.dts:d.minSegmentDts=Math.min(d.minSegmentDts,h.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=h.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,h.dts))},bv=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},xv=function(d,h){var f,p,v=d.minSegmentDts;return h||(v-=d.timelineStartInfo.dts),f=d.timelineStartInfo.baseMediaDecodeTime,f+=v,f=Math.max(0,f),d.type==="audio"&&(p=d.samplerate/yv,f*=p,f=Math.floor(f)),f},Ui={clearDtsInfo:bv,calculateTrackBaseMediaDecodeTime:xv,collectDtsInfo:Tv},rf=4,Sv=128,Ev=function(d){for(var h=0,f={payloadType:-1,payloadSize:0},p=0,v=0;h<d.byteLength&&d[h]!==Sv;){for(;d[h]===255;)p+=255,h++;for(p+=d[h++];d[h]===255;)v+=255,h++;if(v+=d[h++],!f.payload&&p===rf){var _=String.fromCharCode(d[h+3],d[h+4],d[h+5],d[h+6]);if(_==="GA94"){f.payloadType=p,f.payloadSize=v,f.payload=d.subarray(h,h+v);break}else f.payload=void 0}h+=v,p=0,v=0}return f},Cv=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},wv=function(d,h){var f=[],p,v,_,w;if(!(h[0]&64))return f;for(v=h[0]&31,p=0;p<v;p++)_=p*3,w={type:h[_+2]&3,pts:d},h[_+2]&4&&(w.ccData=h[_+3]<<8|h[_+4],f.push(w));return f},Av=function(d){for(var h=d.byteLength,f=[],p=1,v,_;p<h-2;)d[p]===0&&d[p+1]===0&&d[p+2]===3?(f.push(p+2),p+=2):p++;if(f.length===0)return d;v=h-f.length,_=new Uint8Array(v);var w=0;for(p=0;p<v;w++,p++)w===f[0]&&(w++,f.shift()),_[p]=d[w];return _},pa={parseSei:Ev,parseUserData:Cv,parseCaptionPackets:wv,discardEmulationPreventionBytes:Av,USER_DATA_REGISTERED_ITU_T_T35:rf},Ti=function y(d){d=d||{},y.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Pt(0,0),new Pt(0,1),new Pt(1,0),new Pt(1,1)],this.parse708captions_&&(this.cc708Stream_=new pt({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(h){h.on("data",this.trigger.bind(this,"data")),h.on("partialdone",this.trigger.bind(this,"partialdone")),h.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ti.prototype=new i,Ti.prototype.push=function(y){var d,h,f;if(y.nalUnitType==="sei_rbsp"&&(d=pa.parseSei(y.escapedRBSP),!!d.payload&&d.payloadType===pa.USER_DATA_REGISTERED_ITU_T_T35&&(h=pa.parseUserData(d),!!h))){if(y.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(y.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}f=pa.parseCaptionPackets(y.pts,h),this.captionPackets_=this.captionPackets_.concat(f),this.latestDts_!==y.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=y.dts}},Ti.prototype.flushCCStreams=function(y){this.ccStreams_.forEach(function(d){return y==="flush"?d.flush():d.partialFlush()},this)},Ti.prototype.flushStream=function(y){if(!this.captionPackets_.length){this.flushCCStreams(y);return}this.captionPackets_.forEach(function(d,h){d.presortIndex=h}),this.captionPackets_.sort(function(d,h){return d.pts===h.pts?d.presortIndex-h.presortIndex:d.pts-h.pts}),this.captionPackets_.forEach(function(d){d.type<2?this.dispatchCea608Packet(d):this.dispatchCea708Packet(d)},this),this.captionPackets_.length=0,this.flushCCStreams(y)},Ti.prototype.flush=function(){return this.flushStream("flush")},Ti.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ti.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(y){y.reset()})},Ti.prototype.dispatchCea608Packet=function(y){this.setsTextOrXDSActive(y)?this.activeCea608Channel_[y.type]=null:this.setsChannel1Active(y)?this.activeCea608Channel_[y.type]=0:this.setsChannel2Active(y)&&(this.activeCea608Channel_[y.type]=1),this.activeCea608Channel_[y.type]!==null&&this.ccStreams_[(y.type<<1)+this.activeCea608Channel_[y.type]].push(y)},Ti.prototype.setsChannel1Active=function(y){return(y.ccData&30720)===4096},Ti.prototype.setsChannel2Active=function(y){return(y.ccData&30720)===6144},Ti.prototype.setsTextOrXDSActive=function(y){return(y.ccData&28928)===256||(y.ccData&30974)===4138||(y.ccData&30974)===6186},Ti.prototype.dispatchCea708Packet=function(y){this.parse708captions_&&this.cc708Stream_.push(y)};var Pv={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Iv=function(d){var h=Pv[d]||d;return d&4096&&d===h?"":String.fromCharCode(h)},bs=function(d){return 32<=d&&d<=127||160<=d&&d<=255},mr=function(d){this.windowNum=d,this.reset()};mr.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},mr.prototype.getText=function(){return this.rows.join(`
`)},mr.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},mr.prototype.newLine=function(y){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(y),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},mr.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},mr.prototype.addText=function(y){this.rows[this.rowIdx]+=y},mr.prototype.backspace=function(){if(!this.isEmpty()){var y=this.rows[this.rowIdx];this.rows[this.rowIdx]=y.substr(0,y.length-1)}};var xs=function(d,h,f){this.serviceNum=d,this.text="",this.currentWindow=new mr(-1),this.windows=[],this.stream=f,typeof h=="string"&&this.createTextDecoder(h)};xs.prototype.init=function(y,d){this.startPts=y;for(var h=0;h<8;h++)this.windows[h]=new mr(h),typeof d=="function"&&(this.windows[h].beforeRowOverflow=d)},xs.prototype.setCurrentWindow=function(y){this.currentWindow=this.windows[y]},xs.prototype.createTextDecoder=function(y){if(typeof TextDecoder=="undefined")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(y)}catch(d){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+y+" encoding. "+d})}};var pt=function y(d){d=d||{},y.prototype.init.call(this);var h=this,f=d.captionServices||{},p={},v;Object.keys(f).forEach(function(_){v=f[_],/^SERVICE/.test(_)&&(p[_]=v.encoding)}),this.serviceEncodings=p,this.current708Packet=null,this.services={},this.push=function(_){_.type===3?(h.new708Packet(),h.add708Bytes(_)):(h.current708Packet===null&&h.new708Packet(),h.add708Bytes(_))}};pt.prototype=new i,pt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},pt.prototype.add708Bytes=function(y){var d=y.ccData,h=d>>>8,f=d&255;this.current708Packet.ptsVals.push(y.pts),this.current708Packet.data.push(h),this.current708Packet.data.push(f)},pt.prototype.push708Packet=function(){var y=this.current708Packet,d=y.data,h=null,f=null,p=0,v=d[p++];for(y.seq=v>>6,y.sizeCode=v&63;p<d.length;p++)v=d[p++],h=v>>5,f=v&31,h===7&&f>0&&(v=d[p++],h=v),this.pushServiceBlock(h,p,f),f>0&&(p+=f-1)},pt.prototype.pushServiceBlock=function(y,d,h){var f,p=d,v=this.current708Packet.data,_=this.services[y];for(_||(_=this.initService(y,p));p<d+h&&p<v.length;p++)f=v[p],bs(f)?p=this.handleText(p,_):f===24?p=this.multiByteCharacter(p,_):f===16?p=this.extendedCommands(p,_):128<=f&&f<=135?p=this.setCurrentWindow(p,_):152<=f&&f<=159?p=this.defineWindow(p,_):f===136?p=this.clearWindows(p,_):f===140?p=this.deleteWindows(p,_):f===137?p=this.displayWindows(p,_):f===138?p=this.hideWindows(p,_):f===139?p=this.toggleWindows(p,_):f===151?p=this.setWindowAttributes(p,_):f===144?p=this.setPenAttributes(p,_):f===145?p=this.setPenColor(p,_):f===146?p=this.setPenLocation(p,_):f===143?_=this.reset(p,_):f===8?_.currentWindow.backspace():f===12?_.currentWindow.clearText():f===13?_.currentWindow.pendingNewLine=!0:f===14?_.currentWindow.clearText():f===141&&p++},pt.prototype.extendedCommands=function(y,d){var h=this.current708Packet.data,f=h[++y];return bs(f)&&(y=this.handleText(y,d,{isExtended:!0})),y},pt.prototype.getPts=function(y){return this.current708Packet.ptsVals[Math.floor(y/2)]},pt.prototype.initService=function(y,d){var f="SERVICE"+y,h=this,f,p;return f in this.serviceEncodings&&(p=this.serviceEncodings[f]),this.services[y]=new xs(y,p,h),this.services[y].init(this.getPts(d),function(v){h.flushDisplayed(v,h.services[y])}),this.services[y]},pt.prototype.handleText=function(y,d,h){var f=h&&h.isExtended,p=h&&h.isMultiByte,v=this.current708Packet.data,_=f?4096:0,w=v[y],k=v[y+1],M=d.currentWindow,L,F;return d.textDecoder_&&!f?(p?(F=[w,k],y++):F=[w],L=d.textDecoder_.decode(new Uint8Array(F))):L=Iv(_|w),M.pendingNewLine&&!M.isEmpty()&&M.newLine(this.getPts(y)),M.pendingNewLine=!1,M.addText(L),y},pt.prototype.multiByteCharacter=function(y,d){var h=this.current708Packet.data,f=h[y+1],p=h[y+2];return bs(f)&&bs(p)&&(y=this.handleText(++y,d,{isMultiByte:!0})),y},pt.prototype.setCurrentWindow=function(y,d){var h=this.current708Packet.data,f=h[y],p=f&7;return d.setCurrentWindow(p),y},pt.prototype.defineWindow=function(y,d){var h=this.current708Packet.data,f=h[y],p=f&7;d.setCurrentWindow(p);var v=d.currentWindow;return f=h[++y],v.visible=(f&32)>>5,v.rowLock=(f&16)>>4,v.columnLock=(f&8)>>3,v.priority=f&7,f=h[++y],v.relativePositioning=(f&128)>>7,v.anchorVertical=f&127,f=h[++y],v.anchorHorizontal=f,f=h[++y],v.anchorPoint=(f&240)>>4,v.rowCount=f&15,f=h[++y],v.columnCount=f&63,f=h[++y],v.windowStyle=(f&56)>>3,v.penStyle=f&7,v.virtualRowCount=v.rowCount+1,y},pt.prototype.setWindowAttributes=function(y,d){var h=this.current708Packet.data,f=h[y],p=d.currentWindow.winAttr;return f=h[++y],p.fillOpacity=(f&192)>>6,p.fillRed=(f&48)>>4,p.fillGreen=(f&12)>>2,p.fillBlue=f&3,f=h[++y],p.borderType=(f&192)>>6,p.borderRed=(f&48)>>4,p.borderGreen=(f&12)>>2,p.borderBlue=f&3,f=h[++y],p.borderType+=(f&128)>>5,p.wordWrap=(f&64)>>6,p.printDirection=(f&48)>>4,p.scrollDirection=(f&12)>>2,p.justify=f&3,f=h[++y],p.effectSpeed=(f&240)>>4,p.effectDirection=(f&12)>>2,p.displayEffect=f&3,y},pt.prototype.flushDisplayed=function(y,d){for(var h=[],f=0;f<8;f++)d.windows[f].visible&&!d.windows[f].isEmpty()&&h.push(d.windows[f].getText());d.endPts=y,d.text=h.join(`

`),this.pushCaption(d),d.startPts=y},pt.prototype.pushCaption=function(y){y.text!==""&&(this.trigger("data",{startPts:y.startPts,endPts:y.endPts,text:y.text,stream:"cc708_"+y.serviceNum}),y.text="",y.startPts=y.endPts)},pt.prototype.displayWindows=function(y,d){var h=this.current708Packet.data,f=h[++y],p=this.getPts(y);this.flushDisplayed(p,d);for(var v=0;v<8;v++)f&1<<v&&(d.windows[v].visible=1);return y},pt.prototype.hideWindows=function(y,d){var h=this.current708Packet.data,f=h[++y],p=this.getPts(y);this.flushDisplayed(p,d);for(var v=0;v<8;v++)f&1<<v&&(d.windows[v].visible=0);return y},pt.prototype.toggleWindows=function(y,d){var h=this.current708Packet.data,f=h[++y],p=this.getPts(y);this.flushDisplayed(p,d);for(var v=0;v<8;v++)f&1<<v&&(d.windows[v].visible^=1);return y},pt.prototype.clearWindows=function(y,d){var h=this.current708Packet.data,f=h[++y],p=this.getPts(y);this.flushDisplayed(p,d);for(var v=0;v<8;v++)f&1<<v&&d.windows[v].clearText();return y},pt.prototype.deleteWindows=function(y,d){var h=this.current708Packet.data,f=h[++y],p=this.getPts(y);this.flushDisplayed(p,d);for(var v=0;v<8;v++)f&1<<v&&d.windows[v].reset();return y},pt.prototype.setPenAttributes=function(y,d){var h=this.current708Packet.data,f=h[y],p=d.currentWindow.penAttr;return f=h[++y],p.textTag=(f&240)>>4,p.offset=(f&12)>>2,p.penSize=f&3,f=h[++y],p.italics=(f&128)>>7,p.underline=(f&64)>>6,p.edgeType=(f&56)>>3,p.fontStyle=f&7,y},pt.prototype.setPenColor=function(y,d){var h=this.current708Packet.data,f=h[y],p=d.currentWindow.penColor;return f=h[++y],p.fgOpacity=(f&192)>>6,p.fgRed=(f&48)>>4,p.fgGreen=(f&12)>>2,p.fgBlue=f&3,f=h[++y],p.bgOpacity=(f&192)>>6,p.bgRed=(f&48)>>4,p.bgGreen=(f&12)>>2,p.bgBlue=f&3,f=h[++y],p.edgeRed=(f&48)>>4,p.edgeGreen=(f&12)>>2,p.edgeBlue=f&3,y},pt.prototype.setPenLocation=function(y,d){var h=this.current708Packet.data,f=h[y],p=d.currentWindow.penLoc;return d.currentWindow.pendingNewLine=!0,f=h[++y],p.row=f&15,f=h[++y],p.column=f&63,y},pt.prototype.reset=function(y,d){var h=this.getPts(y);return this.flushDisplayed(h,d),this.initService(d.serviceNum,y)};var kv={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ss=function(d){return d===null?"":(d=kv[d]||d,String.fromCharCode(d))},Es=14,Dv=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],qr=function(){for(var d=[],h=Es+1;h--;)d.push("");return d},Pt=function y(d,h){y.prototype.init.call(this),this.field_=d||0,this.dataChannel_=h||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(f){var p,v,_,w,k;if(p=f.ccData&32639,p===this.lastControlCode_){this.lastControlCode_=null;return}if((p&61440)===4096?this.lastControlCode_=p:p!==this.PADDING_&&(this.lastControlCode_=null),_=p>>>8,w=p&255,p!==this.PADDING_)if(p===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(p===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(f.pts),this.flushDisplayed(f.pts),v=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=v,this.startPts_=f.pts;else if(p===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(f.pts);else if(p===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(f.pts);else if(p===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(f.pts);else if(p===this.CARRIAGE_RETURN_)this.clearFormatting(f.pts),this.flushDisplayed(f.pts),this.shiftRowsUp_(),this.startPts_=f.pts;else if(p===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(p===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(f.pts),this.displayed_=qr();else if(p===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=qr();else if(p===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(f.pts),this.displayed_=qr()),this.mode_="paintOn",this.startPts_=f.pts;else if(this.isSpecialCharacter(_,w))_=(_&3)<<8,k=Ss(_|w),this[this.mode_](f.pts,k),this.column_++;else if(this.isExtCharacter(_,w))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),_=(_&3)<<8,k=Ss(_|w),this[this.mode_](f.pts,k),this.column_++;else if(this.isMidRowCode(_,w))this.clearFormatting(f.pts),this[this.mode_](f.pts," "),this.column_++,(w&14)===14&&this.addFormatting(f.pts,["i"]),(w&1)===1&&this.addFormatting(f.pts,["u"]);else if(this.isOffsetControlCode(_,w))this.column_+=w&3;else if(this.isPAC(_,w)){var M=Dv.indexOf(p&7968);this.mode_==="rollUp"&&(M-this.rollUpRows_+1<0&&(M=this.rollUpRows_-1),this.setRollUp(f.pts,M)),M!==this.row_&&(this.clearFormatting(f.pts),this.row_=M),w&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(f.pts,["u"]),(p&16)===16&&(this.column_=((p&14)>>1)*4),this.isColorPAC(w)&&(w&14)===14&&this.addFormatting(f.pts,["i"])}else this.isNormalChar(_)&&(w===0&&(w=null),k=Ss(_),k+=Ss(w),this[this.mode_](f.pts,k),this.column_+=k.length)}};Pt.prototype=new i,Pt.prototype.flushDisplayed=function(y){var d=this.displayed_.map(function(h,f){try{return h.trim()}catch(p){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+f+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:y,text:d,stream:this.name_})},Pt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=qr(),this.nonDisplayed_=qr(),this.lastControlCode_=null,this.column_=0,this.row_=Es,this.rollUpRows_=2,this.formatting_=[]},Pt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Pt.prototype.isSpecialCharacter=function(y,d){return y===this.EXT_&&d>=48&&d<=63},Pt.prototype.isExtCharacter=function(y,d){return(y===this.EXT_+1||y===this.EXT_+2)&&d>=32&&d<=63},Pt.prototype.isMidRowCode=function(y,d){return y===this.EXT_&&d>=32&&d<=47},Pt.prototype.isOffsetControlCode=function(y,d){return y===this.OFFSET_&&d>=33&&d<=35},Pt.prototype.isPAC=function(y,d){return y>=this.BASE_&&y<this.BASE_+8&&d>=64&&d<=127},Pt.prototype.isColorPAC=function(y){return y>=64&&y<=79||y>=96&&y<=127},Pt.prototype.isNormalChar=function(y){return y>=32&&y<=127},Pt.prototype.setRollUp=function(y,d){if(this.mode_!=="rollUp"&&(this.row_=Es,this.mode_="rollUp",this.flushDisplayed(y),this.nonDisplayed_=qr(),this.displayed_=qr()),d!==void 0&&d!==this.row_)for(var h=0;h<this.rollUpRows_;h++)this.displayed_[d-h]=this.displayed_[this.row_-h],this.displayed_[this.row_-h]="";d===void 0&&(d=this.row_),this.topRow_=d-this.rollUpRows_+1},Pt.prototype.addFormatting=function(y,d){this.formatting_=this.formatting_.concat(d);var h=d.reduce(function(f,p){return f+"<"+p+">"},"");this[this.mode_](y,h)},Pt.prototype.clearFormatting=function(y){if(!!this.formatting_.length){var d=this.formatting_.reverse().reduce(function(h,f){return h+"</"+f+">"},"");this.formatting_=[],this[this.mode_](y,d)}},Pt.prototype.popOn=function(y,d){var h=this.nonDisplayed_[this.row_];h+=d,this.nonDisplayed_[this.row_]=h},Pt.prototype.rollUp=function(y,d){var h=this.displayed_[this.row_];h+=d,this.displayed_[this.row_]=h},Pt.prototype.shiftRowsUp_=function(){var y;for(y=0;y<this.topRow_;y++)this.displayed_[y]="";for(y=this.row_+1;y<Es+1;y++)this.displayed_[y]="";for(y=this.topRow_;y<this.row_;y++)this.displayed_[y]=this.displayed_[y+1];this.displayed_[this.row_]=""},Pt.prototype.paintOn=function(y,d){var h=this.displayed_[this.row_];h+=d,this.displayed_[this.row_]=h};var Cs={CaptionStream:Ti,Cea608Stream:Pt,Cea708Stream:pt},Kt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ov=8589934592,Lv=4294967296,nf="shared",ju=function(d,h){var f=1;for(d>h&&(f=-1);Math.abs(h-d)>Lv;)d+=f*Ov;return d},af=function y(d){var h,f;y.prototype.init.call(this),this.type_=d||nf,this.push=function(p){this.type_!==nf&&p.type!==this.type_||(f===void 0&&(f=p.dts),p.dts=ju(p.dts,f),p.pts=ju(p.pts,f),h=p.dts,this.trigger("data",p))},this.flush=function(){f=h,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){f=void 0,h=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};af.prototype=new i;var sf={TimestampRolloverStream:af,handleRollover:ju},of=function(d,h,f){var p,v="";for(p=h;p<f;p++)v+="%"+("00"+d[p].toString(16)).slice(-2);return v},ws=function(d,h,f){return decodeURIComponent(of(d,h,f))},Mv=function(d,h,f){return unescape(of(d,h,f))},As=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},uf={TXXX:function(d){var h;if(d.data[0]===3){for(h=1;h<d.data.length;h++)if(d.data[h]===0){d.description=ws(d.data,1,h),d.value=ws(d.data,h+1,d.data.length).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var h;if(d.data[0]===3){for(h=1;h<d.data.length;h++)if(d.data[h]===0){d.description=ws(d.data,1,h),d.url=ws(d.data,h+1,d.data.length);break}}},PRIV:function(d){var h;for(h=0;h<d.data.length;h++)if(d.data[h]===0){d.owner=Mv(d.data,0,h);break}d.privateData=d.data.subarray(h+1),d.data=d.privateData}},Ps;Ps=function(d){var h={descriptor:d&&d.descriptor},f=0,p=[],v=0,_;if(Ps.prototype.init.call(this),this.dispatchType=Kt.METADATA_STREAM_TYPE.toString(16),h.descriptor)for(_=0;_<h.descriptor.length;_++)this.dispatchType+=("00"+h.descriptor[_].toString(16)).slice(-2);this.push=function(w){var k,M,L,F,z,xe;if(w.type==="timed-metadata"){if(w.dataAlignmentIndicator&&(v=0,p.length=0),p.length===0&&(w.data.length<10||w.data[0]!=="I".charCodeAt(0)||w.data[1]!=="D".charCodeAt(0)||w.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(p.push(w),v+=w.data.byteLength,p.length===1&&(f=As(w.data.subarray(6,10)),f+=10),!(v<f)){for(k={data:new Uint8Array(f),frames:[],pts:p[0].pts,dts:p[0].dts},z=0;z<f;)k.data.set(p[0].data.subarray(0,f-z),z),z+=p[0].data.byteLength,v-=p[0].data.byteLength,p.shift();M=10,k.data[5]&64&&(M+=4,M+=As(k.data.subarray(10,14)),f-=As(k.data.subarray(16,20)));do{if(L=As(k.data.subarray(M+4,M+8)),L<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(xe=String.fromCharCode(k.data[M],k.data[M+1],k.data[M+2],k.data[M+3]),F={id:xe,data:k.data.subarray(M+10,M+L+10)},F.key=F.id,uf[F.id]&&(uf[F.id](F),F.owner==="com.apple.streaming.transportStreamTimestamp")){var De=F.data,he=(De[3]&1)<<30|De[4]<<22|De[5]<<14|De[6]<<6|De[7]>>>2;he*=4,he+=De[7]&3,F.timeStamp=he,k.pts===void 0&&k.dts===void 0&&(k.pts=F.timeStamp,k.dts=F.timeStamp),this.trigger("timestamp",F)}k.frames.push(F),M+=10,M+=L}while(M<f);this.trigger("data",k)}}}},Ps.prototype=new i;var Rv=Ps,Nv=sf.TimestampRolloverStream,Is,ma,ks,On=188,Wu=71;Is=function(){var d=new Uint8Array(On),h=0;Is.prototype.init.call(this),this.push=function(f){var p=0,v=On,_;for(h?(_=new Uint8Array(f.byteLength+h),_.set(d.subarray(0,h)),_.set(f,h),h=0):_=f;v<_.byteLength;){if(_[p]===Wu&&_[v]===Wu){this.trigger("data",_.subarray(p,v)),p+=On,v+=On;continue}p++,v++}p<_.byteLength&&(d.set(_.subarray(p),0),h=_.byteLength-p)},this.flush=function(){h===On&&d[0]===Wu&&(this.trigger("data",d),h=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){h=0,this.trigger("reset")}},Is.prototype=new i,ma=function(){var d,h,f,p;ma.prototype.init.call(this),p=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(_,w){var k=0;w.payloadUnitStartIndicator&&(k+=_[k]+1),w.type==="pat"?h(_.subarray(k),w):f(_.subarray(k),w)},h=function(_,w){w.section_number=_[7],w.last_section_number=_[8],p.pmtPid=(_[10]&31)<<8|_[11],w.pmtPid=p.pmtPid},f=function(_,w){var k,M,L,F;if(!!(_[5]&1)){for(p.programMapTable={video:null,audio:null,"timed-metadata":{}},k=(_[1]&15)<<8|_[2],M=3+k-4,L=(_[10]&15)<<8|_[11],F=12+L;F<M;){var z=_[F],xe=(_[F+1]&31)<<8|_[F+2];z===Kt.H264_STREAM_TYPE&&p.programMapTable.video===null?p.programMapTable.video=xe:z===Kt.ADTS_STREAM_TYPE&&p.programMapTable.audio===null?p.programMapTable.audio=xe:z===Kt.METADATA_STREAM_TYPE&&(p.programMapTable["timed-metadata"][xe]=z),F+=((_[F+3]&15)<<8|_[F+4])+5}w.programMapTable=p.programMapTable}},this.push=function(v){var _={},w=4;if(_.payloadUnitStartIndicator=!!(v[1]&64),_.pid=v[1]&31,_.pid<<=8,_.pid|=v[2],(v[3]&48)>>>4>1&&(w+=v[w]+1),_.pid===0)_.type="pat",d(v.subarray(w),_),this.trigger("data",_);else if(_.pid===this.pmtPid)for(_.type="pmt",d(v.subarray(w),_),this.trigger("data",_);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([v,w,_]):this.processPes_(v,w,_)},this.processPes_=function(v,_,w){w.pid===this.programMapTable.video?w.streamType=Kt.H264_STREAM_TYPE:w.pid===this.programMapTable.audio?w.streamType=Kt.ADTS_STREAM_TYPE:w.streamType=this.programMapTable["timed-metadata"][w.pid],w.type="pes",w.data=v.subarray(_),this.trigger("data",w)}},ma.prototype=new i,ma.STREAM_TYPES={h264:27,adts:15},ks=function(){var d=this,h=!1,f={data:[],size:0},p={data:[],size:0},v={data:[],size:0},_,w=function(L,F){var z,xe=L[0]<<16|L[1]<<8|L[2];F.data=new Uint8Array,xe===1&&(F.packetLength=6+(L[4]<<8|L[5]),F.dataAlignmentIndicator=(L[6]&4)!==0,z=L[7],z&192&&(F.pts=(L[9]&14)<<27|(L[10]&255)<<20|(L[11]&254)<<12|(L[12]&255)<<5|(L[13]&254)>>>3,F.pts*=4,F.pts+=(L[13]&6)>>>1,F.dts=F.pts,z&64&&(F.dts=(L[14]&14)<<27|(L[15]&255)<<20|(L[16]&254)<<12|(L[17]&255)<<5|(L[18]&254)>>>3,F.dts*=4,F.dts+=(L[18]&6)>>>1)),F.data=L.subarray(9+L[8]))},k=function(L,F,z){var xe=new Uint8Array(L.size),De={type:F},he=0,je=0,Ut=!1,ui;if(!(!L.data.length||L.size<9)){for(De.trackId=L.data[0].pid,he=0;he<L.data.length;he++)ui=L.data[he],xe.set(ui.data,je),je+=ui.data.byteLength;w(xe,De),Ut=F==="video"||De.packetLength<=L.size,(z||Ut)&&(L.size=0,L.data.length=0),Ut&&d.trigger("data",De)}};ks.prototype.init.call(this),this.push=function(M){({pat:function(){},pes:function(){var F,z;switch(M.streamType){case Kt.H264_STREAM_TYPE:F=f,z="video";break;case Kt.ADTS_STREAM_TYPE:F=p,z="audio";break;case Kt.METADATA_STREAM_TYPE:F=v,z="timed-metadata";break;default:return}M.payloadUnitStartIndicator&&k(F,z,!0),F.data.push(M),F.size+=M.data.byteLength},pmt:function(){var F={type:"metadata",tracks:[]};_=M.programMapTable,_.video!==null&&F.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+_.video,codec:"avc",type:"video"}),_.audio!==null&&F.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+_.audio,codec:"adts",type:"audio"}),h=!0,d.trigger("data",F)}})[M.type]()},this.reset=function(){f.size=0,f.data.length=0,p.size=0,p.data.length=0,this.trigger("reset")},this.flushStreams_=function(){k(f,"video"),k(p,"audio"),k(v,"timed-metadata")},this.flush=function(){if(!h&&_){var M={type:"metadata",tracks:[]};_.video!==null&&M.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+_.video,codec:"avc",type:"video"}),_.audio!==null&&M.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+_.audio,codec:"adts",type:"audio"}),d.trigger("data",M)}h=!1,this.flushStreams_(),this.trigger("done")}},ks.prototype=new i;var lf={PAT_PID:0,MP2T_PACKET_LENGTH:On,TransportPacketStream:Is,TransportParseStream:ma,ElementaryStream:ks,TimestampRolloverStream:Nv,CaptionStream:Cs.CaptionStream,Cea608Stream:Cs.Cea608Stream,Cea708Stream:Cs.Cea708Stream,MetadataStream:Rv};for(var Gu in Kt)Kt.hasOwnProperty(Gu)&&(lf[Gu]=Kt[Gu]);var gr=lf,Fv=tt.ONE_SECOND_IN_TS,Ds,df=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ds=function(d){var h,f=0;Ds.prototype.init.call(this),this.skipWarn_=function(p,v){this.trigger("log",{level:"warn",message:"adts skiping bytes "+p+" to "+v+" in frame "+f+" outside syncword"})},this.push=function(p){var v=0,_,w,k,M,L;if(d||(f=0),p.type==="audio"){h&&h.length?(k=h,h=new Uint8Array(k.byteLength+p.data.byteLength),h.set(k),h.set(p.data,k.byteLength)):h=p.data;for(var F;v+7<h.length;){if(h[v]!==255||(h[v+1]&246)!==240){typeof F!="number"&&(F=v),v++;continue}if(typeof F=="number"&&(this.skipWarn_(F,v),F=null),w=(~h[v+1]&1)*2,_=(h[v+3]&3)<<11|h[v+4]<<3|(h[v+5]&224)>>5,M=((h[v+6]&3)+1)*1024,L=M*Fv/df[(h[v+2]&60)>>>2],h.byteLength-v<_)break;this.trigger("data",{pts:p.pts+f*L,dts:p.dts+f*L,sampleCount:M,audioobjecttype:(h[v+2]>>>6&3)+1,channelcount:(h[v+2]&1)<<2|(h[v+3]&192)>>>6,samplerate:df[(h[v+2]&60)>>>2],samplingfrequencyindex:(h[v+2]&60)>>>2,samplesize:16,data:h.subarray(v+7+w,v+_)}),f++,v+=_}typeof F=="number"&&(this.skipWarn_(F,v),F=null),h=h.subarray(v)}},this.flush=function(){f=0,this.trigger("done")},this.reset=function(){h=void 0,this.trigger("reset")},this.endTimeline=function(){h=void 0,this.trigger("endedtimeline")}},Ds.prototype=new i;var cf=Ds,ff;ff=function(d){var h=d.byteLength,f=0,p=0;this.length=function(){return 8*h},this.bitsAvailable=function(){return 8*h+p},this.loadWord=function(){var v=d.byteLength-h,_=new Uint8Array(4),w=Math.min(4,h);if(w===0)throw new Error("no bytes available");_.set(d.subarray(v,v+w)),f=new DataView(_.buffer).getUint32(0),p=w*8,h-=w},this.skipBits=function(v){var _;p>v?(f<<=v,p-=v):(v-=p,_=Math.floor(v/8),v-=_*8,h-=_,this.loadWord(),f<<=v,p-=v)},this.readBits=function(v){var _=Math.min(p,v),w=f>>>32-_;return p-=_,p>0?f<<=_:h>0&&this.loadWord(),_=v-_,_>0?w<<_|this.readBits(_):w},this.skipLeadingZeros=function(){var v;for(v=0;v<p;++v)if((f&2147483648>>>v)!==0)return f<<=v,p-=v,v;return this.loadWord(),v+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var v=this.skipLeadingZeros();return this.readBits(v+1)-1},this.readExpGolomb=function(){var v=this.readUnsignedExpGolomb();return 1&v?1+v>>>1:-1*(v>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Uv=ff,Os,ga,hf;ga=function(){var d=0,h,f;ga.prototype.init.call(this),this.push=function(p){var v;f?(v=new Uint8Array(f.byteLength+p.data.byteLength),v.set(f),v.set(p.data,f.byteLength),f=v):f=p.data;for(var _=f.byteLength;d<_-3;d++)if(f[d+2]===1){h=d+5;break}for(;h<_;)switch(f[h]){case 0:if(f[h-1]!==0){h+=2;break}else if(f[h-2]!==0){h++;break}d+3!==h-2&&this.trigger("data",f.subarray(d+3,h-2));do h++;while(f[h]!==1&&h<_);d=h-2,h+=3;break;case 1:if(f[h-1]!==0||f[h-2]!==0){h+=3;break}this.trigger("data",f.subarray(d+3,h-2)),d=h-2,h+=3;break;default:h+=3;break}f=f.subarray(d),h-=d,d=0},this.reset=function(){f=null,d=0,this.trigger("reset")},this.flush=function(){f&&f.byteLength>3&&this.trigger("data",f.subarray(d+3)),f=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ga.prototype=new i,hf={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Os=function(){var d=new ga,h,f,p,v,_,w,k;Os.prototype.init.call(this),h=this,this.push=function(M){M.type==="video"&&(f=M.trackId,p=M.pts,v=M.dts,d.push(M))},d.on("data",function(M){var L={trackId:f,pts:p,dts:v,data:M,nalUnitTypeCode:M[0]&31};switch(L.nalUnitTypeCode){case 5:L.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:L.nalUnitType="sei_rbsp",L.escapedRBSP=_(M.subarray(1));break;case 7:L.nalUnitType="seq_parameter_set_rbsp",L.escapedRBSP=_(M.subarray(1)),L.config=w(L.escapedRBSP);break;case 8:L.nalUnitType="pic_parameter_set_rbsp";break;case 9:L.nalUnitType="access_unit_delimiter_rbsp";break}h.trigger("data",L)}),d.on("done",function(){h.trigger("done")}),d.on("partialdone",function(){h.trigger("partialdone")}),d.on("reset",function(){h.trigger("reset")}),d.on("endedtimeline",function(){h.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},k=function(L,F){var z=8,xe=8,De,he;for(De=0;De<L;De++)xe!==0&&(he=F.readExpGolomb(),xe=(z+he+256)%256),z=xe===0?z:xe},_=function(L){for(var F=L.byteLength,z=[],xe=1,De,he;xe<F-2;)L[xe]===0&&L[xe+1]===0&&L[xe+2]===3?(z.push(xe+2),xe+=2):xe++;if(z.length===0)return L;De=F-z.length,he=new Uint8Array(De);var je=0;for(xe=0;xe<De;je++,xe++)je===z[0]&&(je++,z.shift()),he[xe]=L[je];return he},w=function(L){var F=0,z=0,xe=0,De=0,he,je,Ut,ui,$r,Yu,Of,Lf,Mf,Qu,Rf,Lt=[1,1],Nf,Yr;if(he=new Uv(L),je=he.readUnsignedByte(),ui=he.readUnsignedByte(),Ut=he.readUnsignedByte(),he.skipUnsignedExpGolomb(),hf[je]&&($r=he.readUnsignedExpGolomb(),$r===3&&he.skipBits(1),he.skipUnsignedExpGolomb(),he.skipUnsignedExpGolomb(),he.skipBits(1),he.readBoolean()))for(Rf=$r!==3?8:12,Yr=0;Yr<Rf;Yr++)he.readBoolean()&&(Yr<6?k(16,he):k(64,he));if(he.skipUnsignedExpGolomb(),Yu=he.readUnsignedExpGolomb(),Yu===0)he.readUnsignedExpGolomb();else if(Yu===1)for(he.skipBits(1),he.skipExpGolomb(),he.skipExpGolomb(),Of=he.readUnsignedExpGolomb(),Yr=0;Yr<Of;Yr++)he.skipExpGolomb();if(he.skipUnsignedExpGolomb(),he.skipBits(1),Lf=he.readUnsignedExpGolomb(),Mf=he.readUnsignedExpGolomb(),Qu=he.readBits(1),Qu===0&&he.skipBits(1),he.skipBits(1),he.readBoolean()&&(F=he.readUnsignedExpGolomb(),z=he.readUnsignedExpGolomb(),xe=he.readUnsignedExpGolomb(),De=he.readUnsignedExpGolomb()),he.readBoolean()&&he.readBoolean()){switch(Nf=he.readUnsignedByte(),Nf){case 1:Lt=[1,1];break;case 2:Lt=[12,11];break;case 3:Lt=[10,11];break;case 4:Lt=[16,11];break;case 5:Lt=[40,33];break;case 6:Lt=[24,11];break;case 7:Lt=[20,11];break;case 8:Lt=[32,11];break;case 9:Lt=[80,33];break;case 10:Lt=[18,11];break;case 11:Lt=[15,11];break;case 12:Lt=[64,33];break;case 13:Lt=[160,99];break;case 14:Lt=[4,3];break;case 15:Lt=[3,2];break;case 16:Lt=[2,1];break;case 255:{Lt=[he.readUnsignedByte()<<8|he.readUnsignedByte(),he.readUnsignedByte()<<8|he.readUnsignedByte()];break}}Lt&&Lt[0]/Lt[1]}return{profileIdc:je,levelIdc:Ut,profileCompatibility:ui,width:(Lf+1)*16-F*2-z*2,height:(2-Qu)*(Mf+1)*16-xe*2-De*2,sarRatio:Lt}}},Os.prototype=new i;var Bv={H264Stream:Os,NalByteStream:ga},Vv=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],pf=function(d,h){var f=d[h+6]<<21|d[h+7]<<14|d[h+8]<<7|d[h+9],p=d[h+5],v=(p&16)>>4;return f=f>=0?f:0,v?f+20:f+10},Hv=function y(d,h){return d.length-h<10||d[h]!=="I".charCodeAt(0)||d[h+1]!=="D".charCodeAt(0)||d[h+2]!=="3".charCodeAt(0)?h:(h+=pf(d,h),y(d,h))},jv=function(d){var h=Hv(d,0);return d.length>=h+2&&(d[h]&255)===255&&(d[h+1]&240)===240&&(d[h+1]&22)===16},mf=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Wv=function(d,h,f){var p,v="";for(p=h;p<f;p++)v+="%"+("00"+d[p].toString(16)).slice(-2);return v},Gv=function(d,h,f){return unescape(Wv(d,h,f))},qv=function(d,h){var f=(d[h+5]&224)>>5,p=d[h+4]<<3,v=d[h+3]&3<<11;return v|p|f},zv=function(d,h){return d[h]==="I".charCodeAt(0)&&d[h+1]==="D".charCodeAt(0)&&d[h+2]==="3".charCodeAt(0)?"timed-metadata":d[h]&!0&&(d[h+1]&240)===240?"audio":null},Kv=function(d){for(var h=0;h+5<d.length;){if(d[h]!==255||(d[h+1]&246)!==240){h++;continue}return Vv[(d[h+2]&60)>>>2]}return null},Xv=function(d){var h,f,p,v;h=10,d[5]&64&&(h+=4,h+=mf(d.subarray(10,14)));do{if(f=mf(d.subarray(h+4,h+8)),f<1)return null;if(v=String.fromCharCode(d[h],d[h+1],d[h+2],d[h+3]),v==="PRIV"){p=d.subarray(h+10,h+f+10);for(var _=0;_<p.byteLength;_++)if(p[_]===0){var w=Gv(p,0,_);if(w==="com.apple.streaming.transportStreamTimestamp"){var k=p.subarray(_+1),M=(k[3]&1)<<30|k[4]<<22|k[5]<<14|k[6]<<6|k[7]>>>2;return M*=4,M+=k[7]&3,M}break}}h+=10,h+=f}while(h<d.byteLength);return null},Ls={isLikelyAacData:jv,parseId3TagSize:pf,parseAdtsSize:qv,parseType:zv,parseSampleRate:Kv,parseAacTimestamp:Xv},Ms;Ms=function(){var d=new Uint8Array,h=0;Ms.prototype.init.call(this),this.setTimestamp=function(f){h=f},this.push=function(f){var p=0,v=0,_,w,k,M;for(d.length?(M=d.length,d=new Uint8Array(f.byteLength+M),d.set(d.subarray(0,M)),d.set(f,M)):d=f;d.length-v>=3;){if(d[v]==="I".charCodeAt(0)&&d[v+1]==="D".charCodeAt(0)&&d[v+2]==="3".charCodeAt(0)){if(d.length-v<10||(p=Ls.parseId3TagSize(d,v),v+p>d.length))break;w={type:"timed-metadata",data:d.subarray(v,v+p)},this.trigger("data",w),v+=p;continue}else if((d[v]&255)===255&&(d[v+1]&240)===240){if(d.length-v<7||(p=Ls.parseAdtsSize(d,v),v+p>d.length))break;k={type:"audio",data:d.subarray(v,v+p),pts:h,dts:h},this.trigger("data",k),v+=p;continue}v++}_=d.length-v,_>0?d=d.subarray(v):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},Ms.prototype=new i;var $v=Ms,Yv=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],qu=Yv,Qv=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],zu=Qv,Zv=Bv.H264Stream,Jv=Ls.isLikelyAacData,e0=tt.ONE_SECOND_IN_TS,va,Ln,Rs,zr,t0=function(d,h){h.stream=d,this.trigger("log",h)},gf=function(d,h){for(var f=Object.keys(h),p=0;p<f.length;p++){var v=f[p];v==="headOfPipeline"||!h[v].on||h[v].on("log",t0.bind(d,v))}},vf=function(d,h){var f;if(d.length!==h.length)return!1;for(f=0;f<d.length;f++)if(d[f]!==h[f])return!1;return!0},Ku=function(d,h,f,p,v,_){var w=f-h,k=p-h,M=v-f;return{start:{dts:d,pts:d+w},end:{dts:d+k,pts:d+M},prependedContentDuration:_,baseMediaDecodeTime:d}};Ln=function(d,h){var f=[],p,v=0,_=0,w=1/0;h=h||{},p=h.firstSequenceNumber||0,Ln.prototype.init.call(this),this.push=function(k){Ui.collectDtsInfo(d,k),d&&qu.forEach(function(M){d[M]=k[M]}),f.push(k)},this.setEarliestDts=function(k){v=k},this.setVideoBaseMediaDecodeTime=function(k){w=k},this.setAudioAppendStart=function(k){_=k},this.flush=function(){var k,M,L,F,z,xe,De;if(f.length===0){this.trigger("done","AudioSegmentStream");return}k=Ts.trimAdtsFramesByEarliestDts(f,d,v),d.baseMediaDecodeTime=Ui.calculateTrackBaseMediaDecodeTime(d,h.keepOriginalTimestamps),De=Ts.prefixWithSilence(d,k,_,w),d.samples=Ts.generateSampleTable(k),L=Yi.mdat(Ts.concatenateFrameData(k)),f=[],M=Yi.moof(p,[d]),F=new Uint8Array(M.byteLength+L.byteLength),p++,F.set(M),F.set(L,M.byteLength),Ui.clearDtsInfo(d),z=Math.ceil(e0*1024/d.samplerate),k.length&&(xe=k.length*z,this.trigger("segmentTimingInfo",Ku(tt.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),k[0].dts,k[0].pts,k[0].dts+xe,k[0].pts+xe,De||0)),this.trigger("timingInfo",{start:k[0].pts,end:k[0].pts+xe})),this.trigger("data",{track:d,boxes:F}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Ui.clearDtsInfo(d),f=[],this.trigger("reset")}},Ln.prototype=new i,va=function(d,h){var f,p=[],v=[],_,w;h=h||{},f=h.firstSequenceNumber||0,va.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(k){Ui.collectDtsInfo(d,k),k.nalUnitType==="seq_parameter_set_rbsp"&&!_&&(_=k.config,d.sps=[k.data],zu.forEach(function(M){d[M]=_[M]},this)),k.nalUnitType==="pic_parameter_set_rbsp"&&!w&&(w=k.data,d.pps=[k.data]),p.push(k)},this.flush=function(){for(var k,M,L,F,z,xe,De=0,he,je;p.length&&p[0].nalUnitType!=="access_unit_delimiter_rbsp";)p.shift();if(p.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(k=ha.groupNalsIntoFrames(p),L=ha.groupFramesIntoGops(k),L[0][0].keyFrame||(M=this.getGopForFusion_(p[0],d),M?(De=M.duration,L.unshift(M),L.byteLength+=M.byteLength,L.nalCount+=M.nalCount,L.pts=M.pts,L.dts=M.dts,L.duration+=M.duration):L=ha.extendFirstKeyFrame(L)),v.length){var Ut;if(h.alignGopsAtEnd?Ut=this.alignGopsAtEnd_(L):Ut=this.alignGopsAtStart_(L),!Ut){this.gopCache_.unshift({gop:L.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Ui.clearDtsInfo(d),L=Ut}Ui.collectDtsInfo(d,L),d.samples=ha.generateSampleTable(L),z=Yi.mdat(ha.concatenateNalData(L)),d.baseMediaDecodeTime=Ui.calculateTrackBaseMediaDecodeTime(d,h.keepOriginalTimestamps),this.trigger("processedGopsInfo",L.map(function(ui){return{pts:ui.pts,dts:ui.dts,byteLength:ui.byteLength}})),he=L[0],je=L[L.length-1],this.trigger("segmentTimingInfo",Ku(d.baseMediaDecodeTime,he.dts,he.pts,je.dts+je.duration,je.pts+je.duration,De)),this.trigger("timingInfo",{start:L[0].pts,end:L[L.length-1].pts+L[L.length-1].duration}),this.gopCache_.unshift({gop:L.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),F=Yi.moof(f,[d]),xe=new Uint8Array(F.byteLength+z.byteLength),f++,xe.set(F),xe.set(z,F.byteLength),this.trigger("data",{track:d,boxes:xe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),p=[],this.gopCache_.length=0,v.length=0,this.trigger("reset")},this.resetStream_=function(){Ui.clearDtsInfo(d),_=void 0,w=void 0},this.getGopForFusion_=function(k){var M=45e3,L=1e4,F=1/0,z,xe,De,he,je;for(je=0;je<this.gopCache_.length;je++)he=this.gopCache_[je],De=he.gop,!(!(d.pps&&vf(d.pps[0],he.pps[0]))||!(d.sps&&vf(d.sps[0],he.sps[0])))&&(De.dts<d.timelineStartInfo.dts||(z=k.dts-De.dts-De.duration,z>=-L&&z<=M&&(!xe||F>z)&&(xe=he,F=z)));return xe?xe.gop:null},this.alignGopsAtStart_=function(k){var M,L,F,z,xe,De,he,je;for(xe=k.byteLength,De=k.nalCount,he=k.duration,M=L=0;M<v.length&&L<k.length&&(F=v[M],z=k[L],F.pts!==z.pts);){if(z.pts>F.pts){M++;continue}L++,xe-=z.byteLength,De-=z.nalCount,he-=z.duration}return L===0?k:L===k.length?null:(je=k.slice(L),je.byteLength=xe,je.duration=he,je.nalCount=De,je.pts=je[0].pts,je.dts=je[0].dts,je)},this.alignGopsAtEnd_=function(k){var M,L,F,z,xe,De;for(M=v.length-1,L=k.length-1,xe=null,De=!1;M>=0&&L>=0;){if(F=v[M],z=k[L],F.pts===z.pts){De=!0;break}if(F.pts>z.pts){M--;continue}M===v.length-1&&(xe=L),L--}if(!De&&xe===null)return null;var he;if(De?he=L:he=xe,he===0)return k;var je=k.slice(he),Ut=je.reduce(function(ui,$r){return ui.byteLength+=$r.byteLength,ui.duration+=$r.duration,ui.nalCount+=$r.nalCount,ui},{byteLength:0,duration:0,nalCount:0});return je.byteLength=Ut.byteLength,je.duration=Ut.duration,je.nalCount=Ut.nalCount,je.pts=je[0].pts,je.dts=je[0].dts,je},this.alignGopsWith=function(k){v=k}},va.prototype=new i,zr=function(d,h){this.numberOfTracks=0,this.metadataStream=h,d=d||{},typeof d.remux!="undefined"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,zr.prototype.init.call(this),this.push=function(f){if(f.text)return this.pendingCaptions.push(f);if(f.frames)return this.pendingMetadata.push(f);this.pendingTracks.push(f.track),this.pendingBytes+=f.boxes.byteLength,f.track.type==="video"&&(this.videoTrack=f.track,this.pendingBoxes.push(f.boxes)),f.track.type==="audio"&&(this.audioTrack=f.track,this.pendingBoxes.unshift(f.boxes))}},zr.prototype=new i,zr.prototype.flush=function(y){var d=0,h={captions:[],captionStreams:{},metadata:[],info:{}},f,p,v,_=0,w;if(this.pendingTracks.length<this.numberOfTracks){if(y!=="VideoSegmentStream"&&y!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(_=this.videoTrack.timelineStartInfo.pts,zu.forEach(function(k){h.info[k]=this.videoTrack[k]},this)):this.audioTrack&&(_=this.audioTrack.timelineStartInfo.pts,qu.forEach(function(k){h.info[k]=this.audioTrack[k]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?h.type=this.pendingTracks[0].type:h.type="combined",this.emittedTracks+=this.pendingTracks.length,v=Yi.initSegment(this.pendingTracks),h.initSegment=new Uint8Array(v.byteLength),h.initSegment.set(v),h.data=new Uint8Array(this.pendingBytes),w=0;w<this.pendingBoxes.length;w++)h.data.set(this.pendingBoxes[w],d),d+=this.pendingBoxes[w].byteLength;for(w=0;w<this.pendingCaptions.length;w++)f=this.pendingCaptions[w],f.startTime=tt.metadataTsToSeconds(f.startPts,_,this.keepOriginalTimestamps),f.endTime=tt.metadataTsToSeconds(f.endPts,_,this.keepOriginalTimestamps),h.captionStreams[f.stream]=!0,h.captions.push(f);for(w=0;w<this.pendingMetadata.length;w++)p=this.pendingMetadata[w],p.cueTime=tt.metadataTsToSeconds(p.pts,_,this.keepOriginalTimestamps),h.metadata.push(p);for(h.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",h),w=0;w<h.captions.length;w++)f=h.captions[w],this.trigger("caption",f);for(w=0;w<h.metadata.length;w++)p=h.metadata[w],this.trigger("id3Frame",p)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},zr.prototype.setRemux=function(y){this.remuxTracks=y},Rs=function(d){var h=this,f=!0,p,v;Rs.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var _={};this.transmuxPipeline_=_,_.type="aac",_.metadataStream=new gr.MetadataStream,_.aacStream=new $v,_.audioTimestampRolloverStream=new gr.TimestampRolloverStream("audio"),_.timedMetadataTimestampRolloverStream=new gr.TimestampRolloverStream("timed-metadata"),_.adtsStream=new cf,_.coalesceStream=new zr(d,_.metadataStream),_.headOfPipeline=_.aacStream,_.aacStream.pipe(_.audioTimestampRolloverStream).pipe(_.adtsStream),_.aacStream.pipe(_.timedMetadataTimestampRolloverStream).pipe(_.metadataStream).pipe(_.coalesceStream),_.metadataStream.on("timestamp",function(w){_.aacStream.setTimestamp(w.timeStamp)}),_.aacStream.on("data",function(w){w.type!=="timed-metadata"&&w.type!=="audio"||_.audioSegmentStream||(v=v||{timelineStartInfo:{baseMediaDecodeTime:h.baseMediaDecodeTime},codec:"adts",type:"audio"},_.coalesceStream.numberOfTracks++,_.audioSegmentStream=new Ln(v,d),_.audioSegmentStream.on("log",h.getLogTrigger_("audioSegmentStream")),_.audioSegmentStream.on("timingInfo",h.trigger.bind(h,"audioTimingInfo")),_.adtsStream.pipe(_.audioSegmentStream).pipe(_.coalesceStream),h.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!p}))}),_.coalesceStream.on("data",this.trigger.bind(this,"data")),_.coalesceStream.on("done",this.trigger.bind(this,"done")),gf(this,_)},this.setupTsPipeline=function(){var _={};this.transmuxPipeline_=_,_.type="ts",_.metadataStream=new gr.MetadataStream,_.packetStream=new gr.TransportPacketStream,_.parseStream=new gr.TransportParseStream,_.elementaryStream=new gr.ElementaryStream,_.timestampRolloverStream=new gr.TimestampRolloverStream,_.adtsStream=new cf,_.h264Stream=new Zv,_.captionStream=new gr.CaptionStream(d),_.coalesceStream=new zr(d,_.metadataStream),_.headOfPipeline=_.packetStream,_.packetStream.pipe(_.parseStream).pipe(_.elementaryStream).pipe(_.timestampRolloverStream),_.timestampRolloverStream.pipe(_.h264Stream),_.timestampRolloverStream.pipe(_.adtsStream),_.timestampRolloverStream.pipe(_.metadataStream).pipe(_.coalesceStream),_.h264Stream.pipe(_.captionStream).pipe(_.coalesceStream),_.elementaryStream.on("data",function(w){var k;if(w.type==="metadata"){for(k=w.tracks.length;k--;)!p&&w.tracks[k].type==="video"?(p=w.tracks[k],p.timelineStartInfo.baseMediaDecodeTime=h.baseMediaDecodeTime):!v&&w.tracks[k].type==="audio"&&(v=w.tracks[k],v.timelineStartInfo.baseMediaDecodeTime=h.baseMediaDecodeTime);p&&!_.videoSegmentStream&&(_.coalesceStream.numberOfTracks++,_.videoSegmentStream=new va(p,d),_.videoSegmentStream.on("log",h.getLogTrigger_("videoSegmentStream")),_.videoSegmentStream.on("timelineStartInfo",function(M){v&&!d.keepOriginalTimestamps&&(v.timelineStartInfo=M,_.audioSegmentStream.setEarliestDts(M.dts-h.baseMediaDecodeTime))}),_.videoSegmentStream.on("processedGopsInfo",h.trigger.bind(h,"gopInfo")),_.videoSegmentStream.on("segmentTimingInfo",h.trigger.bind(h,"videoSegmentTimingInfo")),_.videoSegmentStream.on("baseMediaDecodeTime",function(M){v&&_.audioSegmentStream.setVideoBaseMediaDecodeTime(M)}),_.videoSegmentStream.on("timingInfo",h.trigger.bind(h,"videoTimingInfo")),_.h264Stream.pipe(_.videoSegmentStream).pipe(_.coalesceStream)),v&&!_.audioSegmentStream&&(_.coalesceStream.numberOfTracks++,_.audioSegmentStream=new Ln(v,d),_.audioSegmentStream.on("log",h.getLogTrigger_("audioSegmentStream")),_.audioSegmentStream.on("timingInfo",h.trigger.bind(h,"audioTimingInfo")),_.audioSegmentStream.on("segmentTimingInfo",h.trigger.bind(h,"audioSegmentTimingInfo")),_.adtsStream.pipe(_.audioSegmentStream).pipe(_.coalesceStream)),h.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!p})}}),_.coalesceStream.on("data",this.trigger.bind(this,"data")),_.coalesceStream.on("id3Frame",function(w){w.dispatchType=_.metadataStream.dispatchType,h.trigger("id3Frame",w)}),_.coalesceStream.on("caption",this.trigger.bind(this,"caption")),_.coalesceStream.on("done",this.trigger.bind(this,"done")),gf(this,_)},this.setBaseMediaDecodeTime=function(_){var w=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=_),v&&(v.timelineStartInfo.dts=void 0,v.timelineStartInfo.pts=void 0,Ui.clearDtsInfo(v),w.audioTimestampRolloverStream&&w.audioTimestampRolloverStream.discontinuity()),p&&(w.videoSegmentStream&&(w.videoSegmentStream.gopCache_=[]),p.timelineStartInfo.dts=void 0,p.timelineStartInfo.pts=void 0,Ui.clearDtsInfo(p),w.captionStream.reset()),w.timestampRolloverStream&&w.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(_){v&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(_)},this.setRemux=function(_){var w=this.transmuxPipeline_;d.remux=_,w&&w.coalesceStream&&w.coalesceStream.setRemux(_)},this.alignGopsWith=function(_){p&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(_)},this.getLogTrigger_=function(_){var w=this;return function(k){k.stream=_,w.trigger("log",k)}},this.push=function(_){if(f){var w=Jv(_);w&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!w&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),f=!1}this.transmuxPipeline_.headOfPipeline.push(_)},this.flush=function(){f=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Rs.prototype=new i;var i0={Transmuxer:Rs,VideoSegmentStream:va,AudioSegmentStream:Ln,AUDIO_PROPERTIES:qu,VIDEO_PROPERTIES:zu,generateSegmentTimingInfo:Ku},r0=function(d){return d>>>0},n0=function(d){return("00"+d.toString(16)).slice(-2)},Ns={toUnsigned:r0,toHexString:n0},a0=function(d){var h="";return h+=String.fromCharCode(d[0]),h+=String.fromCharCode(d[1]),h+=String.fromCharCode(d[2]),h+=String.fromCharCode(d[3]),h},Kr=a0,s0=Ns.toUnsigned,o0=function y(d,h){var f=[],p,v,_,w,k;if(!h.length)return null;for(p=0;p<d.byteLength;)v=s0(d[p]<<24|d[p+1]<<16|d[p+2]<<8|d[p+3]),_=Kr(d.subarray(p+4,p+8)),w=v>1?p+v:d.byteLength,_===h[0]&&(h.length===1?f.push(d.subarray(p+8,w)):(k=y(d.subarray(p+8,w),h.slice(1)),k.length&&(f=f.concat(k)))),p=w;return f},Tt=o0,u0=Ns.toUnsigned,l0=e.getUint64,d0=function(d){var h={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return h.version===1?h.baseMediaDecodeTime=l0(d.subarray(4)):h.baseMediaDecodeTime=u0(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),h},_f=d0,c0=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},yf=c0,f0=function(d){var h={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},f=new DataView(d.buffer,d.byteOffset,d.byteLength),p=h.flags[2]&1,v=h.flags[2]&4,_=h.flags[1]&1,w=h.flags[1]&2,k=h.flags[1]&4,M=h.flags[1]&8,L=f.getUint32(4),F=8,z;for(p&&(h.dataOffset=f.getInt32(F),F+=4),v&&L&&(z={flags:yf(d.subarray(F,F+4))},F+=4,_&&(z.duration=f.getUint32(F),F+=4),w&&(z.size=f.getUint32(F),F+=4),M&&(h.version===1?z.compositionTimeOffset=f.getInt32(F):z.compositionTimeOffset=f.getUint32(F),F+=4),h.samples.push(z),L--);L--;)z={},_&&(z.duration=f.getUint32(F),F+=4),w&&(z.size=f.getUint32(F),F+=4),k&&(z.flags=yf(d.subarray(F,F+4)),F+=4),M&&(h.version===1?z.compositionTimeOffset=f.getInt32(F):z.compositionTimeOffset=f.getUint32(F),F+=4),h.samples.push(z);return h},Tf=f0,h0=function(d){var h=new DataView(d.buffer,d.byteOffset,d.byteLength),f={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:h.getUint32(4)},p=f.flags[2]&1,v=f.flags[2]&2,_=f.flags[2]&8,w=f.flags[2]&16,k=f.flags[2]&32,M=f.flags[0]&65536,L=f.flags[0]&131072,F;return F=8,p&&(F+=4,f.baseDataOffset=h.getUint32(12),F+=4),v&&(f.sampleDescriptionIndex=h.getUint32(F),F+=4),_&&(f.defaultSampleDuration=h.getUint32(F),F+=4),w&&(f.defaultSampleSize=h.getUint32(F),F+=4),k&&(f.defaultSampleFlags=h.getUint32(F)),M&&(f.durationIsEmpty=!0),!p&&L&&(f.baseDataOffsetIsMoof=!0),f},bf=h0,xf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof R.g!="undefined"?R.g:typeof self!="undefined"?self:{},_a;typeof window!="undefined"?_a=window:typeof xf!="undefined"?_a=xf:typeof self!="undefined"?_a=self:_a={};var ya=_a,p0=pa.discardEmulationPreventionBytes,m0=Cs.CaptionStream,g0=function(d,h){for(var f=d,p=0;p<h.length;p++){var v=h[p];if(f<v.size)return v;f-=v.size}return null},v0=function(d,h,f){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),v={logs:[],seiNals:[]},_,w,k,M;for(w=0;w+4<d.length;w+=k)if(k=p.getUint32(w),w+=4,!(k<=0))switch(d[w]&31){case 6:var L=d.subarray(w+1,w+1+k),F=g0(w,h);if(_={nalUnitType:"sei_rbsp",size:k,data:L,escapedRBSP:p0(L),trackId:f},F)_.pts=F.pts,_.dts=F.dts,M=F;else if(M)_.pts=M.pts,_.dts=M.dts;else{v.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+w+" for trackId "+f+". See mux.js#223."});break}v.seiNals.push(_);break}return v},_0=function(d,h,f){var p=h,v=f.defaultSampleDuration||0,_=f.defaultSampleSize||0,w=f.trackId,k=[];return d.forEach(function(M){var L=Tf(M),F=L.samples;F.forEach(function(z){z.duration===void 0&&(z.duration=v),z.size===void 0&&(z.size=_),z.trackId=w,z.dts=p,z.compositionTimeOffset===void 0&&(z.compositionTimeOffset=0),typeof p=="bigint"?(z.pts=p+ya.BigInt(z.compositionTimeOffset),p+=ya.BigInt(z.duration)):(z.pts=p+z.compositionTimeOffset,p+=z.duration)}),k=k.concat(F)}),k},y0=function(d,h){var f=Tt(d,["moof","traf"]),p=Tt(d,["mdat"]),v={},_=[];return p.forEach(function(w,k){var M=f[k];_.push({mdat:w,traf:M})}),_.forEach(function(w){var k=w.mdat,M=w.traf,L=Tt(M,["tfhd"]),F=bf(L[0]),z=F.trackId,xe=Tt(M,["tfdt"]),De=xe.length>0?_f(xe[0]).baseMediaDecodeTime:0,he=Tt(M,["trun"]),je,Ut;h===z&&he.length>0&&(je=_0(he,De,F),Ut=v0(k,je,z),v[z]||(v[z]={seiNals:[],logs:[]}),v[z].seiNals=v[z].seiNals.concat(Ut.seiNals),v[z].logs=v[z].logs.concat(Ut.logs))}),v},T0=function(d,h,f){var p;if(h===null)return null;p=y0(d,h);var v=p[h]||{};return{seiNals:v.seiNals,logs:v.logs,timescale:f}},b0=function(){var d=!1,h,f,p,v,_,w;this.isInitialized=function(){return d},this.init=function(k){h=new m0,d=!0,w=k?k.isPartial:!1,h.on("data",function(M){M.startTime=M.startPts/v,M.endTime=M.endPts/v,_.captions.push(M),_.captionStreams[M.stream]=!0}),h.on("log",function(M){_.logs.push(M)})},this.isNewInit=function(k,M){return k&&k.length===0||M&&typeof M=="object"&&Object.keys(M).length===0?!1:p!==k[0]||v!==M[p]},this.parse=function(k,M,L){var F;if(this.isInitialized()){if(!M||!L)return null;if(this.isNewInit(M,L))p=M[0],v=L[p];else if(p===null||!v)return f.push(k),null}else return null;for(;f.length>0;){var z=f.shift();this.parse(z,M,L)}return F=T0(k,p,v),F&&F.logs&&(_.logs=_.logs.concat(F.logs)),F===null||!F.seiNals?_.logs.length?{logs:_.logs,captions:[],captionStreams:[]}:null:(this.pushNals(F.seiNals),this.flushStream(),_)},this.pushNals=function(k){if(!this.isInitialized()||!k||k.length===0)return null;k.forEach(function(M){h.push(M)})},this.flushStream=function(){if(!this.isInitialized())return null;w?h.partialFlush():h.flush()},this.clearParsedCaptions=function(){_.captions=[],_.captionStreams={},_.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;h.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){f=[],p=null,v=null,_?this.clearParsedCaptions():_={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},x0=b0,Fs=Ns.toUnsigned,Ta=Ns.toHexString,S0=e.getUint64,Sf,Ef,Cf,wf,Af,Xu;Sf=function(d){var h={},f=Tt(d,["moov","trak"]);return f.reduce(function(p,v){var _,w,k,M,L;return _=Tt(v,["tkhd"])[0],!_||(w=_[0],k=w===0?12:20,M=Fs(_[k]<<24|_[k+1]<<16|_[k+2]<<8|_[k+3]),L=Tt(v,["mdia","mdhd"])[0],!L)?null:(w=L[0],k=w===0?12:20,p[M]=Fs(L[k]<<24|L[k+1]<<16|L[k+2]<<8|L[k+3]),p)},h)},Ef=function(d,h){var f;f=Tt(h,["moof","traf"]);var p=f.reduce(function(v,_){var w=Tt(_,["tfhd"])[0],k=Fs(w[4]<<24|w[5]<<16|w[6]<<8|w[7]),M=d[k]||9e4,L=Tt(_,["tfdt"])[0],F=new DataView(L.buffer,L.byteOffset,L.byteLength),z;L[0]===1?z=S0(L.subarray(4,12)):z=F.getUint32(4);var xe;return typeof z=="bigint"?xe=z/ya.BigInt(M):typeof z=="number"&&!isNaN(z)&&(xe=z/M),xe<Number.MAX_SAFE_INTEGER&&(xe=Number(xe)),xe<v&&(v=xe),v},1/0);return typeof p=="bigint"||isFinite(p)?p:0},Cf=function(d,h){var f=Tt(h,["moof","traf"]),p=0,v=0,_;if(f&&f.length){var w=Tt(f[0],["tfhd"])[0],k=Tt(f[0],["trun"])[0],M=Tt(f[0],["tfdt"])[0];if(w){var L=bf(w);_=L.trackId}if(M){var F=_f(M);p=F.baseMediaDecodeTime}if(k){var z=Tf(k);z.samples&&z.samples.length&&(v=z.samples[0].compositionTimeOffset||0)}}var xe=d[_]||9e4;typeof p=="bigint"&&(v=ya.BigInt(v),xe=ya.BigInt(xe));var De=(p+v)/xe;return typeof De=="bigint"&&De<Number.MAX_SAFE_INTEGER&&(De=Number(De)),De},wf=function(d){var h=Tt(d,["moov","trak"]),f=[];return h.forEach(function(p){var v=Tt(p,["mdia","hdlr"]),_=Tt(p,["tkhd"]);v.forEach(function(w,k){var M=Kr(w.subarray(8,12)),L=_[k],F,z,xe;M==="vide"&&(F=new DataView(L.buffer,L.byteOffset,L.byteLength),z=F.getUint8(0),xe=z===0?F.getUint32(12):F.getUint32(20),f.push(xe))})}),f},Xu=function(d){var h=d[0],f=h===0?12:20;return Fs(d[f]<<24|d[f+1]<<16|d[f+2]<<8|d[f+3])},Af=function(d){var h=Tt(d,["moov","trak"]),f=[];return h.forEach(function(p){var v={},_=Tt(p,["tkhd"])[0],w,k;_&&(w=new DataView(_.buffer,_.byteOffset,_.byteLength),k=w.getUint8(0),v.id=k===0?w.getUint32(12):w.getUint32(20));var M=Tt(p,["mdia","hdlr"])[0];if(M){var L=Kr(M.subarray(8,12));L==="vide"?v.type="video":L==="soun"?v.type="audio":v.type=L}var F=Tt(p,["mdia","minf","stbl","stsd"])[0];if(F){var z=F.subarray(8);v.codec=Kr(z.subarray(4,8));var xe=Tt(z,[v.codec])[0],De,he;xe&&(/^[asm]vc[1-9]$/i.test(v.codec)?(De=xe.subarray(78),he=Kr(De.subarray(4,8)),he==="avcC"&&De.length>11?(v.codec+=".",v.codec+=Ta(De[9]),v.codec+=Ta(De[10]),v.codec+=Ta(De[11])):v.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(v.codec)?(De=xe.subarray(28),he=Kr(De.subarray(4,8)),he==="esds"&&De.length>20&&De[19]!==0?(v.codec+="."+Ta(De[19]),v.codec+="."+Ta(De[20]>>>2&63).replace(/^0/,"")):v.codec="mp4a.40.2"):v.codec=v.codec.toLowerCase())}var je=Tt(p,["mdia","mdhd"])[0];je&&(v.timescale=Xu(je)),f.push(v)}),f};var Pf={findBox:Tt,parseType:Kr,timescale:Sf,startTime:Ef,compositionStartTime:Cf,videoTrackIds:wf,tracks:Af,getTimescaleFromMediaHeader:Xu},If=function(d){var h=d[1]&31;return h<<=8,h|=d[2],h},Us=function(d){return!!(d[1]&64)},Bs=function(d){var h=0;return(d[3]&48)>>>4>1&&(h+=d[4]+1),h},E0=function(d,h){var f=If(d);return f===0?"pat":f===h?"pmt":h?"pes":null},C0=function(d){var h=Us(d),f=4+Bs(d);return h&&(f+=d[f]+1),(d[f+10]&31)<<8|d[f+11]},w0=function(d){var h={},f=Us(d),p=4+Bs(d);if(f&&(p+=d[p]+1),!!(d[p+5]&1)){var v,_,w;v=(d[p+1]&15)<<8|d[p+2],_=3+v-4,w=(d[p+10]&15)<<8|d[p+11];for(var k=12+w;k<_;){var M=p+k;h[(d[M+1]&31)<<8|d[M+2]]=d[M],k+=((d[M+3]&15)<<8|d[M+4])+5}return h}},A0=function(d,h){var f=If(d),p=h[f];switch(p){case Kt.H264_STREAM_TYPE:return"video";case Kt.ADTS_STREAM_TYPE:return"audio";case Kt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},P0=function(d){var h=Us(d);if(!h)return null;var f=4+Bs(d);if(f>=d.byteLength)return null;var p=null,v;return v=d[f+7],v&192&&(p={},p.pts=(d[f+9]&14)<<27|(d[f+10]&255)<<20|(d[f+11]&254)<<12|(d[f+12]&255)<<5|(d[f+13]&254)>>>3,p.pts*=4,p.pts+=(d[f+13]&6)>>>1,p.dts=p.pts,v&64&&(p.dts=(d[f+14]&14)<<27|(d[f+15]&255)<<20|(d[f+16]&254)<<12|(d[f+17]&255)<<5|(d[f+18]&254)>>>3,p.dts*=4,p.dts+=(d[f+18]&6)>>>1)),p},$u=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},I0=function(d){for(var h=4+Bs(d),f=d.subarray(h),p=0,v=0,_=!1,w;v<f.byteLength-3;v++)if(f[v+2]===1){p=v+5;break}for(;p<f.byteLength;)switch(f[p]){case 0:if(f[p-1]!==0){p+=2;break}else if(f[p-2]!==0){p++;break}v+3!==p-2&&(w=$u(f[v+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(_=!0));do p++;while(f[p]!==1&&p<f.length);v=p-2,p+=3;break;case 1:if(f[p-1]!==0||f[p-2]!==0){p+=3;break}w=$u(f[v+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(_=!0),v=p-2,p+=3;break;default:p+=3;break}return f=f.subarray(v),p-=v,v=0,f&&f.byteLength>3&&(w=$u(f[v+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(_=!0)),_},k0={parseType:E0,parsePat:C0,parsePmt:w0,parsePayloadUnitStartIndicator:Us,parsePesType:A0,parsePesTime:P0,videoPacketContainsKeyFrame:I0},Mn=sf.handleRollover,ot={};ot.ts=k0,ot.aac=Ls;var Xr=tt.ONE_SECOND_IN_TS,oi=188,Qi=71,D0=function(d,h){for(var f=0,p=oi,v,_;p<d.byteLength;){if(d[f]===Qi&&d[p]===Qi){switch(v=d.subarray(f,p),_=ot.ts.parseType(v,h.pid),_){case"pat":h.pid=ot.ts.parsePat(v);break;case"pmt":var w=ot.ts.parsePmt(v);h.table=h.table||{},Object.keys(w).forEach(function(k){h.table[k]=w[k]});break}f+=oi,p+=oi;continue}f++,p++}},kf=function(d,h,f){for(var p=0,v=oi,_,w,k,M,L,F=!1;v<=d.byteLength;){if(d[p]===Qi&&(d[v]===Qi||v===d.byteLength)){switch(_=d.subarray(p,v),w=ot.ts.parseType(_,h.pid),w){case"pes":k=ot.ts.parsePesType(_,h.table),M=ot.ts.parsePayloadUnitStartIndicator(_),k==="audio"&&M&&(L=ot.ts.parsePesTime(_),L&&(L.type="audio",f.audio.push(L),F=!0));break}if(F)break;p+=oi,v+=oi;continue}p++,v++}for(v=d.byteLength,p=v-oi,F=!1;p>=0;){if(d[p]===Qi&&(d[v]===Qi||v===d.byteLength)){switch(_=d.subarray(p,v),w=ot.ts.parseType(_,h.pid),w){case"pes":k=ot.ts.parsePesType(_,h.table),M=ot.ts.parsePayloadUnitStartIndicator(_),k==="audio"&&M&&(L=ot.ts.parsePesTime(_),L&&(L.type="audio",f.audio.push(L),F=!0));break}if(F)break;p-=oi,v-=oi;continue}p--,v--}},O0=function(d,h,f){for(var p=0,v=oi,_,w,k,M,L,F,z,xe,De=!1,he={data:[],size:0};v<d.byteLength;){if(d[p]===Qi&&d[v]===Qi){switch(_=d.subarray(p,v),w=ot.ts.parseType(_,h.pid),w){case"pes":if(k=ot.ts.parsePesType(_,h.table),M=ot.ts.parsePayloadUnitStartIndicator(_),k==="video"&&(M&&!De&&(L=ot.ts.parsePesTime(_),L&&(L.type="video",f.video.push(L),De=!0)),!f.firstKeyFrame)){if(M&&he.size!==0){for(F=new Uint8Array(he.size),z=0;he.data.length;)xe=he.data.shift(),F.set(xe,z),z+=xe.byteLength;if(ot.ts.videoPacketContainsKeyFrame(F)){var je=ot.ts.parsePesTime(F);je?(f.firstKeyFrame=je,f.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}he.size=0}he.data.push(_),he.size+=_.byteLength}break}if(De&&f.firstKeyFrame)break;p+=oi,v+=oi;continue}p++,v++}for(v=d.byteLength,p=v-oi,De=!1;p>=0;){if(d[p]===Qi&&d[v]===Qi){switch(_=d.subarray(p,v),w=ot.ts.parseType(_,h.pid),w){case"pes":k=ot.ts.parsePesType(_,h.table),M=ot.ts.parsePayloadUnitStartIndicator(_),k==="video"&&M&&(L=ot.ts.parsePesTime(_),L&&(L.type="video",f.video.push(L),De=!0));break}if(De)break;p-=oi,v-=oi;continue}p--,v--}},L0=function(d,h){if(d.audio&&d.audio.length){var f=h;(typeof f=="undefined"||isNaN(f))&&(f=d.audio[0].dts),d.audio.forEach(function(_){_.dts=Mn(_.dts,f),_.pts=Mn(_.pts,f),_.dtsTime=_.dts/Xr,_.ptsTime=_.pts/Xr})}if(d.video&&d.video.length){var p=h;if((typeof p=="undefined"||isNaN(p))&&(p=d.video[0].dts),d.video.forEach(function(_){_.dts=Mn(_.dts,p),_.pts=Mn(_.pts,p),_.dtsTime=_.dts/Xr,_.ptsTime=_.pts/Xr}),d.firstKeyFrame){var v=d.firstKeyFrame;v.dts=Mn(v.dts,p),v.pts=Mn(v.pts,p),v.dtsTime=v.dts/Xr,v.ptsTime=v.pts/Xr}}},M0=function(d){for(var h=!1,f=0,p=null,v=null,_=0,w=0,k;d.length-w>=3;){var M=ot.aac.parseType(d,w);switch(M){case"timed-metadata":if(d.length-w<10){h=!0;break}if(_=ot.aac.parseId3TagSize(d,w),_>d.length){h=!0;break}v===null&&(k=d.subarray(w,w+_),v=ot.aac.parseAacTimestamp(k)),w+=_;break;case"audio":if(d.length-w<7){h=!0;break}if(_=ot.aac.parseAdtsSize(d,w),_>d.length){h=!0;break}p===null&&(k=d.subarray(w,w+_),p=ot.aac.parseSampleRate(k)),f++,w+=_;break;default:w++;break}if(h)return null}if(p===null||v===null)return null;var L=Xr/p,F={audio:[{type:"audio",dts:v,pts:v},{type:"audio",dts:v+f*1024*L,pts:v+f*1024*L}]};return F},R0=function(d){var h={pid:null,table:null},f={};D0(d,h);for(var p in h.table)if(h.table.hasOwnProperty(p)){var v=h.table[p];switch(v){case Kt.H264_STREAM_TYPE:f.video=[],O0(d,h,f),f.video.length===0&&delete f.video;break;case Kt.ADTS_STREAM_TYPE:f.audio=[],kf(d,h,f),f.audio.length===0&&delete f.audio;break}}return f},N0=function(d,h){var f=ot.aac.isLikelyAacData(d),p;return f?p=M0(d):p=R0(d),!p||!p.audio&&!p.video?null:(L0(p,h),p)},F0={inspect:N0,parseAudioPes_:kf},U0=function(d,h){h.on("data",function(f){var p=f.initSegment;f.initSegment={data:p.buffer,byteOffset:p.byteOffset,byteLength:p.byteLength};var v=f.data;f.data=v.buffer,d.postMessage({action:"data",segment:f,byteOffset:v.byteOffset,byteLength:v.byteLength},[f.data])}),h.on("done",function(f){d.postMessage({action:"done"})}),h.on("gopInfo",function(f){d.postMessage({action:"gopInfo",gopInfo:f})}),h.on("videoSegmentTimingInfo",function(f){var p={start:{decode:tt.videoTsToSeconds(f.start.dts),presentation:tt.videoTsToSeconds(f.start.pts)},end:{decode:tt.videoTsToSeconds(f.end.dts),presentation:tt.videoTsToSeconds(f.end.pts)},baseMediaDecodeTime:tt.videoTsToSeconds(f.baseMediaDecodeTime)};f.prependedContentDuration&&(p.prependedContentDuration=tt.videoTsToSeconds(f.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:p})}),h.on("audioSegmentTimingInfo",function(f){var p={start:{decode:tt.videoTsToSeconds(f.start.dts),presentation:tt.videoTsToSeconds(f.start.pts)},end:{decode:tt.videoTsToSeconds(f.end.dts),presentation:tt.videoTsToSeconds(f.end.pts)},baseMediaDecodeTime:tt.videoTsToSeconds(f.baseMediaDecodeTime)};f.prependedContentDuration&&(p.prependedContentDuration=tt.videoTsToSeconds(f.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:p})}),h.on("id3Frame",function(f){d.postMessage({action:"id3Frame",id3Frame:f})}),h.on("caption",function(f){d.postMessage({action:"caption",caption:f})}),h.on("trackinfo",function(f){d.postMessage({action:"trackinfo",trackInfo:f})}),h.on("audioTimingInfo",function(f){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:tt.videoTsToSeconds(f.start),end:tt.videoTsToSeconds(f.end)}})}),h.on("videoTimingInfo",function(f){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:tt.videoTsToSeconds(f.start),end:tt.videoTsToSeconds(f.end)}})}),h.on("log",function(f){d.postMessage({action:"log",log:f})})},Df=function(){function y(h,f){this.options=f||{},this.self=h,this.init()}var d=y.prototype;return d.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new i0.Transmuxer(this.options),U0(this.self,this.transmuxer)},d.pushMp4Captions=function(f){this.captionParser||(this.captionParser=new x0,this.captionParser.init());var p=new Uint8Array(f.data,f.byteOffset,f.byteLength),v=this.captionParser.parse(p,f.trackIds,f.timescales);this.self.postMessage({action:"mp4Captions",captions:v&&v.captions||[],logs:v&&v.logs||[],data:p.buffer},[p.buffer])},d.probeMp4StartTime=function(f){var p=f.timescales,v=f.data,_=Pf.startTime(p,v);this.self.postMessage({action:"probeMp4StartTime",startTime:_,data:v},[v.buffer])},d.probeMp4Tracks=function(f){var p=f.data,v=Pf.tracks(p);this.self.postMessage({action:"probeMp4Tracks",tracks:v,data:p},[p.buffer])},d.probeTs=function(f){var p=f.data,v=f.baseStartTime,_=typeof v=="number"&&!isNaN(v)?v*tt.ONE_SECOND_IN_TS:void 0,w=F0.inspect(p,_),k=null;w&&(k={hasVideo:w.video&&w.video.length===2||!1,hasAudio:w.audio&&w.audio.length===2||!1},k.hasVideo&&(k.videoStart=w.video[0].ptsTime),k.hasAudio&&(k.audioStart=w.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:k,data:p},[p.buffer])},d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},d.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},d.push=function(f){var p=new Uint8Array(f.data,f.byteOffset,f.byteLength);this.transmuxer.push(p)},d.reset=function(){this.transmuxer.reset()},d.setTimestampOffset=function(f){var p=f.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(tt.secondsToVideoTs(p)))},d.setAudioAppendStart=function(f){this.transmuxer.setAudioAppendStart(Math.ceil(tt.secondsToVideoTs(f.appendStart)))},d.setRemux=function(f){this.transmuxer.setRemux(f.remux)},d.flush=function(f){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},d.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},d.alignGopsWith=function(f){this.transmuxer.alignGopsWith(f.gopsToAlignWith.slice())},y}();self.onmessage=function(y){if(y.data.action==="init"&&y.data.options){this.messageHandlers=new Df(self,y.data.options);return}this.messageHandlers||(this.messageHandlers=new Df(self)),y.data&&y.data.action&&y.data.action!=="init"&&this.messageHandlers[y.data.action]&&this.messageHandlers[y.data.action](y.data)}})),xm=hc(bm),Sm=function(i,n,r){var e=i.data.segment,t=e.type,a=e.initSegment,o=e.captions,u=e.captionStreams,l=e.metadata,c=e.videoFrameDtsTime,g=e.videoFramePtsTime;n.buffer.push({captions:o,captionStreams:u,metadata:l});var m=i.data.segment.boxes||{data:i.data.segment.data},T={type:t,data:new Uint8Array(m.data,m.data.byteOffset,m.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};typeof c!="undefined"&&(T.videoFrameDtsTime=c),typeof g!="undefined"&&(T.videoFramePtsTime=g),r(T)},Em=function(i){var n=i.transmuxedData,r=i.callback;n.buffer=[],r(n)},Cm=function(i,n){n.gopInfo=i.data.gopInfo},gc=function(i){var n=i.transmuxer,r=i.bytes,e=i.audioAppendStart,t=i.gopsToAlignWith,a=i.remux,o=i.onData,u=i.onTrackInfo,l=i.onAudioTimingInfo,c=i.onVideoTimingInfo,g=i.onVideoSegmentTimingInfo,m=i.onAudioSegmentTimingInfo,T=i.onId3,E=i.onCaptions,C=i.onDone,P=i.onEndedTimeline,H=i.onTransmuxerLog,ie=i.isEndOfTimeline,be={buffer:[]},G=ie,q=function(se){n.currentTransmux===i&&(se.data.action==="data"&&Sm(se,be,o),se.data.action==="trackinfo"&&u(se.data.trackInfo),se.data.action==="gopInfo"&&Cm(se,be),se.data.action==="audioTimingInfo"&&l(se.data.audioTimingInfo),se.data.action==="videoTimingInfo"&&c(se.data.videoTimingInfo),se.data.action==="videoSegmentTimingInfo"&&g(se.data.videoSegmentTimingInfo),se.data.action==="audioSegmentTimingInfo"&&m(se.data.audioSegmentTimingInfo),se.data.action==="id3Frame"&&T([se.data.id3Frame],se.data.id3Frame.dispatchType),se.data.action==="caption"&&E(se.data.caption),se.data.action==="endedtimeline"&&(G=!1,P()),se.data.action==="log"&&H(se.data.log),se.data.type==="transmuxed"&&(G||(n.onmessage=null,Em({transmuxedData:be,callback:C}),vc(n))))};if(n.onmessage=q,e&&n.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(t)&&n.postMessage({action:"alignGopsWith",gopsToAlignWith:t}),typeof a!="undefined"&&n.postMessage({action:"setRemux",remux:a}),r.byteLength){var ue=r instanceof ArrayBuffer?r:r.buffer,$=r instanceof ArrayBuffer?0:r.byteOffset;n.postMessage({action:"push",data:ue,byteOffset:$,byteLength:r.byteLength},[ue])}ie&&n.postMessage({action:"endTimeline"}),n.postMessage({action:"flush"})},vc=function(i){i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),typeof i.currentTransmux=="function"?i.currentTransmux():gc(i.currentTransmux))},_c=function(i,n){i.postMessage({action:n}),vc(i)},yc=function(i,n){if(!n.currentTransmux){n.currentTransmux=i,_c(n,i);return}n.transmuxQueue.push(_c.bind(null,n,i))},wm=function(i){yc("reset",i)},Am=function(i){yc("endTimeline",i)},Tc=function(i){if(!i.transmuxer.currentTransmux){i.transmuxer.currentTransmux=i,gc(i);return}i.transmuxer.transmuxQueue.push(i)},Pm=function(i){var n=new xm;n.currentTransmux=null,n.transmuxQueue=[];var r=n.terminate;return n.terminate=function(){return n.currentTransmux=null,n.transmuxQueue.length=0,r.call(n)},n.postMessage({action:"init",options:i}),n},Au={reset:wm,endTimeline:Am,transmux:Tc,createTransmuxer:Pm},ds=function(i){var n=i.transmuxer,r=i.endAction||i.action,e=i.callback,t=(0,Q.Z)({},i,{endAction:null,transmuxer:null,callback:null}),a=function l(c){c.data.action===r&&(n.removeEventListener("message",l),c.data.data&&(c.data.data=new Uint8Array(c.data.data,i.byteOffset||0,i.byteLength||c.data.data.byteLength),i.data&&(i.data=c.data.data)),e(c.data))};if(n.addEventListener("message",a),i.data){var o=i.data instanceof ArrayBuffer;t.byteOffset=o?0:i.data.byteOffset,t.byteLength=i.data.byteLength;var u=[o?i.data:i.data.buffer];n.postMessage(t,u)}else n.postMessage(t)},Xi={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Pu=function(i){i.forEach(function(n){n.abort()})},Im=function(i){return{bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}},km=function(i){var n=i.target,r=Date.now()-n.requestTime,e={bandwidth:1/0,bytesReceived:0,roundTripTime:r||0};return e.bytesReceived=i.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3),e},Iu=function(i,n){return n.timedout?{status:n.status,message:"HLS request timed-out at URL: "+n.uri,code:Xi.TIMEOUT,xhr:n}:n.aborted?{status:n.status,message:"HLS request aborted at URL: "+n.uri,code:Xi.ABORTED,xhr:n}:i?{status:n.status,message:"HLS request errored at URL: "+n.uri,code:Xi.FAILURE,xhr:n}:n.responseType==="arraybuffer"&&n.response.byteLength===0?{status:n.status,message:"Empty HLS response at URL: "+n.uri,code:Xi.FAILURE,xhr:n}:null},bc=function(i,n,r){return function(e,t){var a=t.response,o=Iu(e,t);if(o)return r(o,i);if(a.byteLength!==16)return r({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:Xi.FAILURE,xhr:t},i);for(var u=new DataView(a),l=new Uint32Array([u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12)]),c=0;c<n.length;c++)n[c].bytes=l;return r(null,i)}},xc=function(i,n){var r=mo(i.map.bytes);if(r!=="mp4"){var e=i.map.resolvedUri||i.map.uri;return n({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+e,code:Xi.FAILURE})}ds({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:function(a){var o=a.tracks,u=a.data;return i.map.bytes=u,o.forEach(function(l){i.map.tracks=i.map.tracks||{},!i.map.tracks[l.type]&&(i.map.tracks[l.type]=l,typeof l.id=="number"&&l.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[l.id]=l.timescale))}),n(null)}})},Dm=function(i){var n=i.segment,r=i.finishProcessingFn;return function(e,t){var a=Iu(e,t);if(a)return r(a,n);var o=new Uint8Array(t.response);if(n.map.key)return n.map.encryptedBytes=o,r(null,n);n.map.bytes=o,xc(n,function(u){if(u)return u.xhr=t,u.status=t.status,r(u,n);r(null,n)})}},Om=function(i){var n=i.segment,r=i.finishProcessingFn,e=i.responseType;return function(t,a){var o=Iu(t,a);if(o)return r(o,n);var u=e==="arraybuffer"||!a.responseText?a.response:ym(a.responseText.substring(n.lastReachedChar||0));return n.stats=Im(a),n.key?n.encryptedBytes=new Uint8Array(u):n.bytes=new Uint8Array(u),r(null,n)}},Lm=function(i){var n=i.segment,r=i.bytes,e=i.trackInfoFn,t=i.timingInfoFn,a=i.videoSegmentTimingInfoFn,o=i.audioSegmentTimingInfoFn,u=i.id3Fn,l=i.captionsFn,c=i.isEndOfTimeline,g=i.endedTimelineFn,m=i.dataFn,T=i.doneFn,E=i.onTransmuxerLog,C=n.map&&n.map.tracks||{},P=Boolean(C.audio&&C.video),H=t.bind(null,n,"audio","start"),ie=t.bind(null,n,"audio","end"),be=t.bind(null,n,"video","start"),G=t.bind(null,n,"video","end"),q=function(){return Tc({bytes:r,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:P,onData:function(X){X.type=X.type==="combined"?"video":X.type,m(n,X)},onTrackInfo:function(X){e&&(P&&(X.isMuxed=!0),e(n,X))},onAudioTimingInfo:function(X){H&&typeof X.start!="undefined"&&(H(X.start),H=null),ie&&typeof X.end!="undefined"&&ie(X.end)},onVideoTimingInfo:function(X){be&&typeof X.start!="undefined"&&(be(X.start),be=null),G&&typeof X.end!="undefined"&&G(X.end)},onVideoSegmentTimingInfo:function(X){a(X)},onAudioSegmentTimingInfo:function(X){o(X)},onId3:function(X,se){u(n,X,se)},onCaptions:function(X){l(n,[X])},isEndOfTimeline:c,onEndedTimeline:function(){g()},onTransmuxerLog:E,onDone:function(X){!T||(X.type=X.type==="combined"?"video":X.type,T(null,n,X))}})};ds({action:"probeTs",transmuxer:n.transmuxer,data:r,baseStartTime:n.baseStartTime,callback:function($){n.bytes=r=$.data;var X=$.result;X&&(e(n,{hasAudio:X.hasAudio,hasVideo:X.hasVideo,isMuxed:P}),e=null,X.hasAudio&&!P&&H(X.audioStart),X.hasVideo&&be(X.videoStart),H=null,be=null),q()}})},Sc=function(i){var n=i.segment,r=i.bytes,e=i.trackInfoFn,t=i.timingInfoFn,a=i.videoSegmentTimingInfoFn,o=i.audioSegmentTimingInfoFn,u=i.id3Fn,l=i.captionsFn,c=i.isEndOfTimeline,g=i.endedTimelineFn,m=i.dataFn,T=i.doneFn,E=i.onTransmuxerLog,C=new Uint8Array(r);if(ih(C)){n.isFmp4=!0;var P=n.map.tracks,H={isFmp4:!0,hasVideo:!!P.video,hasAudio:!!P.audio};P.audio&&P.audio.codec&&P.audio.codec!=="enca"&&(H.audioCodec=P.audio.codec),P.video&&P.video.codec&&P.video.codec!=="encv"&&(H.videoCodec=P.video.codec),P.video&&P.audio&&(H.isMuxed=!0),e(n,H);var ie=function(G){m(n,{data:C,type:H.hasAudio&&!H.isMuxed?"audio":"video"}),G&&G.length&&l(n,G),T(null,n,{})};ds({action:"probeMp4StartTime",timescales:n.map.timescales,data:C,transmuxer:n.transmuxer,callback:function(G){var q=G.data,ue=G.startTime;if(r=q.buffer,n.bytes=C=q,H.hasAudio&&!H.isMuxed&&t(n,"audio","start",ue),H.hasVideo&&t(n,"video","start",ue),!P.video||!q.byteLength||!n.transmuxer){ie();return}ds({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:C,timescales:n.map.timescales,trackIds:[P.video.id],callback:function(X){r=X.data.buffer,n.bytes=C=X.data,X.logs.forEach(function(se){E(U.mergeOptions(se,{stream:"mp4CaptionParser"}))}),ie(X.captions)}})}});return}if(!n.transmuxer){T(null,n,{});return}if(typeof n.container=="undefined"&&(n.container=mo(C)),n.container!=="ts"&&n.container!=="aac"){e(n,{hasAudio:!1,hasVideo:!1}),T(null,n,{});return}Lm({segment:n,bytes:r,trackInfoFn:e,timingInfoFn:t,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:g,dataFn:m,doneFn:T,onTransmuxerLog:E})},Ec=function(i,n){var r=i.id,e=i.key,t=i.encryptedBytes,a=i.decryptionWorker,o=function l(c){if(c.data.source===r){a.removeEventListener("message",l);var g=c.data.decrypted;n(new Uint8Array(g.bytes,g.byteOffset,g.byteLength))}};a.addEventListener("message",o);var u;e.bytes.slice?u=e.bytes.slice():u=new Uint32Array(Array.prototype.slice.call(e.bytes)),a.postMessage(ac({source:r,encrypted:t,key:u,iv:e.iv}),[t.buffer,u.buffer])},Mm=function(i){var n=i.decryptionWorker,r=i.segment,e=i.trackInfoFn,t=i.timingInfoFn,a=i.videoSegmentTimingInfoFn,o=i.audioSegmentTimingInfoFn,u=i.id3Fn,l=i.captionsFn,c=i.isEndOfTimeline,g=i.endedTimelineFn,m=i.dataFn,T=i.doneFn,E=i.onTransmuxerLog;Ec({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:n},function(C){r.bytes=C,Sc({segment:r,bytes:r.bytes,trackInfoFn:e,timingInfoFn:t,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:g,dataFn:m,doneFn:T,onTransmuxerLog:E})})},Rm=function(i){var n=i.activeXhrs,r=i.decryptionWorker,e=i.trackInfoFn,t=i.timingInfoFn,a=i.videoSegmentTimingInfoFn,o=i.audioSegmentTimingInfoFn,u=i.id3Fn,l=i.captionsFn,c=i.isEndOfTimeline,g=i.endedTimelineFn,m=i.dataFn,T=i.doneFn,E=i.onTransmuxerLog,C=0,P=!1;return function(H,ie){if(!P){if(H)return P=!0,Pu(n),T(H,ie);if(C+=1,C===n.length){var be=function(){if(ie.encryptedBytes)return Mm({decryptionWorker:r,segment:ie,trackInfoFn:e,timingInfoFn:t,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:g,dataFn:m,doneFn:T,onTransmuxerLog:E});Sc({segment:ie,bytes:ie.bytes,trackInfoFn:e,timingInfoFn:t,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:g,dataFn:m,doneFn:T,onTransmuxerLog:E})};if(ie.endOfAllRequests=Date.now(),ie.map&&ie.map.encryptedBytes&&!ie.map.bytes)return Ec({decryptionWorker:r,id:ie.requestId+"-init",encryptedBytes:ie.map.encryptedBytes,key:ie.map.key},function(G){ie.map.bytes=G,xc(ie,function(q){if(q)return Pu(n),T(q,ie);be()})});be()}}}},Nm=function(i){var n=i.loadendState,r=i.abortFn;return function(e){var t=e.target;t.aborted&&r&&!n.calledAbortFn&&(r(),n.calledAbortFn=!0)}},Fm=function(i){var n=i.segment,r=i.progressFn;return i.trackInfoFn,i.timingInfoFn,i.videoSegmentTimingInfoFn,i.audioSegmentTimingInfoFn,i.id3Fn,i.captionsFn,i.isEndOfTimeline,i.endedTimelineFn,i.dataFn,function(e){var t=e.target;if(!t.aborted)return n.stats=U.mergeOptions(n.stats,km(e)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),r(e,n)}},Um=function(i){var n=i.xhr,r=i.xhrOptions,e=i.decryptionWorker,t=i.segment,a=i.abortFn,o=i.progressFn,u=i.trackInfoFn,l=i.timingInfoFn,c=i.videoSegmentTimingInfoFn,g=i.audioSegmentTimingInfoFn,m=i.id3Fn,T=i.captionsFn,E=i.isEndOfTimeline,C=i.endedTimelineFn,P=i.dataFn,H=i.doneFn,ie=i.onTransmuxerLog,be=[],G=Rm({activeXhrs:be,decryptionWorker:e,trackInfoFn:u,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:g,id3Fn:m,captionsFn:T,isEndOfTimeline:E,endedTimelineFn:C,dataFn:P,doneFn:H,onTransmuxerLog:ie});if(t.key&&!t.key.bytes){var q=[t.key];t.map&&!t.map.bytes&&t.map.key&&t.map.key.resolvedUri===t.key.resolvedUri&&q.push(t.map.key);var ue=U.mergeOptions(r,{uri:t.key.resolvedUri,responseType:"arraybuffer"}),$=bc(t,q,G),X=n(ue,$);be.push(X)}if(t.map&&!t.map.bytes){var se=t.map.key&&(!t.key||t.key.resolvedUri!==t.map.key.resolvedUri);if(se){var Y=U.mergeOptions(r,{uri:t.map.key.resolvedUri,responseType:"arraybuffer"}),Ue=bc(t,[t.map.key],G),Ee=n(Y,Ue);be.push(Ee)}var Ge=U.mergeOptions(r,{uri:t.map.resolvedUri,responseType:"arraybuffer",headers:Eu(t.map)}),ht=Dm({segment:t,finishProcessingFn:G}),yt=n(Ge,ht);be.push(yt)}var Ot=U.mergeOptions(r,{uri:t.part&&t.part.resolvedUri||t.resolvedUri,responseType:"arraybuffer",headers:Eu(t)}),Ft=Om({segment:t,finishProcessingFn:G,responseType:Ot.responseType}),Et=n(Ot,Ft);Et.addEventListener("progress",Fm({segment:t,progressFn:o,trackInfoFn:u,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:g,id3Fn:m,captionsFn:T,isEndOfTimeline:E,endedTimelineFn:C,dataFn:P})),be.push(Et);var Qt={};return be.forEach(function(at){at.addEventListener("loadend",Nm({loadendState:Qt,abortFn:a}))}),function(){return Pu(be)}},Bm=Fi("CodecUtils"),Vm=function(i){var n=i.attributes||{};if(n.CODECS)return it(n.CODECS)},Cc=function(i,n){var r=n.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&r.AUDIO&&i.mediaGroups.AUDIO[r.AUDIO]},Hm=function(i,n){if(!Cc(i,n))return!0;var r=n.attributes||{},e=i.mediaGroups.AUDIO[r.AUDIO];for(var t in e)if(!e[t].uri&&!e[t].playlists)return!0;return!1},cs=function(i){var n={};return i.forEach(function(r){var e=r.mediaType,t=r.type,a=r.details;n[e]=n[e]||[],n[e].push(bt(""+t+a))}),Object.keys(n).forEach(function(r){if(n[r].length>1){Bm("multiple "+r+" codecs found as attributes: "+n[r].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),n[r]=null;return}n[r]=n[r][0]}),n},wc=function(i){var n=0;return i.audio&&n++,i.video&&n++,n},la=function(i,n){var r=n.attributes||{},e=cs(Vm(n)||[]);if(Cc(i,n)&&!e.audio&&!Hm(i,n)){var t=cs(Zt(i,r.AUDIO)||[]);t.audio&&(e.audio=t.audio)}return e},fs=Fi("PlaylistSelector"),Ac=function(i){if(!(!i||!i.playlist)){var n=i.playlist;return JSON.stringify({id:n.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:n.attributes&&n.attributes.CODECS||""})}},hs=function(i,n){if(!i)return"";var r=x().getComputedStyle(i);return r?r[n]:""},An=function(i,n){var r=i.slice();i.sort(function(e,t){var a=n(e,t);return a===0?r.indexOf(e)-r.indexOf(t):a})},ku=function(i,n){var r,e;return i.attributes.BANDWIDTH&&(r=i.attributes.BANDWIDTH),r=r||x().Number.MAX_VALUE,n.attributes.BANDWIDTH&&(e=n.attributes.BANDWIDTH),e=e||x().Number.MAX_VALUE,r-e},jm=function(i,n){var r,e;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(r=i.attributes.RESOLUTION.width),r=r||x().Number.MAX_VALUE,n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(e=n.attributes.RESOLUTION.width),e=e||x().Number.MAX_VALUE,r===e&&i.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?i.attributes.BANDWIDTH-n.attributes.BANDWIDTH:r-e},Pc=function(i,n,r,e,t,a){if(!!i){var o={bandwidth:n,width:r,height:e,limitRenditionByPlayerDimensions:t},u=i.playlists;pi.isAudioOnly(i)&&(u=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=u.map(function(Y){var Ue,Ee=Y.attributes&&Y.attributes.RESOLUTION&&Y.attributes.RESOLUTION.width,Ge=Y.attributes&&Y.attributes.RESOLUTION&&Y.attributes.RESOLUTION.height;return Ue=Y.attributes&&Y.attributes.BANDWIDTH,Ue=Ue||x().Number.MAX_VALUE,{bandwidth:Ue,width:Ee,height:Ge,playlist:Y}});An(l,function(Y,Ue){return Y.bandwidth-Ue.bandwidth}),l=l.filter(function(Y){return!pi.isIncompatible(Y.playlist)});var c=l.filter(function(Y){return pi.isEnabled(Y.playlist)});c.length||(c=l.filter(function(Y){return!pi.isDisabled(Y.playlist)}));var g=c.filter(function(Y){return Y.bandwidth*Wt.BANDWIDTH_VARIANCE<n}),m=g[g.length-1],T=g.filter(function(Y){return Y.bandwidth===m.bandwidth})[0];if(t===!1){var E=T||c[0]||l[0];if(E&&E.playlist){var C="sortedPlaylistReps";return T&&(C="bandwidthBestRep"),c[0]&&(C="enabledPlaylistReps"),fs("choosing "+Ac(E)+" using "+C+" with options",o),E.playlist}return fs("could not choose a playlist with options",o),null}var P=g.filter(function(Y){return Y.width&&Y.height});An(P,function(Y,Ue){return Y.width-Ue.width});var H=P.filter(function(Y){return Y.width===r&&Y.height===e});m=H[H.length-1];var ie=H.filter(function(Y){return Y.bandwidth===m.bandwidth})[0],be,G,q;ie||(be=P.filter(function(Y){return Y.width>r||Y.height>e}),G=be.filter(function(Y){return Y.width===be[0].width&&Y.height===be[0].height}),m=G[G.length-1],q=G.filter(function(Y){return Y.bandwidth===m.bandwidth})[0]);var ue;if(a.experimentalLeastPixelDiffSelector){var $=P.map(function(Y){return Y.pixelDiff=Math.abs(Y.width-r)+Math.abs(Y.height-e),Y});An($,function(Y,Ue){return Y.pixelDiff===Ue.pixelDiff?Ue.bandwidth-Y.bandwidth:Y.pixelDiff-Ue.pixelDiff}),ue=$[0]}var X=ue||q||ie||T||c[0]||l[0];if(X&&X.playlist){var se="sortedPlaylistReps";return ue?se="leastPixelDiffRep":q?se="resolutionPlusOneRep":ie?se="resolutionBestRep":T?se="bandwidthBestRep":c[0]&&(se="enabledPlaylistReps"),fs("choosing "+Ac(X)+" using "+se+" with options",o),X.playlist}return fs("could not choose a playlist with options",o),null}},Ic=function(){var i=this.useDevicePixelRatio&&x().devicePixelRatio||1;return Pc(this.playlists.master,this.systemBandwidth,parseInt(hs(this.tech_.el(),"width"),10)*i,parseInt(hs(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Wm=function(i){var n=-1,r=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&x().devicePixelRatio||1;return n<0&&(n=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(n=i*this.systemBandwidth+(1-i)*n,r=this.systemBandwidth),Pc(this.playlists.master,n,parseInt(hs(this.tech_.el(),"width"),10)*e,parseInt(hs(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},Gm=function(i){var n=i.master,r=i.currentTime,e=i.bandwidth,t=i.duration,a=i.segmentDuration,o=i.timeUntilRebuffer,u=i.currentTimeline,l=i.syncController,c=n.playlists.filter(function(C){return!pi.isIncompatible(C)}),g=c.filter(pi.isEnabled);g.length||(g=c.filter(function(C){return!pi.isDisabled(C)}));var m=g.filter(pi.hasAttribute.bind(null,"BANDWIDTH")),T=m.map(function(C){var P=l.getSyncPoint(C,t,u,r),H=P?1:2,ie=pi.estimateSegmentRequestTime(a,e,C),be=ie*H-o;return{playlist:C,rebufferingImpact:be}}),E=T.filter(function(C){return C.rebufferingImpact<=0});return An(E,function(C,P){return ku(P.playlist,C.playlist)}),E.length?E[0]:(An(T,function(C,P){return C.rebufferingImpact-P.rebufferingImpact}),T[0]||null)},qm=function(){var i=this,n=this.playlists.master.playlists.filter(pi.isEnabled);An(n,function(e,t){return ku(e,t)});var r=n.filter(function(e){return!!la(i.playlists.master,e).video});return r[0]||null},zm=function(i){var n=0,r;return i.bytes&&(r=new Uint8Array(i.bytes),i.segments.forEach(function(e){r.set(e,n),n+=e.byteLength})),r},Km=function(i,n,r){if(!i[r]){n.trigger({type:"usage",name:"vhs-608"}),n.trigger({type:"usage",name:"hls-608"});var e=r;/^cc708_/.test(r)&&(e="SERVICE"+r.split("_")[1]);var t=n.textTracks().getTrackById(e);if(t)i[r]=t;else{var a=n.options_.vhs&&n.options_.vhs.captionServices||{},o=r,u=r,l=!1,c=a[e];c&&(o=c.label,u=c.language,l=c.default),i[r]=n.addRemoteTextTrack({kind:"captions",id:e,default:l,label:o,language:u},!1).track}}},Xm=function(i){var n=i.inbandTextTracks,r=i.captionArray,e=i.timestampOffset;if(!!r){var t=x().WebKitDataCue||x().VTTCue;r.forEach(function(a){var o=a.stream;n[o].addCue(new t(a.startTime+e,a.endTime+e,a.text))})}},$m=function(i){Object.defineProperties(i.frame,{id:{get:function(){return U.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get:function(){return U.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get:function(){return U.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})},Ym=function(i){var n=i.inbandTextTracks,r=i.metadataArray,e=i.timestampOffset,t=i.videoDuration;if(!!r){var a=x().WebKitDataCue||x().VTTCue,o=n.metadataTrack_;if(!!o&&(r.forEach(function(T){var E=T.cueTime+e;typeof E!="number"||x().isNaN(E)||E<0||!(E<1/0)||T.frames.forEach(function(C){var P=new a(E,E,C.value||C.url||C.data||"");P.frame=C,P.value=C,$m(P),o.addCue(P)})}),!(!o.cues||!o.cues.length))){for(var u=o.cues,l=[],c=0;c<u.length;c++)u[c]&&l.push(u[c]);var g=l.reduce(function(T,E){var C=T[E.startTime]||[];return C.push(E),T[E.startTime]=C,T},{}),m=Object.keys(g).sort(function(T,E){return Number(T)-Number(E)});m.forEach(function(T,E){var C=g[T],P=Number(m[E+1])||t;C.forEach(function(H){H.endTime=P})})}}},Qm=function(i,n,r){i.metadataTrack_||(i.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,i.metadataTrack_.inBandMetadataTrackDispatchType=n)},da=function(i,n,r){var e,t;if(!!r&&!!r.cues)for(e=r.cues.length;e--;)t=r.cues[e],t.startTime>=i&&t.endTime<=n&&r.removeCue(t)},Zm=function(i){var n=i.cues;if(!!n)for(var r=0;r<n.length;r++){for(var e=[],t=0,a=0;a<n.length;a++)n[r].startTime===n[a].startTime&&n[r].endTime===n[a].endTime&&n[r].text===n[a].text&&(t++,t>1&&e.push(n[a]));e.length&&e.forEach(function(o){return i.removeCue(o)})}},Jm=function(i,n,r){if(typeof n=="undefined"||n===null||!i.length)return[];var e=Math.ceil((n-r+3)*ka.ONE_SECOND_IN_TS),t;for(t=0;t<i.length&&!(i[t].pts>e);t++);return i.slice(t)},eg=function(i,n,r){if(!n.length)return i;if(r)return n.slice();var e=n[0].pts,t=0;for(t;t<i.length&&!(i[t].pts>=e);t++);return i.slice(0,t).concat(n)},tg=function(i,n,r,e){for(var t=Math.ceil((n-e)*ka.ONE_SECOND_IN_TS),a=Math.ceil((r-e)*ka.ONE_SECOND_IN_TS),o=i.slice(),u=i.length;u--&&!(i[u].pts<=a););if(u===-1)return o;for(var l=u+1;l--&&!(i[l].pts<=t););return l=Math.max(l,0),o.splice(l,u-l+1),o},ig=function(i,n){if(!i&&!n||!i&&n||i&&!n)return!1;if(i===n)return!0;var r=Object.keys(i).sort(),e=Object.keys(n).sort();if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var a=r[t];if(a!==e[t]||i[a]!==n[a])return!1}return!0},kc=22,rg=function(i,n,r){n=n||[];for(var e=[],t=0,a=0;a<n.length;a++){var o=n[a];if(i===o.timeline&&(e.push(a),t+=o.duration,t>r))return a}return e.length===0?0:e[e.length-1]},ca=1,ng=500,Dc=function(i){return typeof i=="number"&&isFinite(i)},ps=1/60,ag=function(i,n,r){return i!=="main"||!n||!r?null:!r.hasAudio&&!r.hasVideo?"Neither audio nor video found in segment.":n.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!n.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},sg=function(i,n,r){var e=n-Wt.BACK_BUFFER_LENGTH;i.length&&(e=Math.max(e,i.start(0)));var t=n-r;return Math.min(t,e)},Pn=function(i){var n=i.startOfSegment,r=i.duration,e=i.segment,t=i.part,a=i.playlist,o=a.mediaSequence,u=a.id,l=a.segments,c=l===void 0?[]:l,g=i.mediaIndex,m=i.partIndex,T=i.timeline,E=c.length-1,C="mediaIndex/partIndex increment";i.getMediaInfoForTime?C="getMediaInfoForTime ("+i.getMediaInfoForTime+")":i.isSyncRequest&&(C="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(C+=" with independent "+i.independent);var P=typeof m=="number",H=i.segment.uri?"segment":"pre-segment",ie=P?Gd({preloadSegment:e})-1:0;return H+" ["+(o+g)+"/"+(o+E)+"]"+(P?" part ["+m+"/"+ie+"]":"")+(" segment start/end ["+e.start+" => "+e.end+"]")+(P?" part start/end ["+t.start+" => "+t.end+"]":"")+(" startOfSegment ["+n+"]")+(" duration ["+r+"]")+(" timeline ["+T+"]")+(" selected by ["+C+"]")+(" playlist ["+u+"]")},Oc=function(i){return i+"TimingInfo"},og=function(i){var n=i.segmentTimeline,r=i.currentTimeline,e=i.startOfSegment,t=i.buffered,a=i.overrideCheck;return!a&&n===r?null:n<r?e:t.length?t.end(t.length-1):e},Lc=function(i){var n=i.timelineChangeController,r=i.currentTimeline,e=i.segmentTimeline,t=i.loaderType,a=i.audioDisabled;if(r===e)return!1;if(t==="audio"){var o=n.lastTimelineChange({type:"main"});return!o||o.to!==e}if(t==="main"&&a){var u=n.pendingTimelineChange({type:"audio"});return!(u&&u.to===e)}return!1},ug=function(i){var n=0;return["video","audio"].forEach(function(r){var e=i[r+"TimingInfo"];if(!!e){var t=e.start,a=e.end,o;typeof t=="bigint"||typeof a=="bigint"?o=x().BigInt(a)-x().BigInt(t):typeof t=="number"&&typeof a=="number"&&(o=a-t),typeof o!="undefined"&&o>n&&(n=o)}}),typeof n=="bigint"&&n<Number.MAX_SAFE_INTEGER&&(n=Number(n)),n},Mc=function(i){var n=i.segmentDuration,r=i.maxDuration;return n?Math.round(n)>r+Cr:!1},lg=function(i,n){if(n!=="hls")return null;var r=ug({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!r)return null;var e=i.playlist.targetDuration,t=Mc({segmentDuration:r,maxDuration:e*2}),a=Mc({segmentDuration:r,maxDuration:e}),o="Segment with index "+i.mediaIndex+" "+("from playlist "+i.playlist.id+" ")+("has a duration of "+r+" ")+("when the reported duration is "+i.duration+" ")+("and the target duration is "+e+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return t||a?{severity:t?"warn":"info",message:o}:null},Du=function(s){K(i,s);function i(r,e){var t;if(t=s.call(this)||this,!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=r.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.partIndex=null,t.hasPlayed_=r.hasPlayed,t.currentTime_=r.currentTime,t.seekable_=r.seekable,t.seeking_=r.seeking,t.duration_=r.duration,t.mediaSource_=r.mediaSource,t.vhs_=r.vhs,t.loaderType_=r.loaderType,t.currentMediaInfo_=void 0,t.startingMediaInfo_=void 0,t.segmentMetadataTrack_=r.segmentMetadataTrack,t.goalBufferLength_=r.goalBufferLength,t.sourceType_=r.sourceType,t.sourceUpdater_=r.sourceUpdater,t.inbandTextTracks_=r.inbandTextTracks,t.state_="INIT",t.timelineChangeController_=r.timelineChangeController,t.shouldSaveSegmentTimingInfo_=!0,t.parse708captions_=r.parse708captions,t.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,t.captionServices_=r.captionServices,t.experimentalExactManifestTimings=r.experimentalExactManifestTimings,t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.xhrOptions_=null,t.pendingSegments_=[],t.audioDisabled_=!1,t.isPendingTimestampOffset_=!1,t.gopBuffer_=[],t.timeMapping_=0,t.safeAppend_=U.browser.IE_VERSION>=11,t.appendInitSegment_={audio:!0,video:!0},t.playlistOfLastInitSegment_={audio:null,video:null},t.callQueue_=[],t.loadQueue_=[],t.metadataQueue_={id3:[],caption:[]},t.waitingOnRemove_=!1,t.quotaExceededErrorRetryTimeout_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=r.cacheEncryptionKeys,t.keyCache_={},t.decrypter_=r.decrypter,t.syncController_=r.syncController,t.syncPoint_={segmentIndex:0,time:0},t.transmuxer_=t.createTransmuxer_(),t.triggerSyncInfoUpdate_=function(){return t.trigger("syncinfoupdate")},t.syncController_.on("syncinfoupdate",t.triggerSyncInfoUpdate_),t.mediaSource_.addEventListener("sourceopen",function(){t.isEndOfStream_()||(t.ended_=!1)}),t.fetchAtBuffer_=!1,t.logger_=Fi("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty((0,J.Z)(t),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),t.sourceUpdater_.on("ready",function(){t.hasEnoughInfoToAppend_()&&t.processCallQueue_()}),t.loaderType_==="main"&&t.timelineChangeController_.on("pendingtimelinechange",function(){t.hasEnoughInfoToAppend_()&&t.processCallQueue_()}),t.loaderType_==="audio"&&t.timelineChangeController_.on("timelinechange",function(){t.hasEnoughInfoToLoad_()&&t.processLoadQueue_(),t.hasEnoughInfoToAppend_()&&t.processCallQueue_()}),t}var n=i.prototype;return n.createTransmuxer_=function(){return Au.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&x().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,x().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e},n.error=function(e){return typeof e!="undefined"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Au.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return U.createTimeRanges();if(this.loaderType_==="main"){var t=e.hasAudio,a=e.hasVideo,o=e.isMuxed;if(a&&t&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(t===void 0&&(t=!1),!e)return null;var a=ls(e),o=this.initSegments_[a];return t&&!o&&e.bytes&&(this.initSegments_[a]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),o||e},n.segmentKey=function(e,t){if(t===void 0&&(t=!1),!e)return null;var a=sc(e),o=this.keyCache_[a];this.cacheEncryptionKeys_&&t&&!o&&e.bytes&&(this.keyCache_[a]=o={resolvedUri:e.resolvedUri,bytes:e.bytes});var u={resolvedUri:(o||e).resolvedUri};return o&&(u.bytes=o.bytes),u},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(t===void 0&&(t={}),!!e){var a=this.playlist_,o=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));var u=null;if(a&&(a.id?u=a.id:a.uri&&(u=a.uri)),this.logger_("playlist update ["+u+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==e.uri){this.mediaIndex!==null&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var l=e.mediaSequence-a.mediaSequence;if(this.logger_("live window shift ["+l+"]"),this.mediaIndex!==null)if(this.mediaIndex-=l,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var g=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=g}}o&&(o.mediaIndex-=l,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=e.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,e)}},n.pause=function(){this.checkBufferTimeout_&&(x().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return this.checkBufferTimeout_===null},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&Au.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,a,o){if(a===void 0&&(a=function(){}),o===void 0&&(o=!1),t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var u=1,l=function(){u--,u===0&&a()};(o||!this.audioDisabled_)&&(u++,this.sourceUpdater_.removeAudio(e,t,l)),(o||this.loaderType_==="main")&&(this.gopBuffer_=tg(this.gopBuffer_,e,t,this.timeMapping_),u++,this.sourceUpdater_.removeVideo(e,t,l));for(var c in this.inbandTextTracks_)da(e,t,this.inbandTextTracks_[c]);da(e,t,this.segmentMetadataTrack_),l()},n.monitorBuffer_=function(){this.checkBufferTimeout_&&x().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=x().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&x().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=x().setTimeout(this.monitorBufferTick_.bind(this),ng)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();!e||(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,a){if(e===void 0&&(e=this.mediaIndex),t===void 0&&(t=this.playlist_),a===void 0&&(a=this.partIndex),!t||!this.mediaSource_)return!1;var o=typeof e=="number"&&t.segments[e],u=e+1===t.segments.length,l=!o||!o.parts||a+1===o.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&u&&l},n.chooseNextRequest_=function(){var e=this.buffered_(),t=Hd(e)||0,a=pu(e,this.currentTime_()),o=!this.hasPlayed_()&&a>=1,u=a>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||o||u)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(c.isSyncRequest)c.mediaIndex=rg(this.currentTimeline_,l,t);else if(this.mediaIndex!==null){var g=l[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=g.end?g.end:t,g.parts&&g.parts[m+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=m+1):c.mediaIndex=this.mediaIndex+1}else{var T=pi.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),E=T.segmentIndex,C=T.startTime,P=T.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),c.mediaIndex=E,c.startOfSegment=C,c.partIndex=P}var H=l[c.mediaIndex],ie=H&&typeof c.partIndex=="number"&&H.parts&&H.parts[c.partIndex];if(!H||typeof c.partIndex=="number"&&!ie)return null;if(typeof c.partIndex!="number"&&H.parts&&(c.partIndex=0,ie=H.parts[0]),!a&&ie&&!ie.independent)if(c.partIndex===0){var be=l[c.mediaIndex-1],G=be.parts&&be.parts.length&&be.parts[be.parts.length-1];G&&G.independent&&(c.mediaIndex-=1,c.partIndex=be.parts.length-1,c.independent="previous segment")}else H.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");var q=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=l.length-1&&q&&!this.seeking_()?null:this.generateSegmentInfo_(c)},n.generateSegmentInfo_=function(e){var t=e.independent,a=e.playlist,o=e.mediaIndex,u=e.startOfSegment,l=e.isSyncRequest,c=e.partIndex,g=e.forceTimestampOffset,m=e.getMediaInfoForTime,T=a.segments[o],E=typeof c=="number"&&T.parts[c],C={requestId:"segment-loader-"+Math.random(),uri:E&&E.resolvedUri||T.resolvedUri,mediaIndex:o,partIndex:E?c:null,isSyncRequest:l,startOfSegment:u,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:T.timeline,duration:E&&E.duration||T.duration,segment:T,part:E,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:m,independent:t},P=typeof g!="undefined"?g:this.isPendingTimestampOffset_;C.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:T.timeline,currentTimeline:this.currentTimeline_,startOfSegment:u,buffered:this.buffered_(),overrideCheck:P});var H=Hd(this.sourceUpdater_.audioBuffered());return typeof H=="number"&&(C.audioAppendStart=H-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(C.gopsToAlignWith=Jm(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),C},n.timestampOffsetForSegment_=function(e){return og(e)},n.earlyAbortWhenNeeded_=function(e){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),a=e.bandwidth,o=this.pendingSegment_.duration,u=pi.estimateSegmentRequestTime(o,a,this.playlist_,e.bytesReceived),l=Lp(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(u<=l)){var c=Gm({master:this.vhs_.playlists.master,currentTime:t,bandwidth:a,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!!c){var g=u-l,m=g-c.rebufferingImpact,T=.5;l<=Cr&&(T=1),!(!c.playlist||c.playlist.uri===this.playlist_.uri||m<T)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*Wt.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+Pn(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},ig(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},n.handleTimingInfo_=function(e,t,a,o){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var u=this.pendingSegment_,l=Oc(t);u[l]=u[l]||{},u[l][a]=o,this.logger_("timinginfo: "+t+" - "+a+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var a=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}var u=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),l={};t.forEach(function(c){l[c.stream]=l[c.stream]||{startTime:1/0,captions:[],endTime:0};var g=l[c.stream];g.startTime=Math.min(g.startTime,c.startTime+u),g.endTime=Math.max(g.endTime,c.endTime+u),g.captions.push(c)}),Object.keys(l).forEach(function(c){var g=l[c],m=g.startTime,T=g.endTime,E=g.captions,C=a.inbandTextTracks_;a.logger_("adding cues from "+m+" -> "+T+" for "+c),Km(C,a.vhs_.tech_,c),da(m,T,C[c]),Xm({captionArray:E,inbandTextTracks:C,timestampOffset:u})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},n.handleId3_=function(e,t,a){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,a));return}var u=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();Qm(this.inbandTextTracks_,a,this.vhs_.tech_),Ym({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:u,videoDuration:this.duration_()})}},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(t){return t()})},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(t){return t()})},n.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!Lc({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},n.getCurrentMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var a=t.hasAudio,o=t.hasVideo,u=t.isMuxed;return!(o&&!e.videoTimingInfo||a&&!this.audioDisabled_&&!u&&!e.audioTimingInfo||Lc({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,t));return}var a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),a.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),a.isFmp4=e.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[Oc(t.type)].start;else{var o=this.getCurrentMediaInfo_(),u=this.loaderType_==="main"&&o&&o.hasVideo,l;u&&(l=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:u,firstVideoFrameTimeForData:l,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,t.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:this.loaderType_==="main"});var c=this.chooseNextRequest_();if(c.mediaIndex!==a.mediaIndex||c.partIndex!==a.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,t)}}},n.updateAppendInitSegmentStatus=function(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,a=e.initSegment,o=e.map,u=e.playlist;if(o){var l=ls(o);if(this.activeInitSegmentId_===l)return null;a=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=l}return a&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=u,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,a):null},n.handleQuotaExceededError_=function(e,t){var a=this,o=e.segmentInfo,u=e.type,l=e.bytes,c=this.sourceUpdater_.audioBuffered(),g=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Wr(c).join(", ")),g.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Wr(g).join(", "));var m=c.length?c.start(0):0,T=c.length?c.end(c.length-1):0,E=g.length?g.start(0):0,C=g.length?g.end(g.length-1):0;if(T-m<=ca&&C-E<=ca){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+l.byteLength+", ")+("audio buffer: "+Wr(c).join(", ")+", ")+("video buffer: "+Wr(g).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:u,bytes:l}));var P=this.currentTime_(),H=P-ca;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+H),this.remove(0,H,function(){a.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+ca+"s"),a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=x().setTimeout(function(){a.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),a.quotaExceededErrorRetryTimeout_=null,a.processCallQueue_()},ca*1e3)},!0)},n.handleAppendError_=function(e,t){var a=e.segmentInfo,o=e.type,u=e.bytes;if(!!t){if(t.code===kc){this.handleQuotaExceededError_({segmentInfo:a,type:o,bytes:u});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(o+" append of "+u.length+"b failed for segment "+("#"+a.mediaIndex+" in playlist "+a.playlist.id)),this.trigger("appenderror")}},n.appendToSourceBuffer_=function(e){var t=e.segmentInfo,a=e.type,o=e.initSegment,u=e.data,l=e.bytes;if(!l){var c=[u],g=u.byteLength;o&&(c.unshift(o),g+=o.byteLength),l=zm({bytes:g,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:a,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:t,type:a,bytes:l}))},n.handleSegmentTimingInfo_=function(e,t,a){if(!(!this.pendingSegment_||t!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,u=e+"TimingInfo";o[u]||(o[u]={}),o[u].transmuxerPrependedSeconds=a.prependedContentDuration||0,o[u].transmuxedPresentationStart=a.start.presentation,o[u].transmuxedDecodeStart=a.start.decode,o[u].transmuxedPresentationEnd=a.end.presentation,o[u].transmuxedDecodeEnd=a.end.decode,o[u].baseMediaDecodeTime=a.baseMediaDecodeTime}},n.appendData_=function(e,t){var a=t.type,o=t.data;if(!(!o||!o.byteLength)&&!(a==="audio"&&this.audioDisabled_)){var u=this.getInitSegmentAndUpdateState_({type:a,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:a,initSegment:u,data:o})}},n.loadSegment_=function(e){var t=this;if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var a=(0,Q.Z)({},e,{forceTimestampOffset:!0});(0,Q.Z)(e,t.generateSegmentInfo_(a)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var a=this.createSimplifiedSegmentObj_(e),o=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),u=this.mediaIndex!==null,l=e.timeline!==this.currentTimeline_&&e.timeline>0,c=o||u&&l;this.logger_("Requesting "+Pn(e)),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Um({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(m){var T=m.message,E=m.level,C=m.stream;t.logger_(Pn(e)+" logged from transmuxer stream "+C+" as a "+E+": "+T)}})},n.trimBackBuffer_=function(e){var t=sg(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,a=e.part,o={resolvedUri:a?a.resolvedUri:t.resolvedUri,byterange:a?a.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},u=e.playlist.segments[e.mediaIndex-1];if(u&&u.timeline===t.timeline&&(u.videoTimingInfo?o.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(o.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd)),t.key){var l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(t.key),o.key.iv=l}return t.map&&(o.map=this.initSegmentForMap(t.map)),o},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<ps){this.logger_("Ignoring segment's bandwidth because its duration of "+e+(" is less than the min to record "+ps));return}this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,a){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,a));return}if(this.saveTransferStats_(t.stats),!!this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Xi.ABORTED)return;if(this.pause(),e.code===Xi.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,t.stats),o.endOfAllRequests=t.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=eg(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()},n.trueSegmentStart_=function(e){var t=e.currentStart,a=e.playlist,o=e.mediaIndex,u=e.firstVideoFrameTimeForData,l=e.currentVideoTimestampOffset,c=e.useVideoTimingInfo,g=e.videoTimingInfo,m=e.audioTimingInfo;if(typeof t!="undefined")return t;if(!c)return m.start;var T=a.segments[o-1];return o===0||!T||typeof T.start=="undefined"||T.end!==u+l?u:g.start},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var a=t.hasAudio,o=t.hasVideo,u=t.isMuxed,l=this.loaderType_==="main"&&o,c=!this.audioDisabled_&&a&&!u;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}l&&e.waitingOnAppends++,c&&e.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=ag(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0):!1},n.updateSourceBufferTimestampOffset_=function(e){if(!(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,a=e.audioTimingInfo,o=e.timingInfo;return this.useDtsForTimestampOffset_?t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:o.start:o.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),a=this.loaderType_==="main"&&t&&t.hasVideo,o=a&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;!o||(e.timingInfo.end=typeof o.end=="number"?o.end:o.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});var t=lg(e,this.sourceType_);if(t&&(t.severity==="warn"?U.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+Pn(e));return}this.logger_("Appended "+Pn(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var a=e.segment,o=e.part,u=a.end&&this.currentTime_()-a.end>e.playlist.targetDuration*3,l=o&&o.end&&this.currentTime_()-o.end>e.playlist.partTargetDuration*3;if(u||l){this.logger_("bad "+(u?"segment":"part")+" "+Pn(e)),this.resetEverything();return}var c=this.mediaIndex!==null;c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},n.recordThroughput_=function(e){if(e.duration<ps){this.logger_("Ignoring segment's throughput because its duration of "+e.duration+(" is less than the min to record "+ps));return}var t=this.throughput.rate,a=Date.now()-e.endOfAllRequests+1,o=Math.floor(e.byteLength/a*8*1e3);this.throughput.rate+=(o-t)/++this.throughput.count},n.addSegmentMetadataCue_=function(e){if(!!this.segmentMetadataTrack_){var t=e.segment,a=t.start,o=t.end;if(!(!Dc(a)||!Dc(o))){da(a,o,this.segmentMetadataTrack_);var u=x().WebKitDataCue||x().VTTCue,l={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:a,end:o},c=JSON.stringify(l),g=new u(a,o,c);g.value=l,this.segmentMetadataTrack_.addCue(g)}}},i}(U.EventTarget);function fr(){}var Rc=function(i){return typeof i!="string"?i:i.replace(/./,function(n){return n.toUpperCase()})},dg=["video","audio"],Ou=function(i,n){var r=n[i+"Buffer"];return r&&r.updating||n.queuePending[i]},cg=function(i,n){for(var r=0;r<n.length;r++){var e=n[r];if(e.type==="mediaSource")return null;if(e.type===i)return r}return null},Lu=function s(i,n){if(n.queue.length!==0){var r=0,e=n.queue[r];if(e.type==="mediaSource"){!n.updating()&&n.mediaSource.readyState!=="closed"&&(n.queue.shift(),e.action(n),e.doneFn&&e.doneFn(),s("audio",n),s("video",n));return}if(i!=="mediaSource"&&!(!n.ready()||n.mediaSource.readyState==="closed"||Ou(i,n))){if(e.type!==i){if(r=cg(i,n.queue),r===null)return;e=n.queue[r]}if(n.queue.splice(r,1),n.queuePending[i]=e,e.action(i,n),!e.doneFn){n.queuePending[i]=null,s(i,n);return}}}},Nc=function(i,n){var r=n[i+"Buffer"],e=Rc(i);!r||(r.removeEventListener("updateend",n["on"+e+"UpdateEnd_"]),r.removeEventListener("error",n["on"+e+"Error_"]),n.codecs[i]=null,n[i+"Buffer"]=null)},$i=function(i,n){return i&&n&&Array.prototype.indexOf.call(i.sourceBuffers,n)!==-1},_i={appendBuffer:function(i,n,r){return function(e,t){var a=t[e+"Buffer"];if(!!$i(t.mediaSource,a)){t.logger_("Appending segment "+n.mediaIndex+"'s "+i.length+" bytes to "+e+"Buffer");try{a.appendBuffer(i)}catch(o){t.logger_("Error with code "+o.code+" "+(o.code===kc?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+n.mediaIndex+" to "+e+"Buffer")),t.queuePending[e]=null,r(o)}}}},remove:function(i,n){return function(r,e){var t=e[r+"Buffer"];if(!!$i(e.mediaSource,t)){e.logger_("Removing "+i+" to "+n+" from "+r+"Buffer");try{t.remove(i,n)}catch(a){e.logger_("Remove "+i+" to "+n+" from "+r+"Buffer failed")}}}},timestampOffset:function(i){return function(n,r){var e=r[n+"Buffer"];!$i(r.mediaSource,e)||(r.logger_("Setting "+n+"timestampOffset to "+i),e.timestampOffset=i)}},callback:function(i){return function(n,r){i()}},endOfStream:function(i){return function(n){if(n.mediaSource.readyState==="open"){n.logger_("Calling mediaSource endOfStream("+(i||"")+")");try{n.mediaSource.endOfStream(i)}catch(r){U.log.warn("Failed to call media source endOfStream",r)}}}},duration:function(i){return function(n){n.logger_("Setting mediaSource duration to "+i);try{n.mediaSource.duration=i}catch(r){U.log.warn("Failed to set media source duration",r)}}},abort:function(){return function(i,n){if(n.mediaSource.readyState==="open"){var r=n[i+"Buffer"];if(!!$i(n.mediaSource,r)){n.logger_("calling abort on "+i+"Buffer");try{r.abort()}catch(e){U.log.warn("Failed to abort on "+i+"Buffer",e)}}}}},addSourceBuffer:function(i,n){return function(r){var e=Rc(i),t=ft(n);r.logger_("Adding "+i+"Buffer with codec "+n+" to mediaSource");var a=r.mediaSource.addSourceBuffer(t);a.addEventListener("updateend",r["on"+e+"UpdateEnd_"]),a.addEventListener("error",r["on"+e+"Error_"]),r.codecs[i]=n,r[i+"Buffer"]=a}},removeSourceBuffer:function(i){return function(n){var r=n[i+"Buffer"];if(Nc(i,n),!!$i(n.mediaSource,r)){n.logger_("Removing "+i+"Buffer with codec "+n.codecs[i]+" from mediaSource");try{n.mediaSource.removeSourceBuffer(r)}catch(e){U.log.warn("Failed to removeSourceBuffer "+i+"Buffer",e)}}}},changeType:function(i){return function(n,r){var e=r[n+"Buffer"],t=ft(i);!$i(r.mediaSource,e)||r.codecs[n]!==i&&(r.logger_("changing "+n+"Buffer codec from "+r.codecs[n]+" to "+i),e.changeType(t),r.codecs[n]=i)}}},yi=function(i){var n=i.type,r=i.sourceUpdater,e=i.action,t=i.doneFn,a=i.name;r.queue.push({type:n,action:e,doneFn:t,name:a}),Lu(n,r)},Fc=function(i,n){return function(r){if(n.queuePending[i]){var e=n.queuePending[i].doneFn;n.queuePending[i]=null,e&&e(n[i+"Error_"])}Lu(i,n)}},Uc=function(s){K(i,s);function i(r){var e;return e=s.call(this)||this,e.mediaSource=r,e.sourceopenListener_=function(){return Lu("mediaSource",(0,J.Z)(e))},e.mediaSource.addEventListener("sourceopen",e.sourceopenListener_),e.logger_=Fi("SourceUpdater"),e.audioTimestampOffset_=0,e.videoTimestampOffset_=0,e.queue=[],e.queuePending={audio:null,video:null},e.delayedAudioAppendQueue_=[],e.videoAppendQueued_=!1,e.codecs={},e.onVideoUpdateEnd_=Fc("video",(0,J.Z)(e)),e.onAudioUpdateEnd_=Fc("audio",(0,J.Z)(e)),e.onVideoError_=function(t){e.videoError_=t},e.onAudioError_=function(t){e.audioError_=t},e.createdSourceBuffers_=!1,e.initializedEme_=!1,e.triggeredReady_=!1,e}var n=i.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){yi({type:"mediaSource",sourceUpdater:this,action:_i.addSourceBuffer(e,t),name:"addSourceBuffer"})},n.abort=function(e){yi({type:e,sourceUpdater:this,action:_i.abort(e),name:"abort"})},n.removeSourceBuffer=function(e){if(!this.canRemoveSourceBuffer()){U.log.error("removeSourceBuffer is not supported!");return}yi({type:"mediaSource",sourceUpdater:this,action:_i.removeSourceBuffer(e),name:"removeSourceBuffer"})},n.canRemoveSourceBuffer=function(){return!U.browser.IE_VERSION&&!U.browser.IS_FIREFOX&&x().MediaSource&&x().MediaSource.prototype&&typeof x().MediaSource.prototype.removeSourceBuffer=="function"},i.canChangeType=function(){return x().SourceBuffer&&x().SourceBuffer.prototype&&typeof x().SourceBuffer.prototype.changeType=="function"},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){if(!this.canChangeType()){U.log.error("changeType is not supported!");return}yi({type:e,sourceUpdater:this,action:_i.changeType(t),name:"changeType"})},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(a){var o=e[a];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(a,o);t.canChangeType()&&t.changeType(a,o)})},n.appendBuffer=function(e,t){var a=this,o=e.segmentInfo,u=e.type,l=e.bytes;if(this.processedAppend_=!0,u==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_("delayed audio append of "+l.length+" until video append");return}var c=t;if(yi({type:u,sourceUpdater:this,action:_i.appendBuffer(l,o||{mediaIndex:-1},c),doneFn:t,name:"appendBuffer"}),u==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var g=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+g.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,g.forEach(function(m){a.appendBuffer.apply(a,m)})}},n.audioBuffered=function(){return $i(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:U.createTimeRange()},n.videoBuffered=function(){return $i(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:U.createTimeRange()},n.buffered=function(){var e=$i(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=$i(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():Op(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){t===void 0&&(t=fr),yi({type:"mediaSource",sourceUpdater:this,action:_i.duration(e),name:"duration",doneFn:t})},n.endOfStream=function(e,t){e===void 0&&(e=null),t===void 0&&(t=fr),typeof e!="string"&&(e=void 0),yi({type:"mediaSource",sourceUpdater:this,action:_i.endOfStream(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,a){if(a===void 0&&(a=fr),!this.audioBuffered().length||this.audioBuffered().end(0)===0){a();return}yi({type:"audio",sourceUpdater:this,action:_i.remove(e,t),doneFn:a,name:"remove"})},n.removeVideo=function(e,t,a){if(a===void 0&&(a=fr),!this.videoBuffered().length||this.videoBuffered().end(0)===0){a();return}yi({type:"video",sourceUpdater:this,action:_i.remove(e,t),doneFn:a,name:"remove"})},n.updating=function(){return!!(Ou("audio",this)||Ou("video",this))},n.audioTimestampOffset=function(e){return typeof e!="undefined"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(yi({type:"audio",sourceUpdater:this,action:_i.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return typeof e!="undefined"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(yi({type:"video",sourceUpdater:this,action:_i.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){!this.audioBuffer||yi({type:"audio",sourceUpdater:this,action:_i.callback(e),name:"callback"})},n.videoQueueCallback=function(e){!this.videoBuffer||yi({type:"video",sourceUpdater:this,action:_i.callback(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),dg.forEach(function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"](function(){return Nc(t,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},i}(U.EventTarget),Bc=function(i){return decodeURIComponent(escape(String.fromCharCode.apply(null,i)))},Vc=new Uint8Array(`

`.split("").map(function(s){return s.charCodeAt(0)})),fg=function(s){K(i,s);function i(r,e){var t;return e===void 0&&(e={}),t=s.call(this,r,e)||this,t.mediaSource_=null,t.subtitlesTrack_=null,t.loaderType_="subtitle",t.featuresNativeTextTracks_=r.featuresNativeTextTracks,t.shouldSaveSegmentTimingInfo_=!1,t}var n=i.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return U.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,a=e[e.length-1].startTime;return U.createTimeRanges([[t,a]])},n.initSegmentForMap=function(e,t){if(t===void 0&&(t=!1),!e)return null;var a=ls(e),o=this.initSegments_[a];if(t&&!o&&e.bytes){var u=Vc.byteLength+e.bytes.byteLength,l=new Uint8Array(u);l.set(e.bytes),l.set(Vc,e.bytes.byteLength),this.initSegments_[a]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:l}}return o||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return typeof e=="undefined"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},n.remove=function(e,t){da(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(!!t){if(this.syncController_.timestampOffsetForTimeline(t.timeline)===null){var a=function(){e.state="READY",e.paused()||e.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(s.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,a){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Xi.TIMEOUT&&this.handleTimeout_(),e.code===Xi.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}var u=this.pendingSegment_;this.saveBandwidthRelatedStats_(u.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var l=u.segment;if(l.map&&(l.map.bytes=t.map.bytes),u.bytes=t.bytes,typeof x().WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var c,g=function(){o.subtitlesTrack_.tech_.off("vttjsloaded",c),o.stopForError({message:"Error loading vtt.js"})};c=function(){o.subtitlesTrack_.tech_.off("vttjserror",g),o.segmentRequestFinished_(e,t,a)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",c),this.subtitlesTrack_.tech_.one("vttjserror",g);return}l.requested=!0;try{this.parseVTTCues_(u)}catch(m){this.stopForError({message:m.message});return}if(this.updateTimeMapping_(u,this.syncController_.timelines[u.timeline],this.playlist_),u.cues.length?u.timingInfo={start:u.cues[0].startTime,end:u.cues[u.cues.length-1].endTime}:u.timingInfo={start:u.startOfSegment,end:u.startOfSegment+u.duration},u.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}u.byteLength=u.bytes.byteLength,this.mediaSecondsLoaded+=l.duration,u.cues.forEach(function(m){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new(x()).VTTCue(m.startTime,m.endTime,m.text):m)}),Zm(this.subtitlesTrack_),this.handleAppendsDone_()},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,a=!1;typeof x().TextDecoder=="function"?t=new(x()).TextDecoder("utf8"):(t=x().WebVTT.StringDecoder(),a=!0);var o=new(x()).WebVTT.Parser(x(),x().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=e.cues.push.bind(e.cues),o.ontimestampmap=function(c){e.timestampmap=c},o.onparsingerror=function(c){U.log.warn("Error encountered when parsing cues: "+c.message)},e.segment.map){var u=e.segment.map.bytes;a&&(u=Bc(u)),o.parse(u)}var l=e.bytes;a&&(l=Bc(l)),o.parse(l),o.flush()},n.updateTimeMapping_=function(e,t,a){var o=e.segment;if(!!t){if(!e.cues.length){o.empty=!0;return}var u=e.timestampmap,l=u.MPEGTS/ka.ONE_SECOND_IN_TS-u.LOCAL+t.mapping;if(e.cues.forEach(function(m){m.startTime+=l,m.endTime+=l}),!a.syncInfo){var c=e.cues[0].startTime,g=e.cues[e.cues.length-1].startTime;a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:Math.min(c,g-o.duration)}}}},i}(Du),hg=function(i,n){for(var r=i.cues,e=0;e<r.length;e++){var t=r[e];if(n>=t.adStartTime&&n<=t.adEndTime)return t}return null},pg=function(i,n,r){if(r===void 0&&(r=0),!!i.segments)for(var e=r,t,a=0;a<i.segments.length;a++){var o=i.segments[a];if(t||(t=hg(n,e+o.duration/2)),t){if("cueIn"in o){t.endTime=e,t.adEndTime=e,e+=o.duration,t=null;continue}if(e<t.endTime){e+=o.duration;continue}t.endTime+=o.duration}else if("cueOut"in o&&(t=new(x()).VTTCue(e,e+o.duration,o.cueOut),t.adStartTime=e,t.adEndTime=e+parseFloat(o.cueOut),n.addCue(t)),"cueOutCont"in o){var u=o.cueOutCont.split("/").map(parseFloat),l=u[0],c=u[1];t=new(x()).VTTCue(e,e+o.duration,""),t.adStartTime=e-l,t.adEndTime=t.adStartTime+c,n.addCue(t)}e+=o.duration}},mg=86400,Hc=[{name:"VOD",run:function(i,n,r,e,t){if(r!==1/0){var a={time:0,segmentIndex:0,partIndex:null};return a}return null}},{name:"ProgramDateTime",run:function(i,n,r,e,t){if(!Object.keys(i.timelineToDatetimeMappings).length)return null;var a=null,o=null,u=gu(n);t=t||0;for(var l=0;l<u.length;l++){var c=n.endList||t===0?l:u.length-(l+1),g=u[c],m=g.segment,T=i.timelineToDatetimeMappings[m.timeline];if(!(!T||!m.dateTimeObject)){var E=m.dateTimeObject.getTime()/1e3,C=E+T;if(m.parts&&typeof g.partIndex=="number")for(var P=0;P<g.partIndex;P++)C+=m.parts[P].duration;var H=Math.abs(t-C);if(o!==null&&(H===0||o<H))break;o=H,a={time:C,segmentIndex:g.segmentIndex,partIndex:g.partIndex}}}return a}},{name:"Segment",run:function(i,n,r,e,t){var a=null,o=null;t=t||0;for(var u=gu(n),l=0;l<u.length;l++){var c=n.endList||t===0?l:u.length-(l+1),g=u[c],m=g.segment,T=g.part&&g.part.start||m&&m.start;if(m.timeline===e&&typeof T!="undefined"){var E=Math.abs(t-T);if(o!==null&&o<E)break;(!a||o===null||o>=E)&&(o=E,a={time:T,segmentIndex:g.segmentIndex,partIndex:g.partIndex})}}return a}},{name:"Discontinuity",run:function(i,n,r,e,t){var a=null;if(t=t||0,n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=null,u=0;u<n.discontinuityStarts.length;u++){var l=n.discontinuityStarts[u],c=n.discontinuitySequence+u+1,g=i.discontinuities[c];if(g){var m=Math.abs(t-g.time);if(o!==null&&o<m)break;(!a||o===null||o>=m)&&(o=m,a={time:g.time,segmentIndex:l,partIndex:null})}}return a}},{name:"Playlist",run:function(i,n,r,e,t){if(n.syncInfo){var a={time:n.syncInfo.time,segmentIndex:n.syncInfo.mediaSequence-n.mediaSequence,partIndex:null};return a}return null}}],gg=function(s){K(i,s);function i(r){var e;return e=s.call(this)||this,e.timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=Fi("SyncController"),e}var n=i.prototype;return n.getSyncPoint=function(e,t,a,o){var u=this.runStrategies_(e,t,a,o);return u.length?this.selectSyncPoint_(u,{key:"time",value:o}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var a=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!a.length)return null;var o=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+sa({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:o.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,a,o){for(var u=[],l=0;l<Hc.length;l++){var c=Hc[l],g=c.run(this,e,t,a,o);g&&(g.strategy=c.name,u.push({strategy:c.name,syncPoint:g}))}return u},n.selectSyncPoint_=function(e,t){for(var a=e[0].syncPoint,o=Math.abs(e[0].syncPoint[t.key]-t.value),u=e[0].strategy,l=1;l<e.length;l++){var c=Math.abs(e[l].syncPoint[t.key]-t.value);c<o&&(o=c,a=e[l].syncPoint,u=e[l].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy"+(" ["+u+"]: [time:"+a.time+",")+(" segmentIndex:"+a.segmentIndex)+(typeof a.partIndex=="number"?",partIndex:"+a.partIndex:"")+"]"),a},n.saveExpiredSegmentInfo=function(e,t){var a=t.mediaSequence-e.mediaSequence;if(a>mg){U.log.warn("Not saving expired segment info. Media sequence gap "+a+" is too large.");return}for(var o=a-1;o>=0;o--){var u=e.segments[o];if(u&&typeof u.start!="undefined"){t.syncInfo={mediaSequence:e.mediaSequence+o,time:u.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+","+(" mediaSequence: "+t.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],a=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-a}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,a=e.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(t,t.timingInfo,a),u=t.segment;o&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:u.start}));var l=u.dateTimeObject;u.discontinuity&&a&&l&&(this.timelineToDatetimeMappings[u.timeline]=-(l.getTime()/1e3))},n.timestampOffsetForTimeline=function(e){return typeof this.timelines[e]=="undefined"?null:this.timelines[e].time},n.mappingForTimeline=function(e){return typeof this.timelines[e]=="undefined"?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,a){var o=e.segment,u=e.part,l=this.timelines[e.timeline],c,g;if(typeof e.timestampOffset=="number")l={time:e.startOfSegment,mapping:e.startOfSegment-t.start},a&&(this.timelines[e.timeline]=l,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": "+("[time: "+l.time+"] [mapping: "+l.mapping+"]"))),c=e.startOfSegment,g=t.end+l.mapping;else if(l)c=t.start+l.mapping,g=t.end+l.mapping;else return!1;return u&&(u.start=c,u.end=g),(!o.start||c<o.start)&&(o.start=c),o.end=g,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,a=e.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],l=t.discontinuitySequence+o+1,c=u-e.mediaIndex,g=Math.abs(c);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>g){var m=void 0;c<0?m=a.start-sa({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:u}):m=a.end+sa({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:u}),this.discontinuities[l]={time:m,accuracy:g}}}},n.dispose=function(){this.trigger("dispose"),this.off()},i}(U.EventTarget),vg=function(s){K(i,s);function i(){var r;return r=s.call(this)||this,r.pendingTimelineChanges_={},r.lastTimelineChanges_={},r}var n=i.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,a=e.from,o=e.to;return typeof a=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[t]={type:t,from:a,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,a=e.from,o=e.to;return typeof a=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[t]={type:t,from:a,to:o},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},i}(U.EventTarget),_g=pc(mc(function(){var s=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof R.g!="undefined"?R.g:typeof self!="undefined"?self:{};function i(G,q,ue){return ue={path:q,exports:{},require:function(X,se){return n(X,se==null?ue.path:se)}},G(ue,ue.exports),ue.exports}function n(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var r=i(function(G){function q($,X){for(var se=0;se<X.length;se++){var Y=X[se];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty($,Y.key,Y)}}function ue($,X,se){return X&&q($.prototype,X),se&&q($,se),$}G.exports=ue,G.exports.default=G.exports,G.exports.__esModule=!0}),e=i(function(G){function q(ue,$){return G.exports=q=Object.setPrototypeOf||function(se,Y){return se.__proto__=Y,se},G.exports.default=G.exports,G.exports.__esModule=!0,q(ue,$)}G.exports=q,G.exports.default=G.exports,G.exports.__esModule=!0}),t=i(function(G){function q(ue,$){ue.prototype=Object.create($.prototype),ue.prototype.constructor=ue,e(ue,$)}G.exports=q,G.exports.default=G.exports,G.exports.__esModule=!0}),a=function(){function G(){this.listeners={}}var q=G.prototype;return q.on=function($,X){this.listeners[$]||(this.listeners[$]=[]),this.listeners[$].push(X)},q.off=function($,X){if(!this.listeners[$])return!1;var se=this.listeners[$].indexOf(X);return this.listeners[$]=this.listeners[$].slice(0),this.listeners[$].splice(se,1),se>-1},q.trigger=function($){var X=this.listeners[$];if(!!X)if(arguments.length===2)for(var se=X.length,Y=0;Y<se;++Y)X[Y].call(this,arguments[1]);else for(var Ue=Array.prototype.slice.call(arguments,1),Ee=X.length,Ge=0;Ge<Ee;++Ge)X[Ge].apply(this,Ue)},q.dispose=function(){this.listeners={}},q.pipe=function($){this.on("data",function(X){$.push(X)})},G}();function o(G){return G.subarray(0,G.byteLength-G[G.byteLength-1])}var u=function(){var q=[[[],[],[],[],[]],[[],[],[],[],[]]],ue=q[0],$=q[1],X=ue[4],se=$[4],Y,Ue,Ee,Ge=[],ht=[],yt,Ot,Ft,Et,Qt,at;for(Y=0;Y<256;Y++)ht[(Ge[Y]=Y<<1^(Y>>7)*283)^Y]=Y;for(Ue=Ee=0;!X[Ue];Ue^=yt||1,Ee=ht[Ee]||1)for(Et=Ee^Ee<<1^Ee<<2^Ee<<3^Ee<<4,Et=Et>>8^Et&255^99,X[Ue]=Et,se[Et]=Ue,Ft=Ge[Ot=Ge[yt=Ge[Ue]]],at=Ft*16843009^Ot*65537^yt*257^Ue*16843008,Qt=Ge[Et]*257^Et*16843008,Y=0;Y<4;Y++)ue[Y][Ue]=Qt=Qt<<24^Qt>>>8,$[Y][Et]=at=at<<24^at>>>8;for(Y=0;Y<5;Y++)ue[Y]=ue[Y].slice(0),$[Y]=$[Y].slice(0);return q},l=null,c=function(){function G(ue){l||(l=u()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var $,X,se,Y=this._tables[0][4],Ue=this._tables[1],Ee=ue.length,Ge=1;if(Ee!==4&&Ee!==6&&Ee!==8)throw new Error("Invalid aes key size");var ht=ue.slice(0),yt=[];for(this._key=[ht,yt],$=Ee;$<4*Ee+28;$++)se=ht[$-1],($%Ee===0||Ee===8&&$%Ee===4)&&(se=Y[se>>>24]<<24^Y[se>>16&255]<<16^Y[se>>8&255]<<8^Y[se&255],$%Ee===0&&(se=se<<8^se>>>24^Ge<<24,Ge=Ge<<1^(Ge>>7)*283)),ht[$]=ht[$-Ee]^se;for(X=0;$;X++,$--)se=ht[X&3?$:$-4],$<=4||X<4?yt[X]=se:yt[X]=Ue[0][Y[se>>>24]]^Ue[1][Y[se>>16&255]]^Ue[2][Y[se>>8&255]]^Ue[3][Y[se&255]]}var q=G.prototype;return q.decrypt=function($,X,se,Y,Ue,Ee){var Ge=this._key[1],ht=$^Ge[0],yt=Y^Ge[1],Ot=se^Ge[2],Ft=X^Ge[3],Et,Qt,at,_s=Ge.length/4-2,wi,pr=4,wr=this._tables[1],Gr=wr[0],Yi=wr[1],In=wr[2],kn=wr[3],Dn=wr[4];for(wi=0;wi<_s;wi++)Et=Gr[ht>>>24]^Yi[yt>>16&255]^In[Ot>>8&255]^kn[Ft&255]^Ge[pr],Qt=Gr[yt>>>24]^Yi[Ot>>16&255]^In[Ft>>8&255]^kn[ht&255]^Ge[pr+1],at=Gr[Ot>>>24]^Yi[Ft>>16&255]^In[ht>>8&255]^kn[yt&255]^Ge[pr+2],Ft=Gr[Ft>>>24]^Yi[ht>>16&255]^In[yt>>8&255]^kn[Ot&255]^Ge[pr+3],pr+=4,ht=Et,yt=Qt,Ot=at;for(wi=0;wi<4;wi++)Ue[(3&-wi)+Ee]=Dn[ht>>>24]<<24^Dn[yt>>16&255]<<16^Dn[Ot>>8&255]<<8^Dn[Ft&255]^Ge[pr++],Et=ht,ht=yt,yt=Ot,Ot=Ft,Ft=Et},G}(),g=function(G){t(q,G);function q(){var $;return $=G.call(this,a)||this,$.jobs=[],$.delay=1,$.timeout_=null,$}var ue=q.prototype;return ue.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},ue.push=function(X){this.jobs.push(X),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},q}(a),m=function(q){return q<<24|(q&65280)<<8|(q&16711680)>>8|q>>>24},T=function(q,ue,$){var X=new Int32Array(q.buffer,q.byteOffset,q.byteLength>>2),se=new c(Array.prototype.slice.call(ue)),Y=new Uint8Array(q.byteLength),Ue=new Int32Array(Y.buffer),Ee,Ge,ht,yt,Ot,Ft,Et,Qt,at;for(Ee=$[0],Ge=$[1],ht=$[2],yt=$[3],at=0;at<X.length;at+=4)Ot=m(X[at]),Ft=m(X[at+1]),Et=m(X[at+2]),Qt=m(X[at+3]),se.decrypt(Ot,Ft,Et,Qt,Ue,at),Ue[at]=m(Ue[at]^Ee),Ue[at+1]=m(Ue[at+1]^Ge),Ue[at+2]=m(Ue[at+2]^ht),Ue[at+3]=m(Ue[at+3]^yt),Ee=Ot,Ge=Ft,ht=Et,yt=Qt;return Y},E=function(){function G(ue,$,X,se){var Y=G.STEP,Ue=new Int32Array(ue.buffer),Ee=new Uint8Array(ue.byteLength),Ge=0;for(this.asyncStream_=new g,this.asyncStream_.push(this.decryptChunk_(Ue.subarray(Ge,Ge+Y),$,X,Ee)),Ge=Y;Ge<Ue.length;Ge+=Y)X=new Uint32Array([m(Ue[Ge-4]),m(Ue[Ge-3]),m(Ue[Ge-2]),m(Ue[Ge-1])]),this.asyncStream_.push(this.decryptChunk_(Ue.subarray(Ge,Ge+Y),$,X,Ee));this.asyncStream_.push(function(){se(null,o(Ee))})}var q=G.prototype;return q.decryptChunk_=function($,X,se,Y){return function(){var Ue=T($,X,se);Y.set(Ue,$.byteOffset)}},r(G,null,[{key:"STEP",get:function(){return 32e3}}]),G}(),C;typeof window!="undefined"?C=window:typeof s!="undefined"?C=s:typeof self!="undefined"?C=self:C={};var P=C,H=function(q){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(q):q&&q.buffer instanceof ArrayBuffer},ie=P.BigInt||Number;ie("0x1"),ie("0x100"),ie("0x10000"),ie("0x1000000"),ie("0x100000000"),ie("0x10000000000"),ie("0x1000000000000"),ie("0x100000000000000"),ie("0x10000000000000000");var be=function(q){var ue={};return Object.keys(q).forEach(function($){var X=q[$];H(X)?ue[$]={bytes:X.buffer,byteOffset:X.byteOffset,byteLength:X.byteLength}:ue[$]=X}),ue};self.onmessage=function(G){var q=G.data,ue=new Uint8Array(q.encrypted.bytes,q.encrypted.byteOffset,q.encrypted.byteLength),$=new Uint32Array(q.key.bytes,q.key.byteOffset,q.key.byteLength/4),X=new Uint32Array(q.iv.bytes,q.iv.byteOffset,q.iv.byteLength/4);new E(ue,$,X,function(se,Y){self.postMessage(be({source:q.source,decrypted:Y}),[Y.buffer])})}})),yg=hc(_g),Tg=function(i){var n=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(n="main-desc"),n},ms=function(i,n){i.abort(),i.pause(),n&&n.activePlaylistLoader&&(n.activePlaylistLoader.pause(),n.activePlaylistLoader=null)},Mu=function(i,n){n.activePlaylistLoader=i,i.load()},bg=function(i,n){return function(){var r=n.segmentLoaders,e=r[i],t=r.main,a=n.mediaTypes[i],o=a.activeTrack(),u=a.getActiveGroup(),l=a.activePlaylistLoader,c=a.lastGroup_;if(!(u&&c&&u.id===c.id)&&(a.lastGroup_=u,a.lastTrack_=o,ms(e,a),!(!u||u.isMasterPlaylist))){if(!u.playlistLoader){l&&t.resetEverything();return}e.resyncLoader(),Mu(u.playlistLoader,a)}}},xg=function(i,n){return function(){var r=n.segmentLoaders[i],e=n.mediaTypes[i];e.lastGroup_=null,r.abort(),r.pause()}},Sg=function(i,n){return function(){var r=n.masterPlaylistLoader,e=n.segmentLoaders,t=e[i],a=e.main,o=n.mediaTypes[i],u=o.activeTrack(),l=o.getActiveGroup(),c=o.activePlaylistLoader,g=o.lastTrack_;if(!(g&&u&&g.id===u.id)&&(o.lastGroup_=l,o.lastTrack_=u,ms(t,o),!!l)){if(l.isMasterPlaylist){if(!u||!g||u.id===g.id)return;var m=n.vhs.masterPlaylistController_,T=m.selectPlaylist();if(m.media()===T)return;o.logger_("track change. Switching master audio from "+g.id+" to "+u.id),r.pause(),a.resetEverything(),m.fastQualityChange_(T);return}if(i==="AUDIO"){if(!l.playlistLoader){a.setAudio(!0),a.resetEverything();return}t.setAudio(!0),a.setAudio(!1)}if(c===l.playlistLoader){Mu(l.playlistLoader,o);return}t.track&&t.track(u),t.resetEverything(),Mu(l.playlistLoader,o)}}},gs={AUDIO:function(i,n){return function(){var r=n.segmentLoaders[i],e=n.mediaTypes[i],t=n.blacklistCurrentPlaylist;ms(r,e);var a=e.activeTrack(),o=e.activeGroup(),u=(o.filter(function(g){return g.default})[0]||o[0]).id,l=e.tracks[u];if(a===l){t({message:"Problem encountered loading the default audio track."});return}U.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in e.tracks)e.tracks[c].enabled=e.tracks[c]===l;e.onTrackChanged()}},SUBTITLES:function(i,n){return function(){var r=n.segmentLoaders[i],e=n.mediaTypes[i];U.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),ms(r,e);var t=e.activeTrack();t&&(t.mode="disabled"),e.onTrackChanged()}}},jc={AUDIO:function(i,n,r){if(!!n){var e=r.tech,t=r.requestOptions,a=r.segmentLoaders[i];n.on("loadedmetadata",function(){var o=n.media();a.playlist(o,t),(!e.paused()||o.endList&&e.preload()!=="none")&&a.load()}),n.on("loadedplaylist",function(){a.playlist(n.media(),t),e.paused()||a.load()}),n.on("error",gs[i](i,r))}},SUBTITLES:function(i,n,r){var e=r.tech,t=r.requestOptions,a=r.segmentLoaders[i],o=r.mediaTypes[i];n.on("loadedmetadata",function(){var u=n.media();a.playlist(u,t),a.track(o.activeTrack()),(!e.paused()||u.endList&&e.preload()!=="none")&&a.load()}),n.on("loadedplaylist",function(){a.playlist(n.media(),t),e.paused()||a.load()}),n.on("error",gs[i](i,r))}},Eg={AUDIO:function(i,n){var r=n.vhs,e=n.sourceType,t=n.segmentLoaders[i],a=n.requestOptions,o=n.master.mediaGroups,u=n.mediaTypes[i],l=u.groups,c=u.tracks,g=u.logger_,m=n.masterPlaylistLoader,T=oa(m.master);(!o[i]||Object.keys(o[i]).length===0)&&(o[i]={main:{default:{default:!0}}},T&&(o[i].main.default.playlists=m.master.playlists));for(var E in o[i]){l[E]||(l[E]=[]);for(var C in o[i][E]){var P=o[i][E][C],H=void 0;if(T?(g("AUDIO group '"+E+"' label '"+C+"' is a master playlist"),P.isMasterPlaylist=!0,H=null):e==="vhs-json"&&P.playlists?H=new wn(P.playlists[0],r,a):P.resolvedUri?H=new wn(P.resolvedUri,r,a):P.playlists&&e==="dash"?H=new wu(P.playlists[0],r,a,m):H=null,P=U.mergeOptions({id:C,playlistLoader:H},P),jc[i](i,P.playlistLoader,n),l[E].push(P),typeof c[C]=="undefined"){var ie=new U.AudioTrack({id:C,kind:Tg(P),enabled:!1,language:P.language,default:P.default,label:C});c[C]=ie}}}t.on("error",gs[i](i,n))},SUBTITLES:function(i,n){var r=n.tech,e=n.vhs,t=n.sourceType,a=n.segmentLoaders[i],o=n.requestOptions,u=n.master.mediaGroups,l=n.mediaTypes[i],c=l.groups,g=l.tracks,m=n.masterPlaylistLoader;for(var T in u[i]){c[T]||(c[T]=[]);for(var E in u[i][T])if(!u[i][T][E].forced){var C=u[i][T][E],P=void 0;if(t==="hls")P=new wn(C.resolvedUri,e,o);else if(t==="dash"){var H=C.playlists.filter(function(be){return be.excludeUntil!==1/0});if(!H.length)return;P=new wu(C.playlists[0],e,o,m)}else t==="vhs-json"&&(P=new wn(C.playlists?C.playlists[0]:C.resolvedUri,e,o));if(C=U.mergeOptions({id:E,playlistLoader:P},C),jc[i](i,C.playlistLoader,n),c[T].push(C),typeof g[E]=="undefined"){var ie=r.addRemoteTextTrack({id:E,kind:"subtitles",default:C.default&&C.autoselect,language:C.language,label:E},!1).track;g[E]=ie}}}a.on("error",gs[i](i,n))},"CLOSED-CAPTIONS":function(i,n){var r=n.tech,e=n.master.mediaGroups,t=n.mediaTypes[i],a=t.groups,o=t.tracks;for(var u in e[i]){a[u]||(a[u]=[]);for(var l in e[i][u]){var c=e[i][u][l];if(!!/^(?:CC|SERVICE)/.test(c.instreamId)){var g=r.options_.vhs&&r.options_.vhs.captionServices||{},m={label:l,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(g[m.instreamId]&&(m=U.mergeOptions(m,g[m.instreamId])),m.default===void 0&&delete m.default,a[u].push(U.mergeOptions({id:l},c)),typeof o[l]=="undefined"){var T=r.addRemoteTextTrack({id:m.instreamId,kind:"captions",default:m.default,language:m.language,label:m.label},!1).track;o[l]=T}}}}}},Cg=function s(i,n){for(var r=0;r<i.length;r++)if(yu(n,i[r])||i[r].playlists&&s(i[r].playlists,n))return!0;return!1},wg=function(i,n){return function(r){var e=n.masterPlaylistLoader,t=n.mediaTypes[i].groups,a=e.media();if(!a)return null;var o=null;a.attributes[i]&&(o=t[a.attributes[i]]);var u=Object.keys(t);if(!o)if(i==="AUDIO"&&u.length>1&&oa(n.master))for(var l=0;l<u.length;l++){var c=t[u[l]];if(Cg(c,a)){o=c;break}}else t.main?o=t.main:u.length===1&&(o=t[u[0]]);return typeof r=="undefined"?o:r===null||!o?null:o.filter(function(g){return g.id===r.id})[0]||null}},Ag={AUDIO:function(i,n){return function(){var r=n.mediaTypes[i].tracks;for(var e in r)if(r[e].enabled)return r[e];return null}},SUBTITLES:function(i,n){return function(){var r=n.mediaTypes[i].tracks;for(var e in r)if(r[e].mode==="showing"||r[e].mode==="hidden")return r[e];return null}}},Pg=function(i,n){var r=n.mediaTypes;return function(){var e=r[i].activeTrack();return e?r[i].activeGroup(e):null}},Ig=function(i){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(E){Eg[E](E,i)});var n=i.mediaTypes,r=i.masterPlaylistLoader,e=i.tech,t=i.vhs,a=i.segmentLoaders,o=a.AUDIO,u=a.main;["AUDIO","SUBTITLES"].forEach(function(E){n[E].activeGroup=wg(E,i),n[E].activeTrack=Ag[E](E,i),n[E].onGroupChanged=bg(E,i),n[E].onGroupChanging=xg(E,i),n[E].onTrackChanged=Sg(E,i),n[E].getActiveGroup=Pg(E,i)});var l=n.AUDIO.activeGroup();if(l){var c=(l.filter(function(E){return E.default})[0]||l[0]).id;n.AUDIO.tracks[c].enabled=!0,n.AUDIO.onGroupChanged(),n.AUDIO.onTrackChanged();var g=n.AUDIO.getActiveGroup();g.playlistLoader?(u.setAudio(!1),o.setAudio(!0)):u.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(E){return n[E].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(E){return n[E].onGroupChanging()})});var m=function(){n.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};e.audioTracks().addEventListener("change",m),e.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),t.on("dispose",function(){e.audioTracks().removeEventListener("change",m),e.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),e.clearTracks("audio");for(var T in n.AUDIO.tracks)e.audioTracks().addTrack(n.AUDIO.tracks[T])},kg=function(){var i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(n){i[n]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:fr,activeTrack:fr,getActiveGroup:fr,onGroupChanged:fr,onTrackChanged:fr,lastTrack_:null,logger_:Fi("MediaGroups["+n+"]")}}),i},Dg=60*2,hr,Og=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Lg=function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},Mg=function(i){var n=i.currentPlaylist,r=i.buffered,e=i.currentTime,t=i.nextPlaylist,a=i.bufferLowWaterLine,o=i.bufferHighWaterLine,u=i.duration,l=i.experimentalBufferBasedABR,c=i.log;if(!t)return U.log.warn("We received no playlist to switch to. Please check your stream."),!1;var g="allowing switch "+(n&&n.id||"null")+" -> "+t.id;if(!n)return c(g+" as current playlist is not set"),!0;if(t.id===n.id)return!1;var m=Boolean(Cn(r,e).length);if(!n.endList)return!m&&typeof n.partTargetDuration=="number"?(c("not "+g+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(c(g+" as current playlist is live"),!0);var T=pu(r,e),E=l?Wt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Wt.MAX_BUFFER_LOW_WATER_LINE;if(u<E)return c(g+" as duration < max low water line ("+u+" < "+E+")"),!0;var C=t.attributes.BANDWIDTH,P=n.attributes.BANDWIDTH;if(C<P&&(!l||T<o)){var H=g+" as next bandwidth < current bandwidth ("+C+" < "+P+")";return l&&(H+=" and forwardBuffer < bufferHighWaterLine ("+T+" < "+o+")"),c(H),!0}if((!l||C>P)&&T>=a){var ie=g+" as forwardBuffer >= bufferLowWaterLine ("+T+" >= "+a+")";return l&&(ie+=" and next bandwidth > current bandwidth ("+C+" > "+P+")"),c(ie),!0}return c("not "+g+" as no switching criteria met"),!1},Rg=function(s){K(i,s);function i(r){var e;e=s.call(this)||this;var t=r.src,a=r.handleManifestRedirects,o=r.withCredentials,u=r.tech,l=r.bandwidth,c=r.externVhs,g=r.useCueTags,m=r.blacklistDuration,T=r.enableLowInitialPlaylist,E=r.sourceType,C=r.cacheEncryptionKeys,P=r.experimentalBufferBasedABR,H=r.experimentalLeastPixelDiffSelector,ie=r.captionServices;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");var be=r.maxPlaylistRetries;(be===null||typeof be=="undefined")&&(be=1/0),hr=c,e.experimentalBufferBasedABR=Boolean(P),e.experimentalLeastPixelDiffSelector=Boolean(H),e.withCredentials=o,e.tech_=u,e.vhs_=u.vhs,e.sourceType_=E,e.useCueTags_=g,e.blacklistDuration=m,e.maxPlaylistRetries=be,e.enableLowInitialPlaylist=T,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:o,handleManifestRedirects:a,maxPlaylistRetries:be,timeout:null},e.on("error",e.pauseLoading),e.mediaTypes_=kg(),e.mediaSource=new(x()).MediaSource,e.handleDurationChange_=e.handleDurationChange_.bind((0,J.Z)(e)),e.handleSourceOpen_=e.handleSourceOpen_.bind((0,J.Z)(e)),e.handleSourceEnded_=e.handleSourceEnded_.bind((0,J.Z)(e)),e.mediaSource.addEventListener("durationchange",e.handleDurationChange_),e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_),e.mediaSource.addEventListener("sourceended",e.handleSourceEnded_),e.seekable_=U.createTimeRanges(),e.hasPlayed_=!1,e.syncController_=new gg(r),e.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new yg,e.sourceUpdater_=new Uc(e.mediaSource),e.inbandTextTracks_={},e.timelineChangeController_=new vg;var G={vhs:e.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:ie,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.duration()},hasPlayed:function(){return e.hasPlayed_},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:l,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_,cacheEncryptionKeys:C,sourceUpdater:e.sourceUpdater_,timelineChangeController:e.timelineChangeController_,experimentalExactManifestTimings:r.experimentalExactManifestTimings};e.masterPlaylistLoader_=e.sourceType_==="dash"?new wu(t,e.vhs_,e.requestOptions_):new wn(t,e.vhs_,e.requestOptions_),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new Du(U.mergeOptions(G,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),r),e.audioSegmentLoader_=new Du(U.mergeOptions(G,{loaderType:"audio"}),r),e.subtitleSegmentLoader_=new fg(U.mergeOptions(G,{loaderType:"vtt",featuresNativeTextTracks:e.tech_.featuresNativeTextTracks}),r),e.setupSegmentLoaderListeners_(),e.experimentalBufferBasedABR&&(e.masterPlaylistLoader_.one("loadedplaylist",function(){return e.startABRTimer_()}),e.tech_.on("pause",function(){return e.stopABRTimer_()}),e.tech_.on("play",function(){return e.startABRTimer_()})),Og.forEach(function(ue){e[ue+"_"]=Lg.bind((0,J.Z)(e),ue)}),e.logger_=Fi("MPC"),e.triggeredFmp4Usage=!1,e.tech_.preload()==="none"?(e.loadOnPlay_=function(){e.loadOnPlay_=null,e.masterPlaylistLoader_.load()},e.tech_.one("play",e.loadOnPlay_)):e.masterPlaylistLoader_.load(),e.timeToLoadedData__=-1,e.mainAppendsToLoadedData__=-1,e.audioAppendsToLoadedData__=-1;var q=e.tech_.preload()==="none"?"play":"loadstart";return e.tech_.one(q,function(){var ue=Date.now();e.tech_.one("loadeddata",function(){e.timeToLoadedData__=Date.now()-ue,e.mainAppendsToLoadedData__=e.mainSegmentLoader_.mediaAppends,e.audioAppendsToLoadedData__=e.audioSegmentLoader_.mediaAppends})}),e}var n=i.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,a){var o=this.media(),u=o&&(o.id||o.uri),l=e.id||e.uri;u&&u!==l&&(this.logger_("switch media "+u+" -> "+l+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,a)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=x().setInterval(function(){return e.checkABR_()},250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(x().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var a=e.mediaGroups.AUDIO,o=Object.keys(a),u;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)u=this.mediaTypes_.AUDIO.activeTrack();else{var l=a.main||o.length&&a[o[0]];for(var c in l)if(l[c].default){u={label:c};break}}if(!u)return t;var g=[];for(var m in a)if(a[m][u.label]){var T=a[m][u.label];if(T.playlists&&T.playlists.length)g.push.apply(g,T.playlists);else if(T.uri)g.push(T);else if(e.playlists.length)for(var E=0;E<e.playlists.length;E++){var C=e.playlists[E];C.attributes&&C.attributes.AUDIO&&C.attributes.AUDIO===m&&g.push(C)}}return g.length?g:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),a=t.targetDuration*1.5*1e3;_u(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=a,t.endList&&e.tech_.preload()!=="none"&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Ig({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var a;if(e.enableLowInitialPlaylist&&(a=e.selectInitialPlaylist()),a||(a=e.selectPlaylist()),!a||!e.shouldSwitchToMedia_(a))return;e.initialMedia_=a,e.switchMedia_(e.initialMedia_,"initial");var o=e.sourceType_==="vhs-json"&&e.initialMedia_.segments;if(!o)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),a=t.targetDuration*1.5*1e3;_u(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=a,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();if(t.lastExcludeReason_!=="playlist-unchanged"){var a=e.stuckAtPlaylistEnd_(t);a&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var a=e.mediaGroups||{},o=!0,u=Object.keys(a.AUDIO);for(var l in a.AUDIO)for(var c in a.AUDIO[l]){var g=a.AUDIO[l][c];g.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(a.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),hr.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),u.length&&Object.keys(a.AUDIO[u[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),o=this.bufferLowWaterLine(),u=this.bufferHighWaterLine(),l=this.tech_.buffered();return Mg({buffered:l,currentTime:a,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:o,bufferHighWaterLine:u,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var a=e.selectPlaylist();e.shouldSwitchToMedia_(a)&&e.switchMedia_(a,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},Dg))});var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var o=e.getCodecsOrExclude_();!o||e.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){e===void 0&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;if(e===void 0&&(e=this.selectPlaylist()),e===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){U.browser.IE_VERSION||U.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())})},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var a=this.seekable();if(!a.length)return!1;if(U.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(a.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();typeof e!="undefined"&&typeof e.then=="function"&&e.then(null,function(t){})}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(!!this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(!(!e||!e.length)){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}!e||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){var t=this.seekable();if(!t.length)return!1;var a=this.syncController_.getExpiredTime(e,this.duration());if(a===null)return!1;var o=hr.Playlist.playlistEnd(e,a),u=this.tech_.currentTime(),l=this.tech_.buffered();if(!l.length)return o-u<=Ki;var c=l.end(l.length-1);return c-u<=Ki&&o-c<=Ki},n.blacklistCurrentPlaylist=function(e,t){e===void 0&&(e={});var a=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!a){this.error=e,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}a.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,u=o.filter(os),l=u.length===1&&u[0]===a;if(o.length===1&&t!==1/0)return U.log.warn("Problem encountered with playlist "+a.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(l);if(l){var c=!1;o.forEach(function(H){if(H!==a){var ie=H.excludeUntil;typeof ie!="undefined"&&ie!==1/0&&(c=!0,delete H.excludeUntil)}}),c&&(U.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var g;a.playlistErrors_>this.maxPlaylistRetries?g=1/0:g=Date.now()+t*1e3,a.excludeUntil=g,e.reason&&(a.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var m=this.selectPlaylist();if(!m){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var T=e.internal?this.logger_:U.log.warn,E=e.message?" "+e.message:"";T((e.internal?"Internal problem":"Problem")+" encountered with playlist "+a.id+"."+(E+" Switching to playlist "+m.id+".")),m.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),m.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var C=m.targetDuration/2*1e3||5*1e3,P=typeof m.lastRequest=="number"&&Date.now()-m.lastRequest<=C;return this.switchMedia_(m,"exclude",l||P)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var a=this,o=[],u=e==="all";(u||e==="main")&&o.push(this.masterPlaylistLoader_);var l=[];(u||e==="audio")&&l.push("AUDIO"),(u||e==="subtitle")&&(l.push("CLOSED-CAPTIONS"),l.push("SUBTITLES")),l.forEach(function(c){var g=a.mediaTypes_[c]&&a.mediaTypes_[c].activePlaylistLoader;g&&o.push(g)}),["main","audio","subtitle"].forEach(function(c){var g=a[c+"SegmentLoader_"];g&&(e===c||e==="all")&&o.push(g)}),o.forEach(function(c){return t.forEach(function(g){typeof c[g]=="function"&&c[g]()})})},n.setCurrentTime=function(e){var t=Cn(this.tech_.buffered(),e);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:hr.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(!!this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(!!t){var a=this.syncController_.getExpiredTime(t,this.duration());if(a!==null){var o=this.masterPlaylistLoader_.master,u=hr.Playlist.seekable(t,a,hr.Playlist.liveEdgeDelay(o,t));if(u.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),a=this.syncController_.getExpiredTime(t,this.duration()),a===null||(e=hr.Playlist.seekable(t,a,hr.Playlist.liveEdgeDelay(o,t)),e.length===0)))){var l,c;this.seekable_&&this.seekable_.length&&(l=this.seekable_.end(0),c=this.seekable_.start(0)),e?e.start(0)>u.end(0)||u.start(0)>e.end(0)?this.seekable_=u:this.seekable_=U.createTimeRanges([[e.start(0)>u.start(0)?e.start(0):u.start(0),e.end(0)<u.end(0)?e.end(0):u.end(0)]]):this.seekable_=u,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===l&&this.seekable_.start(0)===c)&&(this.logger_("seekable updated ["+Vd(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1));return}var a=this.tech_.buffered(),o=hr.Playlist.duration(this.masterPlaylistLoader_.media());a.length>0&&(o=Math.max(o,a.end(a.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(t){var a=e.mediaTypes_[t].groups;for(var o in a)a[o].forEach(function(u){u.playlistLoader&&u.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!a)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var a=la(this.master(),this.media()),o={},u=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(o.video=a.video||t.main.videoCodec||Pi),t.main.isMuxed&&(o.video+=","+(a.audio||t.main.audioCodec||Zi)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||u)&&(o.audio=a.audio||t.main.audioCodec||t.audio.audioCodec||Zi,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),!o.audio&&!o.video){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var l=function(P,H){return P?Gt(H):lt(H)},c={},g;if(["video","audio"].forEach(function(C){if(o.hasOwnProperty(C)&&!l(t[C].isFmp4,o[C])){var P=t[C].isFmp4?"browser":"muxer";c[P]=c[P]||[],c[P].push(o[C]),C==="audio"&&(g=P)}}),u&&g&&this.media().attributes.AUDIO){var m=this.media().attributes.AUDIO;this.master().playlists.forEach(function(C){var P=C.attributes&&C.attributes.AUDIO;P===m&&C!==e.media()&&(C.excludeUntil=1/0)}),this.logger_("excluding audio group "+m+" as "+g+' does not support codec(s): "'+o.audio+'"')}if(Object.keys(c).length){var T=Object.keys(c).reduce(function(C,P){return C&&(C+=", "),C+=P+' does not support codec(s): "'+c[P].join(",")+'"',C},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:T,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var E=[];if(["video","audio"].forEach(function(C){var P=(it(e.sourceUpdater_.codecs[C]||"")[0]||{}).type,H=(it(o[C]||"")[0]||{}).type;P&&H&&P.toLowerCase()!==H.toLowerCase()&&E.push('"'+e.sourceUpdater_.codecs[C]+'" -> "'+o[C]+'"')}),E.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+E.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return o},n.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&!!this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(!!e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,a=[];Object.keys(t).forEach(function(o){var u=t[o];if(a.indexOf(u.id)===-1){a.push(u.id);var l=la(e.master,u),c=[];l.audio&&!lt(l.audio)&&!Gt(l.audio)&&c.push("audio codec "+l.audio),l.video&&!lt(l.video)&&!Gt(l.video)&&c.push("video codec "+l.video),l.text&&l.text==="stpp.ttml.im1t"&&c.push("text codec "+l.text),c.length&&(u.excludeUntil=1/0,e.logger_("excluding "+u.id+" for unsupported: "+c.join(", ")))}})},n.excludeIncompatibleVariants_=function(e){var t=this,a=[],o=this.master().playlists,u=cs(it(e)),l=wc(u),c=u.video&&it(u.video)[0]||null,g=u.audio&&it(u.audio)[0]||null;Object.keys(o).forEach(function(m){var T=o[m];if(!(a.indexOf(T.id)!==-1||T.excludeUntil===1/0)){a.push(T.id);var E=[],C=la(t.masterPlaylistLoader_.master,T),P=wc(C);if(!(!C.audio&&!C.video)){if(P!==l&&E.push('codec count "'+P+'" !== "'+l+'"'),!t.sourceUpdater_.canChangeType()){var H=C.video&&it(C.video)[0]||null,ie=C.audio&&it(C.audio)[0]||null;H&&c&&H.type.toLowerCase()!==c.type.toLowerCase()&&E.push('video codec "'+H.type+'" !== "'+c.type+'"'),ie&&g&&ie.type.toLowerCase()!==g.type.toLowerCase()&&E.push('audio codec "'+ie.type+'" !== "'+g.type+'"')}E.length&&(T.excludeUntil=1/0,t.logger_("blacklisting "+T.id+": "+E.join(" && ")))}}})},n.updateAdCues_=function(e){var t=0,a=this.seekable();a.length&&(t=a.start(0)),pg(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=Wt.GOAL_BUFFER_LENGTH,a=Wt.GOAL_BUFFER_LENGTH_RATE,o=Math.max(t,Wt.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*a,o)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=Wt.BUFFER_LOW_WATER_LINE,a=Wt.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(t,Wt.MAX_BUFFER_LOW_WATER_LINE),u=Math.max(t,Wt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*a,this.experimentalBufferBasedABR?u:o)},n.bufferHighWaterLine=function(){return Wt.BUFFER_HIGH_WATER_LINE},i}(U.EventTarget),Ng=function(i,n,r){return function(e){var t=i.master.playlists[n],a=vu(t),o=os(t);return typeof e=="undefined"?o:(e?delete t.disabled:t.disabled=!0,e!==o&&!a&&(r(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)}},Fg=function(i,n,r){var e=i.masterPlaylistController_,t=i.options_.smoothQualityChange,a=t?"smooth":"fast",o=e[a+"QualityChange_"].bind(e);if(n.attributes){var u=n.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=n.attributes.BANDWIDTH}this.codecs=la(e.master(),n),this.playlist=n,this.id=r,this.enabled=Ng(i.playlists,n.id,o)},Ug=function(i){i.representations=function(){var n=i.masterPlaylistController_.master(),r=oa(n)?i.masterPlaylistController_.getAudioTrackPlaylists_():n.playlists;return r?r.filter(function(e){return!vu(e)}).map(function(e,t){return new Fg(i,e,e.id)}):[]}},Wc=["seeking","seeked","pause","playing","error"],Bg=function(){function s(n){var r=this;this.masterPlaylistController_=n.masterPlaylistController,this.tech_=n.tech,this.seekable=n.seekable,this.allowSeeksWithinUnsafeLiveWindow=n.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=n.liveRangeSafeTimeDelta,this.media=n.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Fi("PlaybackWatcher"),this.logger_("initialize");var e=function(){return r.monitorCurrentTime_()},t=function(){return r.monitorCurrentTime_()},a=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},u=this.masterPlaylistController_,l=["main","subtitle","audio"],c={};l.forEach(function(m){c[m]={reset:function(){return r.resetSegmentDownloads_(m)},updateend:function(){return r.checkSegmentDownloads_(m)}},u[m+"SegmentLoader_"].on("appendsdone",c[m].updateend),u[m+"SegmentLoader_"].on("playlistupdate",c[m].reset),r.tech_.on(["seeked","seeking"],c[m].reset)});var g=function(T){["main","audio"].forEach(function(E){u[E+"SegmentLoader_"][T]("appended",r.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){r.fixesBadSeeks_()&&(r.consecutiveUpdates=0,r.lastRecordedTime=r.tech_.currentTime(),g("off"))},this.clearSeekingAppendCheck_=function(){return g("off")},this.watchForBadSeeking_=function(){r.clearSeekingAppendCheck_(),g("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(Wc,o),this.tech_.on("canplay",t),this.tech_.one("play",e),this.dispose=function(){r.clearSeekingAppendCheck_(),r.logger_("dispose"),r.tech_.off("waiting",a),r.tech_.off(Wc,o),r.tech_.off("canplay",t),r.tech_.off("play",e),r.tech_.off("seeking",r.watchForBadSeeking_),r.tech_.off("seeked",r.clearSeekingAppendCheck_),l.forEach(function(m){u[m+"SegmentLoader_"].off("appendsdone",c[m].updateend),u[m+"SegmentLoader_"].off("playlistupdate",c[m].reset),r.tech_.off(["seeked","seeking"],c[m].reset)}),r.checkCurrentTimeTimeout_&&x().clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}var i=s.prototype;return i.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&x().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=x().setTimeout(this.monitorCurrentTime_.bind(this),250)},i.resetSegmentDownloads_=function(r){var e=this.masterPlaylistController_[r+"SegmentLoader_"];this[r+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+r+" loader"),this[r+"StalledDownloads_"]=0,this[r+"Buffered_"]=e.buffered_()},i.checkSegmentDownloads_=function(r){var e=this.masterPlaylistController_,t=e[r+"SegmentLoader_"],a=t.buffered_(),o=Mp(this[r+"Buffered_"],a);if(this[r+"Buffered_"]=a,o){this.resetSegmentDownloads_(r);return}this[r+"StalledDownloads_"]++,this.logger_("found #"+this[r+"StalledDownloads_"]+" "+r+" appends that did not increase buffer (possible stalled download)",{playlistId:t.playlist_&&t.playlist_.id,buffered:Wr(a)}),!(this[r+"StalledDownloads_"]<10)&&(this.logger_(r+" loader stalled download exclusion"),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:"vhs-"+r+"-download-exclusion"}),r!=="subtitle"&&e.blacklistCurrentPlaylist({message:"Excessive "+r+" segment downloading detected."},1/0))},i.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var r=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===r&&(!e.length||r+Ki>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}},i.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},i.fixesBadSeeks_=function(){var r=this.tech_.seeking();if(!r)return!1;var e=this.seekable(),t=this.tech_.currentTime(),a=this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(a){var u=e.end(e.length-1);o=u}if(this.beforeSeekableWindow_(e,t)){var l=e.start(0);o=l+(l===e.end(0)?0:Ki)}if(typeof o!="undefined")return this.logger_("Trying to seek outside of seekable at time "+t+" with "+("seekable range "+Vd(e)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,g=this.tech_.buffered(),m=c.audioBuffer?c.audioBuffered():null,T=c.videoBuffer?c.videoBuffered():null,E=this.media(),C=E.partTargetDuration?E.partTargetDuration:(E.targetDuration-Cr)*2,P=[m,T],H=0;H<P.length;H++)if(!!P[H]){var ie=pu(P[H],t);if(ie<C)return!1}var be=ss(g,t);return be.length===0?!1:(o=be.start(0)+Ki,this.logger_("Buffered region starts ("+be.start(0)+") "+(" just beyond seek point ("+t+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},i.waiting_=function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),e=this.tech_.buffered(),t=Cn(e,r);if(t.length&&r+3<=t.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region "+("["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},i.techWaiting_=function(){var r=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(r,e)){var t=r.end(r.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to "+("live point (seekable end) "+t)),this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),u=this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:e});if(u)return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var l=ss(o,e);if(l.length>0){var c=l.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+c+", seeking "+("to "+l.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),c*1e3,e),!0}return!1},i.afterSeekableWindow_=function(r,e,t,a){if(a===void 0&&(a=!1),!r.length)return!1;var o=r.end(r.length-1)+Ki,u=!t.endList;return u&&a&&(o=r.end(r.length-1)+t.targetDuration*3),e>o},i.beforeSeekableWindow_=function(r,e){return!!(r.length&&r.start(0)>0&&e<r.start(0)-this.liveRangeSafeTimeDelta)},i.videoUnderflow_=function(r){var e=r.videoBuffered,t=r.audioBuffered,a=r.currentTime;if(!!e){var o;if(e.length&&t.length){var u=Cn(e,a-3),l=Cn(e,a),c=Cn(t,a);c.length&&!l.length&&u.length&&(o={start:u.end(0),end:c.end(0)})}else{var g=ss(e,a);g.length||(o=this.gapFromVideoUnderflow_(e,a))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+a)),!0):!1}},i.skipTheGap_=function(r){var e=this.tech_.buffered(),t=this.tech_.currentTime(),a=ss(e,t);this.cancelTimer_(),!(a.length===0||t!==r)&&(this.logger_("skipTheGap_:","currentTime:",t,"scheduled currentTime:",r,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+Cr),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},i.gapFromVideoUnderflow_=function(r,e){for(var t=Dp(r),a=0;a<t.length;a++){var o=t.start(a),u=t.end(a);if(e-o<4&&e-o>2)return{start:o,end:u}}return null},s}(),Vg={errorInterval:30,getSource:function(i){var n=this.tech({IWillNotUseThisInPlugins:!0}),r=n.currentSource_||this.currentSource();return i(r)}},Hg=function s(i,n){var r=0,e=0,t=U.mergeOptions(Vg,n);i.ready(function(){i.trigger({type:"usage",name:"vhs-error-reload-initialized"}),i.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){e&&i.currentTime(e)},o=function(m){m!=null&&(e=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",a),i.src(m),i.trigger({type:"usage",name:"vhs-error-reload"}),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())},u=function(){if(Date.now()-r<t.errorInterval*1e3){i.trigger({type:"usage",name:"vhs-error-reload-canceled"}),i.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!t.getSource||typeof t.getSource!="function"){U.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return r=Date.now(),t.getSource.call(i,o)},l=function g(){i.off("loadedmetadata",a),i.off("error",u),i.off("dispose",g)},c=function(m){l(),s(i,m)};i.on("error",u),i.on("dispose",l),i.reloadSourceOnError=c},jg=function(i){Hg(this,i)},Gc="2.14.3",Wg="6.0.1",Gg="0.21.1",qg="4.7.1",zg="3.1.3",zt={PlaylistLoader:wn,Playlist:pi,utils:nm,STANDARD_PLAYLIST_SELECTOR:Ic,INITIAL_PLAYLIST_SELECTOR:qm,lastBandwidthSelector:Ic,movingAverageBandwidthSelector:Wm,comparePlaylistBandwidth:ku,comparePlaylistResolution:jm,xhr:nc()};Object.keys(Wt).forEach(function(s){Object.defineProperty(zt,s,{get:function(){return U.log.warn("using Vhs."+s+" is UNSAFE be sure you know what you are doing"),Wt[s]},set:function(n){if(U.log.warn("using Vhs."+s+" is UNSAFE be sure you know what you are doing"),typeof n!="number"||n<0){U.log.warn("value of Vhs."+s+" must be greater than or equal to 0");return}Wt[s]=n}})});var qc="videojs-vhs",zc=function(i,n){for(var r=n.media(),e=-1,t=0;t<i.length;t++)if(i[t].id===r.id){e=t;break}i.selectedIndex_=e,i.trigger({selectedIndex:e,type:"change"})},Kg=function(i,n){n.representations().forEach(function(r){i.addQualityLevel(r)}),zc(i,n.playlists)};zt.canPlaySource=function(){return U.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Xg=function(i,n,r){if(!i)return i;var e={};n&&n.attributes&&n.attributes.CODECS&&(e=cs(it(n.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(e.audio=r.attributes.CODECS);var t=ft(e.video),a=ft(e.audio),o={};for(var u in i)o[u]={},a&&(o[u].audioContentType=a),t&&(o[u].videoContentType=t),n.contentProtection&&n.contentProtection[u]&&n.contentProtection[u].pssh&&(o[u].pssh=n.contentProtection[u].pssh),typeof i[u]=="string"&&(o[u].url=i[u]);return U.mergeOptions(i,o)},$g=function(i,n){return i.reduce(function(r,e){if(!e.contentProtection)return r;var t=n.reduce(function(a,o){var u=e.contentProtection[o];return u&&u.pssh&&(a[o]={pssh:u.pssh}),a},{});return Object.keys(t).length&&r.push(t),r},[])},Yg=function(i){var n=i.player,r=i.sourceKeySystems,e=i.audioMedia,t=i.mainPlaylists;if(!n.eme.initializeMediaKeys)return Promise.resolve();var a=e?t.concat([e]):t,o=$g(a,Object.keys(r)),u=[],l=[];return o.forEach(function(c){l.push(new Promise(function(g,m){n.tech_.one("keysessioncreated",g)})),u.push(new Promise(function(g,m){n.eme.initializeMediaKeys({keySystems:c},function(T){if(T){m(T);return}g()})}))}),Promise.race([Promise.all(u),Promise.race(l)])},Qg=function(i){var n=i.player,r=i.sourceKeySystems,e=i.media,t=i.audioMedia,a=Xg(r,e,t);return a?(n.currentSource().keySystems=a,a&&!n.eme?(U.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},Kc=function(){if(!x().localStorage)return null;var i=x().localStorage.getItem(qc);if(!i)return null;try{return JSON.parse(i)}catch(n){return null}},Zg=function(i){if(!x().localStorage)return!1;var n=Kc();n=n?U.mergeOptions(n,i):i;try{x().localStorage.setItem(qc,JSON.stringify(n))}catch(r){return!1}return n},Jg=function(i){return i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(i.substring(i.indexOf(",")+1)):i};zt.supportsNativeHls=function(){if(!N()||!N().createElement)return!1;var s=N().createElement("video");if(!U.getTech("Html5").isSupported())return!1;var i=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return i.some(function(n){return/maybe|probably/i.test(s.canPlayType(n))})}(),zt.supportsNativeDash=function(){return!N()||!N().createElement||!U.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(N().createElement("video").canPlayType("application/dash+xml"))}(),zt.supportsTypeNatively=function(s){return s==="hls"?zt.supportsNativeHls:s==="dash"?zt.supportsNativeDash:!1},zt.isSupported=function(){return U.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ev=U.getComponent("Component"),Ru=function(s){K(i,s);function i(r,e,t){var a;if(a=s.call(this,e,U.mergeOptions(t.hls,t.vhs))||this,t.hls&&Object.keys(t.hls).length&&U.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof t.initialBandwidth=="number"&&(a.options_.bandwidth=t.initialBandwidth),a.logger_=Fi("VhsHandler"),e.options_&&e.options_.playerId){var o=U(e.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return U.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"hls-player-access"}),(0,J.Z)(a)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return U.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"vhs-player-access"}),(0,J.Z)(a)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return U.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),(0,J.Z)(a)},configurable:!0}),a.player_=o}if(a.tech_=e,a.source_=r,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(N(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(u){var l=N().fullscreenElement||N().webkitFullscreenElement||N().mozFullScreenElement||N().msFullscreenElement;l&&l.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()}),a.on(a.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}var n=i.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var t=Kc();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Wt.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Wt.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(a){typeof e.source_[a]!="undefined"&&(e.options_[a]=e.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var a=this;if(!!e){this.setOptions_(),this.options_.src=Jg(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=zt,this.options_.sourceType=rt(t),this.options_.seekTo=function(l){a.tech_.setCurrentTime(l)},this.options_.smoothQualityChange&&U.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Rg(this.options_);var o=U.mergeOptions({liveRangeSafeTimeDelta:Ki},this.options_,{seekable:function(){return a.seekable()},media:function(){return a.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Bg(o),this.masterPlaylistController_.on("error",function(){var l=U.players[a.tech_.options_.playerId],c=a.masterPlaylistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),l.error(c)});var u=this.options_.experimentalBufferBasedABR?zt.movingAverageBandwidthSelector(.55):zt.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):u.bind(this),this.masterPlaylistController_.selectInitialPlaylist=zt.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,g=x().navigator.connection||x().navigator.mozConnection||x().navigator.webkitConnection,m=1e7;if(this.options_.useNetworkInformationApi&&g){var T=g.downlink*1e3*1e3;T>=m&&c>=m?c=Math.max(c,T):c=T}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var c=1/(this.bandwidth||1),g;this.throughput>0?g=1/this.throughput:g=0;var m=Math.floor(1/(c+g));return m},set:function(){U.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return a.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return a.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return a.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Wr(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Wr(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){a.options_.useBandwidthFromLocalStorage&&Zg({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Ug(a)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){a.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=x().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Yg({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(a){e.logger_("error while creating EME key session",a),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=Qg({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var u=e.masterPlaylistController_.master();if(!(!u||!u.playlists)){var l=[];if(u.playlists.forEach(function(g){g&&g.attributes&&g.attributes.RESOLUTION&&g.attributes.RESOLUTION.height>=720&&(!g.excludeUntil||g.excludeUntil<1/0)&&(g.excludeUntil=1/0,l.push(g))}),l.length){var c;(c=U.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(l)),e.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),U.browser.IE_VERSION===11||!a){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},n.setupQualityLevels_=function(){var e=this,t=U.players[this.tech_.options_.playerId];!t||!t.qualityLevels||this.qualityLevels_||(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Kg(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){zc(e.qualityLevels_,e.playlists)}))},i.version=function(){return{"@videojs/http-streaming":Gc,"mux.js":Wg,"mpd-parser":Gg,"m3u8-parser":qg,"aes-decrypter":zg}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return Uc.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&x().URL.revokeObjectURL&&(x().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),s.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return cm({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,a,o){return a===void 0&&(a=!0),o===void 0&&(o=2),fm({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},i}(ev),vs={name:"videojs-http-streaming",VERSION:Gc,canHandleSource:function(i,n){n===void 0&&(n={});var r=U.mergeOptions(U.options,n);return vs.canPlayType(i.type,r)},handleSource:function(i,n,r){r===void 0&&(r={});var e=U.mergeOptions(U.options,r);return n.vhs=new Ru(i,n,e),U.hasOwnProperty("hls")||Object.defineProperty(n,"hls",{get:function(){return U.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),n.vhs},configurable:!0}),n.vhs.xhr=nc(),n.vhs.src(i.src,i.type),n.vhs},canPlayType:function(i,n){n===void 0&&(n={});var r=U.mergeOptions(U.options,n),e=r.vhs;e=e===void 0?{}:e;var t=e.overrideNative,a=t===void 0?!U.browser.IS_ANY_SAFARI:t,o=r.hls;o=o===void 0?{}:o;var u=o.overrideNative,l=u===void 0?!1:u,c=rt(i),g=c&&(!zt.supportsTypeNatively(c)||l||a);return g?"maybe":""}},tv=function(){return Gt("avc1.4d400d,mp4a.40.2")};if(tv()&&U.getTech("Html5").registerSourceHandler(vs,0),U.VhsHandler=Ru,Object.defineProperty(U,"HlsHandler",{get:function(){return U.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Ru},configurable:!0}),U.VhsSourceHandler=vs,Object.defineProperty(U,"HlsSourceHandler",{get:function(){return U.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),vs},configurable:!0}),U.Vhs=zt,Object.defineProperty(U,"Hls",{get:function(){return U.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),zt},configurable:!0}),U.use||(U.registerComponent("Hls",zt),U.registerComponent("Vhs",zt)),U.options.vhs=U.options.vhs||{},U.options.hls=U.options.hls||{},!U.getPlugin||!U.getPlugin("reloadSourceOnError")){var iv=U.registerPlugin||U.plugin;iv("reloadSourceOnError",jg)}var rv=U,nv=R(92323),av=R.n(nv),Xc=Object.prototype.hasOwnProperty;function $c(s,i,n){for(n of s.keys())if(fa(n,i))return n}function fa(s,i){var n,r,e;if(s===i)return!0;if(s&&i&&(n=s.constructor)===i.constructor){if(n===Date)return s.getTime()===i.getTime();if(n===RegExp)return s.toString()===i.toString();if(n===Array){if((r=s.length)===i.length)for(;r--&&fa(s[r],i[r]););return r===-1}if(n===Set){if(s.size!==i.size)return!1;for(r of s)if(e=r,e&&typeof e=="object"&&(e=$c(i,e),!e)||!i.has(e))return!1;return!0}if(n===Map){if(s.size!==i.size)return!1;for(r of s)if(e=r[0],e&&typeof e=="object"&&(e=$c(i,e),!e)||!fa(r[1],i.get(e)))return!1;return!0}if(n===ArrayBuffer)s=new Uint8Array(s),i=new Uint8Array(i);else if(n===DataView){if((r=s.byteLength)===i.byteLength)for(;r--&&s.getInt8(r)===i.getInt8(r););return r===-1}if(ArrayBuffer.isView(s)){if((r=s.byteLength)===i.byteLength)for(;r--&&s[r]===i[r];);return r===-1}if(!n||typeof s=="object"){r=0;for(n in s)if(Xc.call(s,n)&&++r&&!Xc.call(i,n)||!(n in i)||!fa(s[n],i[n]))return!1;return Object.keys(i).length===r}}return s!==s&&i!==i}function Yc(s){const i=j.useRef(s),n=j.useRef(0);return fa(s,i.current)||(i.current=s,n.current+=1),j.useMemo(()=>i.current,[n.current])}const Qc=(0,j.forwardRef)((o,a)=>{var u=o,{children:s,videoJsOptions:i,onReady:n,onDispose:r,classNames:e}=u,t=Ju(u,["children","videoJsOptions","onReady","onDispose","classNames"]);const l=a,c=av()(i),g=(0,j.useRef)(null),m=(0,j.useRef)(null);return(0,j.useLayoutEffect)(()=>{var T;if(!((T=g.current)!=null&&T.parentNode))return;const E=g.current.parentNode.cloneNode(!0);return l.current||(l.current=rv(g.current,c),l.current.ready(()=>{n()})),()=>{var C;l.current&&(l.current.dispose(),m.current&&((C=g.current)==null?void 0:C.parentNode)&&!m.current.contains(g.current.parentNode)&&(m.current.appendChild(E),g.current=E.firstChild),l.current=null,r())}},[Yc(i)]),j.createElement("div",{ref:m},j.createElement("div",{"data-vjs-player":!0},j.createElement("video",Zu({ref:g,className:`video-js ${e}`},t),s)))});Qc.displayName="VideoJsWrapper";const sv=(s,i="")=>{const[n,r]=(0,j.useState)(!1),e=(0,j.useRef)(null);return{Video:(0,j.useCallback)(u=>{var l=u,{children:a}=l,o=Ju(l,["children"]);return j.createElement(Qc,Vf(Zu({videoJsOptions:s,classNames:i,onReady:()=>r(!0),onDispose:()=>r(!1)},o),{ref:e}),a)},[Yc(s),i]),ready:n,player:e.current}}},64655:function(we){we.exports=oe;function oe(R,j){var ye,x=null;try{ye=JSON.parse(R,j)}catch(ge){x=ge}return[x,ye]}},4472:function(we){(function(oe){var R=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,j=/^(?=([^\/?#]*))\1([^]*)$/,ye=/(?:\/|^)\.(?=\/)/g,x=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,ge={buildAbsoluteURL:function(N,Q,Ce){if(Ce=Ce||{},N=N.trim(),Q=Q.trim(),!Q){if(!Ce.alwaysNormalize)return N;var Z=ge.parseURL(N);if(!Z)throw new Error("Error trying to parse base URL.");return Z.path=ge.normalizePath(Z.path),ge.buildURLFromParts(Z)}var J=ge.parseURL(Q);if(!J)throw new Error("Error trying to parse relative URL.");if(J.scheme)return Ce.alwaysNormalize?(J.path=ge.normalizePath(J.path),ge.buildURLFromParts(J)):Q;var Te=ge.parseURL(N);if(!Te)throw new Error("Error trying to parse base URL.");if(!Te.netLoc&&Te.path&&Te.path[0]!=="/"){var K=j.exec(Te.path);Te.netLoc=K[1],Te.path=K[2]}Te.netLoc&&!Te.path&&(Te.path="/");var le={scheme:Te.scheme,netLoc:J.netLoc,path:null,params:J.params,query:J.query,fragment:J.fragment};if(!J.netLoc&&(le.netLoc=Te.netLoc,J.path[0]!=="/"))if(!J.path)le.path=Te.path,J.params||(le.params=Te.params,J.query||(le.query=Te.query));else{var Fe=Te.path,Ve=Fe.substring(0,Fe.lastIndexOf("/")+1)+J.path;le.path=ge.normalizePath(Ve)}return le.path===null&&(le.path=Ce.alwaysNormalize?ge.normalizePath(J.path):J.path),ge.buildURLFromParts(le)},parseURL:function(N){var Q=R.exec(N);return Q?{scheme:Q[1]||"",netLoc:Q[2]||"",path:Q[3]||"",params:Q[4]||"",query:Q[5]||"",fragment:Q[6]||""}:null},normalizePath:function(N){for(N=N.split("").reverse().join("").replace(ye,"");N.length!==(N=N.replace(x,"")).length;);return N.split("").reverse().join("")},buildURLFromParts:function(N){return N.scheme+N.netLoc+N.path+N.params+N.query+N.fragment}};we.exports=ge})(this)},71715:function(we,oe,R){var j=R(83577),ye=we.exports={WebVTT:R(30089),VTTCue:R(70293),VTTRegion:R(72429)};j.vttjs=ye,j.WebVTT=ye.WebVTT;var x=ye.VTTCue,ge=ye.VTTRegion,N=j.VTTCue,Q=j.VTTRegion;ye.shim=function(){j.VTTCue=x,j.VTTRegion=ge},ye.restore=function(){j.VTTCue=N,j.VTTRegion=Q},j.VTTCue||ye.shim()},30089:function(we,oe,R){var j=R(15651),ye=Object.create||function(){function I(){}return function(D){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return I.prototype=D,new I}}();function x(I,D){this.name="ParsingError",this.code=I.code,this.message=D||I.message}x.prototype=ye(Error.prototype),x.prototype.constructor=x,x.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function ge(I){function D(de,re,_e,pe){return(de|0)*3600+(re|0)*60+(_e|0)+(pe|0)/1e3}var B=I.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return B?B[3]?D(B[1],B[2],B[3].replace(":",""),B[4]):B[1]>59?D(B[1],B[2],0,B[4]):D(0,B[1],B[2],B[4]):null}function N(){this.values=ye(null)}N.prototype={set:function(I,D){!this.get(I)&&D!==""&&(this.values[I]=D)},get:function(I,D,B){return B?this.has(I)?this.values[I]:D[B]:this.has(I)?this.values[I]:D},has:function(I){return I in this.values},alt:function(I,D,B){for(var de=0;de<B.length;++de)if(D===B[de]){this.set(I,D);break}},integer:function(I,D){/^-?\d+$/.test(D)&&this.set(I,parseInt(D,10))},percent:function(I,D){var B;return(B=D.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(D=parseFloat(D),D>=0&&D<=100)?(this.set(I,D),!0):!1}};function Q(I,D,B,de){var re=de?I.split(de):[I];for(var _e in re)if(typeof re[_e]=="string"){var pe=re[_e].split(B);if(pe.length===2){var Ie=pe[0].trim(),ne=pe[1].trim();D(Ie,ne)}}}function Ce(I,D,B){var de=I;function re(){var Ie=ge(I);if(Ie===null)throw new x(x.Errors.BadTimeStamp,"Malformed timestamp: "+de);return I=I.replace(/^[^\sa-zA-Z-]+/,""),Ie}function _e(Ie,ne){var ee=new N;Q(Ie,function(ce,fe){switch(ce){case"region":for(var ke=B.length-1;ke>=0;ke--)if(B[ke].id===fe){ee.set(ce,B[ke].region);break}break;case"vertical":ee.alt(ce,fe,["rl","lr"]);break;case"line":var Ke=fe.split(","),ze=Ke[0];ee.integer(ce,ze),ee.percent(ce,ze)&&ee.set("snapToLines",!1),ee.alt(ce,ze,["auto"]),Ke.length===2&&ee.alt("lineAlign",Ke[1],["start","center","end"]);break;case"position":Ke=fe.split(","),ee.percent(ce,Ke[0]),Ke.length===2&&ee.alt("positionAlign",Ke[1],["start","center","end"]);break;case"size":ee.percent(ce,fe);break;case"align":ee.alt(ce,fe,["start","center","end","left","right"]);break}},/:/,/\s/),ne.region=ee.get("region",null),ne.vertical=ee.get("vertical","");try{ne.line=ee.get("line","auto")}catch(ce){}ne.lineAlign=ee.get("lineAlign","start"),ne.snapToLines=ee.get("snapToLines",!0),ne.size=ee.get("size",100);try{ne.align=ee.get("align","center")}catch(ce){ne.align=ee.get("align","middle")}try{ne.position=ee.get("position","auto")}catch(ce){ne.position=ee.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},ne.align)}ne.positionAlign=ee.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},ne.align)}function pe(){I=I.replace(/^\s+/,"")}if(pe(),D.startTime=re(),pe(),I.substr(0,3)!=="-->")throw new x(x.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+de);I=I.substr(3),pe(),D.endTime=re(),pe(),_e(I,D)}var Z=j.createElement&&j.createElement("textarea"),J={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Te={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},K={v:"title",lang:"lang"},le={rt:"ruby"};function Fe(I,D){function B(){if(!D)return null;function ze(Ne){return D=D.substr(Ne.length),Ne}var Re=D.match(/^([^<]*)(<[^>]*>?)?/);return ze(Re[1]?Re[1]:Re[2])}function de(ze){return Z.innerHTML=ze,ze=Z.textContent,Z.textContent="",ze}function re(ze,Re){return!le[Re.localName]||le[Re.localName]===ze.localName}function _e(ze,Re){var Ne=J[ze];if(!Ne)return null;var bt=I.document.createElement(Ne),Bt=K[ze];return Bt&&Re&&(bt[Bt]=Re.trim()),bt}for(var pe=I.document.createElement("div"),Ie=pe,ne,ee=[];(ne=B())!==null;){if(ne[0]==="<"){if(ne[1]==="/"){ee.length&&ee[ee.length-1]===ne.substr(2).replace(">","")&&(ee.pop(),Ie=Ie.parentNode);continue}var ce=ge(ne.substr(1,ne.length-2)),fe;if(ce){fe=I.document.createProcessingInstruction("timestamp",ce),Ie.appendChild(fe);continue}var ke=ne.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ke||(fe=_e(ke[1],ke[3]),!fe)||!re(Ie,fe))continue;if(ke[2]){var Ke=ke[2].split(".");Ke.forEach(function(ze){var Re=/^bg_/.test(ze),Ne=Re?ze.slice(3):ze;if(Te.hasOwnProperty(Ne)){var bt=Re?"background-color":"color",Bt=Te[Ne];fe.style[bt]=Bt}}),fe.className=Ke.join(" ")}ee.push(ke[1]),Ie.appendChild(fe),Ie=fe;continue}Ie.appendChild(I.document.createTextNode(de(ne)))}return pe}var Ve=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function et(I){for(var D=0;D<Ve.length;D++){var B=Ve[D];if(I>=B[0]&&I<=B[1])return!0}return!1}function ut(I){var D=[],B="",de;if(!I||!I.childNodes)return"ltr";function re(Ie,ne){for(var ee=ne.childNodes.length-1;ee>=0;ee--)Ie.push(ne.childNodes[ee])}function _e(Ie){if(!Ie||!Ie.length)return null;var ne=Ie.pop(),ee=ne.textContent||ne.innerText;if(ee){var ce=ee.match(/^.*(\n|\r)/);return ce?(Ie.length=0,ce[0]):ee}if(ne.tagName==="ruby")return _e(Ie);if(ne.childNodes)return re(Ie,ne),_e(Ie)}for(re(D,I);B=_e(D);)for(var pe=0;pe<B.length;pe++)if(de=B.charCodeAt(pe),et(de))return"rtl";return"ltr"}function me(I){if(typeof I.line=="number"&&(I.snapToLines||I.line>=0&&I.line<=100))return I.line;if(!I.track||!I.track.textTrackList||!I.track.textTrackList.mediaElement)return-1;for(var D=I.track,B=D.textTrackList,de=0,re=0;re<B.length&&B[re]!==D;re++)B[re].mode==="showing"&&de++;return++de*-1}function Be(){}Be.prototype.applyStyles=function(I,D){D=D||this.div;for(var B in I)I.hasOwnProperty(B)&&(D.style[B]=I[B])},Be.prototype.formatStyle=function(I,D){return I===0?0:I+D};function Se(I,D,B){Be.call(this),this.cue=D,this.cueDiv=Fe(I,D.text);var de={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:D.vertical===""?"horizontal-tb":D.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(de,this.cueDiv),this.div=I.document.createElement("div"),de={direction:ut(this.cueDiv),writingMode:D.vertical===""?"horizontal-tb":D.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:D.align==="middle"?"center":D.align,font:B.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(de),this.div.appendChild(this.cueDiv);var re=0;switch(D.positionAlign){case"start":re=D.position;break;case"center":re=D.position-D.size/2;break;case"end":re=D.position-D.size;break}D.vertical===""?this.applyStyles({left:this.formatStyle(re,"%"),width:this.formatStyle(D.size,"%")}):this.applyStyles({top:this.formatStyle(re,"%"),height:this.formatStyle(D.size,"%")}),this.move=function(_e){this.applyStyles({top:this.formatStyle(_e.top,"px"),bottom:this.formatStyle(_e.bottom,"px"),left:this.formatStyle(_e.left,"px"),right:this.formatStyle(_e.right,"px"),height:this.formatStyle(_e.height,"px"),width:this.formatStyle(_e.width,"px")})}}Se.prototype=ye(Be.prototype),Se.prototype.constructor=Se;function Le(I){var D,B,de,re;if(I.div){B=I.div.offsetHeight,de=I.div.offsetWidth,re=I.div.offsetTop;var _e=(_e=I.div.childNodes)&&(_e=_e[0])&&_e.getClientRects&&_e.getClientRects();I=I.div.getBoundingClientRect(),D=_e?Math.max(_e[0]&&_e[0].height||0,I.height/_e.length):0}this.left=I.left,this.right=I.right,this.top=I.top||re,this.height=I.height||B,this.bottom=I.bottom||re+(I.height||B),this.width=I.width||de,this.lineHeight=D!==void 0?D:I.lineHeight}Le.prototype.move=function(I,D){switch(D=D!==void 0?D:this.lineHeight,I){case"+x":this.left+=D,this.right+=D;break;case"-x":this.left-=D,this.right-=D;break;case"+y":this.top+=D,this.bottom+=D;break;case"-y":this.top-=D,this.bottom-=D;break}},Le.prototype.overlaps=function(I){return this.left<I.right&&this.right>I.left&&this.top<I.bottom&&this.bottom>I.top},Le.prototype.overlapsAny=function(I){for(var D=0;D<I.length;D++)if(this.overlaps(I[D]))return!0;return!1},Le.prototype.within=function(I){return this.top>=I.top&&this.bottom<=I.bottom&&this.left>=I.left&&this.right<=I.right},Le.prototype.overlapsOppositeAxis=function(I,D){switch(D){case"+x":return this.left<I.left;case"-x":return this.right>I.right;case"+y":return this.top<I.top;case"-y":return this.bottom>I.bottom}},Le.prototype.intersectPercentage=function(I){var D=Math.max(0,Math.min(this.right,I.right)-Math.max(this.left,I.left)),B=Math.max(0,Math.min(this.bottom,I.bottom)-Math.max(this.top,I.top)),de=D*B;return de/(this.height*this.width)},Le.prototype.toCSSCompatValues=function(I){return{top:this.top-I.top,bottom:I.bottom-this.bottom,left:this.left-I.left,right:I.right-this.right,height:this.height,width:this.width}},Le.getSimpleBoxPosition=function(I){var D=I.div?I.div.offsetHeight:I.tagName?I.offsetHeight:0,B=I.div?I.div.offsetWidth:I.tagName?I.offsetWidth:0,de=I.div?I.div.offsetTop:I.tagName?I.offsetTop:0;I=I.div?I.div.getBoundingClientRect():I.tagName?I.getBoundingClientRect():I;var re={left:I.left,right:I.right,top:I.top||de,height:I.height||D,bottom:I.bottom||de+(I.height||D),width:I.width||B};return re};function Ye(I,D,B,de){function re(Ne,bt){for(var Bt,Ct=new Le(Ne),it=1,Zt=0;Zt<bt.length;Zt++){for(;Ne.overlapsOppositeAxis(B,bt[Zt])||Ne.within(B)&&Ne.overlapsAny(de);)Ne.move(bt[Zt]);if(Ne.within(B))return Ne;var Ai=Ne.intersectPercentage(B);it>Ai&&(Bt=new Le(Ne),it=Ai),Ne=new Le(Ct)}return Bt||Ct}var _e=new Le(D),pe=D.cue,Ie=me(pe),ne=[];if(pe.snapToLines){var ee;switch(pe.vertical){case"":ne=["+y","-y"],ee="height";break;case"rl":ne=["+x","-x"],ee="width";break;case"lr":ne=["-x","+x"],ee="width";break}var ce=_e.lineHeight,fe=ce*Math.round(Ie),ke=B[ee]+ce,Ke=ne[0];Math.abs(fe)>ke&&(fe=fe<0?-1:1,fe*=Math.ceil(ke/ce)*ce),Ie<0&&(fe+=pe.vertical===""?B.height:B.width,ne=ne.reverse()),_e.move(Ke,fe)}else{var ze=_e.lineHeight/B.height*100;switch(pe.lineAlign){case"center":Ie-=ze/2;break;case"end":Ie-=ze;break}switch(pe.vertical){case"":D.applyStyles({top:D.formatStyle(Ie,"%")});break;case"rl":D.applyStyles({left:D.formatStyle(Ie,"%")});break;case"lr":D.applyStyles({right:D.formatStyle(Ie,"%")});break}ne=["+y","-x","+x","-y"],_e=new Le(D)}var Re=re(_e,ne);D.move(Re.toCSSCompatValues(B))}function Ae(){}Ae.StringDecoder=function(){return{decode:function(I){if(!I)return"";if(typeof I!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(I))}}},Ae.convertCueToDOMTree=function(I,D){return!I||!D?null:Fe(I,D)};var Xe=.05,qe="sans-serif",We="1.5%";Ae.processCues=function(I,D,B){if(!I||!D||!B)return null;for(;B.firstChild;)B.removeChild(B.firstChild);var de=I.document.createElement("div");de.style.position="absolute",de.style.left="0",de.style.right="0",de.style.top="0",de.style.bottom="0",de.style.margin=We,B.appendChild(de);function re(ce){for(var fe=0;fe<ce.length;fe++)if(ce[fe].hasBeenReset||!ce[fe].displayState)return!0;return!1}if(!re(D)){for(var _e=0;_e<D.length;_e++)de.appendChild(D[_e].displayState);return}var pe=[],Ie=Le.getSimpleBoxPosition(de),ne=Math.round(Ie.height*Xe*100)/100,ee={font:ne+"px "+qe};(function(){for(var ce,fe,ke=0;ke<D.length;ke++)fe=D[ke],ce=new Se(I,fe,ee),de.appendChild(ce.div),Ye(I,ce,Ie,pe),fe.displayState=ce.div,pe.push(Le.getSimpleBoxPosition(ce))})()},Ae.Parser=function(I,D,B){B||(B=D,D={}),D||(D={}),this.window=I,this.vttjs=D,this.state="INITIAL",this.buffer="",this.decoder=B||new TextDecoder("utf8"),this.regionList=[]},Ae.Parser.prototype={reportOrThrowError:function(I){if(I instanceof x)this.onparsingerror&&this.onparsingerror(I);else throw I},parse:function(I){var D=this;I&&(D.buffer+=D.decoder.decode(I,{stream:!0}));function B(){for(var ce=D.buffer,fe=0;fe<ce.length&&ce[fe]!=="\r"&&ce[fe]!==`
`;)++fe;var ke=ce.substr(0,fe);return ce[fe]==="\r"&&++fe,ce[fe]===`
`&&++fe,D.buffer=ce.substr(fe),ke}function de(ce){var fe=new N;if(Q(ce,function(Ke,ze){switch(Ke){case"id":fe.set(Ke,ze);break;case"width":fe.percent(Ke,ze);break;case"lines":fe.integer(Ke,ze);break;case"regionanchor":case"viewportanchor":var Re=ze.split(",");if(Re.length!==2)break;var Ne=new N;if(Ne.percent("x",Re[0]),Ne.percent("y",Re[1]),!Ne.has("x")||!Ne.has("y"))break;fe.set(Ke+"X",Ne.get("x")),fe.set(Ke+"Y",Ne.get("y"));break;case"scroll":fe.alt(Ke,ze,["up"]);break}},/=/,/\s/),fe.has("id")){var ke=new(D.vttjs.VTTRegion||D.window.VTTRegion);ke.width=fe.get("width",100),ke.lines=fe.get("lines",3),ke.regionAnchorX=fe.get("regionanchorX",0),ke.regionAnchorY=fe.get("regionanchorY",100),ke.viewportAnchorX=fe.get("viewportanchorX",0),ke.viewportAnchorY=fe.get("viewportanchorY",100),ke.scroll=fe.get("scroll",""),D.onregion&&D.onregion(ke),D.regionList.push({id:fe.get("id"),region:ke})}}function re(ce){var fe=new N;Q(ce,function(ke,Ke){switch(ke){case"MPEGT":fe.integer(ke+"S",Ke);break;case"LOCA":fe.set(ke+"L",ge(Ke));break}},/[^\d]:/,/,/),D.ontimestampmap&&D.ontimestampmap({MPEGTS:fe.get("MPEGTS"),LOCAL:fe.get("LOCAL")})}function _e(ce){ce.match(/X-TIMESTAMP-MAP/)?Q(ce,function(fe,ke){switch(fe){case"X-TIMESTAMP-MAP":re(ke);break}},/=/):Q(ce,function(fe,ke){switch(fe){case"Region":de(ke);break}},/:/)}try{var pe;if(D.state==="INITIAL"){if(!/\r\n|\n/.test(D.buffer))return this;pe=B();var Ie=pe.match(/^WEBVTT([ \t].*)?$/);if(!Ie||!Ie[0])throw new x(x.Errors.BadSignature);D.state="HEADER"}for(var ne=!1;D.buffer;){if(!/\r\n|\n/.test(D.buffer))return this;switch(ne?ne=!1:pe=B(),D.state){case"HEADER":/:/.test(pe)?_e(pe):pe||(D.state="ID");continue;case"NOTE":pe||(D.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(pe)){D.state="NOTE";break}if(!pe)continue;D.cue=new(D.vttjs.VTTCue||D.window.VTTCue)(0,0,"");try{D.cue.align="center"}catch(ce){D.cue.align="middle"}if(D.state="CUE",pe.indexOf("-->")===-1){D.cue.id=pe;continue}case"CUE":try{Ce(pe,D.cue,D.regionList)}catch(ce){D.reportOrThrowError(ce),D.cue=null,D.state="BADCUE";continue}D.state="CUETEXT";continue;case"CUETEXT":var ee=pe.indexOf("-->")!==-1;if(!pe||ee&&(ne=!0)){D.oncue&&D.oncue(D.cue),D.cue=null,D.state="ID";continue}D.cue.text&&(D.cue.text+=`
`),D.cue.text+=pe.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":pe||(D.state="ID");continue}}}catch(ce){D.reportOrThrowError(ce),D.state==="CUETEXT"&&D.cue&&D.oncue&&D.oncue(D.cue),D.cue=null,D.state=D.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var I=this;try{if(I.buffer+=I.decoder.decode(),(I.cue||I.state==="HEADER")&&(I.buffer+=`

`,I.parse()),I.state==="INITIAL")throw new x(x.Errors.BadSignature)}catch(D){I.reportOrThrowError(D)}return I.onflush&&I.onflush(),this}},we.exports=Ae},70293:function(we){var oe="auto",R={"":1,lr:1,rl:1},j={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function ye(N){if(typeof N!="string")return!1;var Q=R[N.toLowerCase()];return Q?N.toLowerCase():!1}function x(N){if(typeof N!="string")return!1;var Q=j[N.toLowerCase()];return Q?N.toLowerCase():!1}function ge(N,Q,Ce){this.hasBeenReset=!1;var Z="",J=!1,Te=N,K=Q,le=Ce,Fe=null,Ve="",et=!0,ut="auto",me="start",Be="auto",Se="auto",Le=100,Ye="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return Z},set:function(Ae){Z=""+Ae}},pauseOnExit:{enumerable:!0,get:function(){return J},set:function(Ae){J=!!Ae}},startTime:{enumerable:!0,get:function(){return Te},set:function(Ae){if(typeof Ae!="number")throw new TypeError("Start time must be set to a number.");Te=Ae,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return K},set:function(Ae){if(typeof Ae!="number")throw new TypeError("End time must be set to a number.");K=Ae,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return le},set:function(Ae){le=""+Ae,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return Fe},set:function(Ae){Fe=Ae,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Ve},set:function(Ae){var Xe=ye(Ae);if(Xe===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Ve=Xe,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return et},set:function(Ae){et=!!Ae,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return ut},set:function(Ae){if(typeof Ae!="number"&&Ae!==oe)throw new SyntaxError("Line: an invalid number or illegal string was specified.");ut=Ae,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return me},set:function(Ae){var Xe=x(Ae);Xe?(me=Xe,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Be},set:function(Ae){if(Ae<0||Ae>100)throw new Error("Position must be between 0 and 100.");Be=Ae,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Se},set:function(Ae){var Xe=x(Ae);Xe?(Se=Xe,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return Le},set:function(Ae){if(Ae<0||Ae>100)throw new Error("Size must be between 0 and 100.");Le=Ae,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Ye},set:function(Ae){var Xe=x(Ae);if(!Xe)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Ye=Xe,this.hasBeenReset=!0}}}),this.displayState=void 0}ge.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},we.exports=ge},72429:function(we){var oe={"":!0,up:!0};function R(x){if(typeof x!="string")return!1;var ge=oe[x.toLowerCase()];return ge?x.toLowerCase():!1}function j(x){return typeof x=="number"&&x>=0&&x<=100}function ye(){var x=100,ge=3,N=0,Q=100,Ce=0,Z=100,J="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return x},set:function(Te){if(!j(Te))throw new Error("Width must be between 0 and 100.");x=Te}},lines:{enumerable:!0,get:function(){return ge},set:function(Te){if(typeof Te!="number")throw new TypeError("Lines must be set to a number.");ge=Te}},regionAnchorY:{enumerable:!0,get:function(){return Q},set:function(Te){if(!j(Te))throw new Error("RegionAnchorX must be between 0 and 100.");Q=Te}},regionAnchorX:{enumerable:!0,get:function(){return N},set:function(Te){if(!j(Te))throw new Error("RegionAnchorY must be between 0 and 100.");N=Te}},viewportAnchorY:{enumerable:!0,get:function(){return Z},set:function(Te){if(!j(Te))throw new Error("ViewportAnchorY must be between 0 and 100.");Z=Te}},viewportAnchorX:{enumerable:!0,get:function(){return Ce},set:function(Te){if(!j(Te))throw new Error("ViewportAnchorX must be between 0 and 100.");Ce=Te}},scroll:{enumerable:!0,get:function(){return J},set:function(Te){var K=R(Te);K===!1?console.warn("Scroll: an invalid or illegal string was specified."):J=K}}})}we.exports=ye},9222:function(we){function oe(){return we.exports=oe=Object.assign?Object.assign.bind():function(R){for(var j=1;j<arguments.length;j++){var ye=arguments[j];for(var x in ye)Object.prototype.hasOwnProperty.call(ye,x)&&(R[x]=ye[x])}return R},we.exports.__esModule=!0,we.exports.default=we.exports,oe.apply(this,arguments)}we.exports=oe,we.exports.__esModule=!0,we.exports.default=we.exports}}]);
