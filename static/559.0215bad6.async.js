(self.webpackChunkai_frontend=self.webpackChunkai_frontend||[]).push([[559],{65348:function(w,D,a){"use strict";a.d(D,{Z:function(){return j}});var A=a(93236),d=a(38430),Z={langBadge:"langBadge___GAdAy"},b=a(62086),U=[{lang:"en_US",name:"EN"},{lang:"zh_CN",name:"\u4E2D\u6587"}],g=(0,d.l)(U,"lang"),M=function(S){var C=g.get(S.lang);return(0,b.jsx)("span",{className:Z.langBadge,style:{backgroundColor:C.color.textColor},children:C.name})},j=M},13924:function(w,D,a){"use strict";a.r(D),a.d(D,{default:function(){return Ge}});var A=a(30279),d=a.n(A),Z=a(46686),b=a.n(Z),U=a(35290),g=a.n(U),M=a(411),j=a.n(M),u=a(93236),S=a(8195),C=a(35768),I=a(66122),$=a(24381),R=a(46859),Q=a(44463),K=a.n(Q),G=a(86004),e=a(62086),k=G.Z.TextArea,q=(0,u.memo)(function(r){return(0,e.jsx)(k,d()({rows:6,placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u5185\u5BB9."},r))}),_=q,W=a(41385),ee=a(17771),ne=a(5476),ae={preview:"preview___bXqkH"},re=(0,u.memo)(function(r){var t=r.src,n=(0,ee.A)({sources:[{src:t}],autoplay:"muted"}),o=n.Video,v=(0,u.useMemo)(function(){return t?(0,ne.fromExtension)(t):void 0},[t]),O=(0,u.useMemo)(function(){var F=null;return v==="image"&&(F=(0,e.jsx)(W.Z,{src:t,width:300})),v==="video"&&(F=(0,e.jsx)(o,{src:t,width:300})),F},[o,v,t]);return(0,e.jsx)("div",{className:ae.preview,children:O})}),te=re,oe=a(47277),ue=a(94434),Y=a.n(ue),le=a(65713),se=a(17986),ie=a(61654),H=a(87976);function de(){return V.apply(this,arguments)}function V(){return V=j()(g()().mark(function r(){return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",H.Z.get("oss/sign"));case 1:case"end":return n.stop()}},r)})),V.apply(this,arguments)}var ve=(0,u.memo)(function(r){var t=r.value,n=r.onChange,o=r.children,v=r.onUploaded,O=(0,u.useState)(),F=b()(O,2),l=F[0],h=F[1],y=function(){var E=j()(g()().mark(function x(){var f,c;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,de();case 3:c=i.sent,h(c==null||(f=c.data)===null||f===void 0?void 0:f.data),i.next=11;break;case 7:i.prev=7,i.t0=i.catch(0),console.error(i.t0),le.ZP.error("\u4E0A\u4F20\u5931\u8D25,\u8BF7\u7A0D\u540E\u91CD\u8BD5");case 11:case"end":return i.stop()}},x,null,[[0,7]])}));return function(){return E.apply(this,arguments)}}(),T=function(x){var f,c=x.fileList;console.log("Aliyun OSS:",c),n==null||n(Y()(c)),c==null||(f=c.forEach)===null||f===void 0||f.call(c,function(p){if((p==null?void 0:p.percent)===100){var i=(l==null?void 0:l.host)+"/"+(p==null?void 0:p.url);v==null||v(i,p)}})},L=function(x){return{key:x.url,OSSAccessKeyId:l==null?void 0:l.OSSAccessKeyId,policy:l==null?void 0:l.policy,Signature:l==null?void 0:l.Signature}},B=function(){var E=j()(g()().mark(function x(f){var c,p,i;return g()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(l){s.next=2;break}return s.abrupt("return",!1);case 2:if(c=Number(l.expire)*1e3,!(c<Date.now())){s.next=6;break}return s.next=6,y();case 6:return p=f.name.slice(f.name.lastIndexOf(".")),i=Date.now()+p,f.url=l.dir+"/"+i,s.abrupt("return",f);case 10:case"end":return s.stop()}},x)}));return function(f){return E.apply(this,arguments)}}(),z={name:"file",fileList:t,multiple:!1,maxCount:1,accept:"video/*, image/*",action:l==null?void 0:l.host,onChange:T,data:L,beforeUpload:B,showUploadList:!1};return(0,e.jsx)(se.Z,d()(d()({},z),{},{children:o||(0,e.jsx)(I.Z,{onClick:function(){y()},icon:(0,e.jsx)(ie.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})}))}),ce=ve,fe=(0,u.memo)(function(r){var t=r.value,n=r.onChange,o=n===void 0?function(){}:n,v=function(h){var y=h.target.value;o(y)},O=(0,oe.Z)(v,{wait:300}),F=O.run;return(0,e.jsxs)("div",{children:[(0,e.jsx)(te,{src:t}),(0,e.jsxs)(G.Z.Group,{compact:!0,children:[(0,e.jsx)(G.Z,{style:{width:"80%"},value:t,onChange:F})," ",(0,e.jsx)(ce,{onUploaded:function(h){o(h)}})]})]})}),me=fe,ge=["type"],he=(0,u.memo)(function(r){var t=r.type,n=K()(r,ge);switch(t){case"text":return(0,e.jsx)(_,d()({},n));case"videoUrl":case"imageUrl":return(0,e.jsx)(me,d()({},n));default:return(0,e.jsxs)("div",{children:["\u6682\u65E0\u6B64\u7C7B\u578B\u8F93\u5165\u6A21\u5757 : ",(0,e.jsx)("strong",{children:t})]})}}),pe=he,xe={wrap:"wrap___pfl52"},Ce=(0,u.memo)(function(r){var t=r.children,n=r.type,o=r.color;return n?(0,e.jsxs)("dl",{className:xe.wrap,style:{backgroundColor:o==null?void 0:o.bgColor,borderColor:o==null?void 0:o.textColor},children:[(0,e.jsx)("dt",{children:t}),(0,e.jsx)("dd",{style:{color:o==null?void 0:o.textColor},children:n})]}):(0,e.jsx)("span",{children:t})}),je=Ce,Fe=a(38430),ye=(0,u.memo)(function(r){var t=r.data;if(t&&t.length){var n=(0,Fe.l)(t);return(0,e.jsx)(e.Fragment,{children:Y()(n.values()).map(function(o,v){return(0,e.jsx)(je,{type:o.label,color:o.color,children:o.span},v)})})}return null}),Be=ye,De=a(33900),Se=(0,u.memo)(function(r){return r.data?(0,e.jsx)(De.Z,{pagination:!1,bordered:!0,dataSource:r.data,rowKey:"label",columns:[{dataIndex:"label",title:"\u9884\u6D4B\u7ED3\u679C"},{dataIndex:"score",title:"\u9884\u6D4B\u6982\u7387(\u53EF\u4FE1\u5EA6)"}]}):null}),Ee=Se,J={list:"list___YYeub",item:"item___IFnRV"},Ze=(0,u.memo)(function(r){var t=r.data;if(!t)return null;var n=[].concat(t);return(0,e.jsx)("div",{className:J.list,children:n.map(function(o,v){return(0,e.jsx)("div",{className:J.item,children:o},v)})})}),Oe=Ze,Ae={imageBox:"imageBox___aLI4L"},be=(0,u.memo)(function(r){return(0,e.jsx)("div",{className:Ae.imageBox,children:(0,e.jsx)(W.Z,{src:r.data,preview:!0})})}),Ue=be,Ie=["type"],Te=(0,u.memo)(function(r){var t=r.type,n=K()(r,Ie);switch(t){case"texts":case"text":return(0,e.jsx)(Oe,d()({},n));case"imageUrl":return(0,e.jsx)(Ue,d()({},n));case"scores":return(0,e.jsx)(Ee,d()({},n));case"spans":return(0,e.jsx)(Be,d()({},n));default:return(0,e.jsxs)("div",{children:["\u6682\u65E0\u6B64\u7C7B\u578B\u8F93\u51FA\u6A21\u5757 : ",(0,e.jsx)("strong",{children:t})]})}}),Me=Te,Le=a(36752),Re=a(74524),Ne={footer:"footer___CvaU9"},Pe=a(66124),we=a(65348),X=S.Z.Title,$e=(0,u.memo)(function(r){var t,n=r.model,o=r.open,v=r.onClose,O=function(){var m=j()(g()().mark(function s(N){return g()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",H.Z.post(n.apiPath,N));case 1:case"end":return P.stop()}},s)}));return function(N){return m.apply(this,arguments)}}(),F=C.Z.useForm(),l=b()(F,1),h=l[0],y=(n==null?void 0:n.samples)&&n.samples.length>0,T=(0,Pe.Z)(O,{manual:!0}),L=T.loading,B=T.data,z=T.run,E=T.mutate,x=(0,u.useCallback)(function(){if(y){var m=(0,Le.ei)(n.samples);h.setFieldValue("inputContent",m)}},[h,y,n]),f=function(){return y&&n.samples.length>1?(0,e.jsx)(I.Z,{size:"small",disabled:L,onClick:x,icon:(0,e.jsx)(Re.Z,{}),children:"\u66F4\u6362\u793A\u4F8B"}):null},c=(0,u.useMemo)(function(){return(0,e.jsx)(C.Z.Item,{name:"inputContent",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u5185\u5BB9!"}],children:(0,e.jsx)(pe,{type:n.input})})},[n]),p=(0,u.useMemo)(function(){var m;if(B&&B!==null&&B!==void 0&&(m=B.data)!==null&&m!==void 0&&m.data){var s,N=B==null||(s=B.data)===null||s===void 0?void 0:s.data;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(X,{level:5,children:"\u6D4B\u8BD5\u7ED3\u679C:"}),(0,e.jsx)(Me,{type:n.output,data:N})]})}return null},[B,n]),i=function(s){z(d()({},s))};return(0,u.useEffect)(function(){y&&h.setFieldValue("inputContent",n==null?void 0:n.samples[0])},[h,y,n==null?void 0:n.samples]),n?(0,e.jsx)($.Z,{extra:f(),title:(0,e.jsxs)("span",{children:[n.name," \u6D4B\u8BD5\u5185\u5BB9"," ",(0,e.jsx)(R.Z,{children:(t=n.languages)===null||t===void 0?void 0:t.map(function(m){return(0,e.jsx)(we.Z,{lang:m},m)})})]}),afterOpenChange:function(s){s?x():(h.resetFields(),E(void 0))},destroyOnClose:!0,open:o,onClose:v,width:"70%",footer:(0,e.jsx)("div",{className:Ne.footer,children:(0,e.jsxs)(R.Z,{size:24,children:[(0,e.jsx)(I.Z,{onClick:v,children:"\u5173\u95ED"}),(0,e.jsx)(I.Z,{type:"primary",onClick:function(){return h.submit()},loading:L,children:"\u63D0\u4EA4\u6D4B\u8BD5"})]})}),children:(0,e.jsxs)("div",{children:[(0,e.jsx)(C.Z,{layout:"vertical",form:h,onFinish:i,children:c}),(0,e.jsx)("div",{children:L?(0,e.jsx)(X,{level:5,children:"\u6D4B\u8BD5\u7ED3\u679C\u751F\u6210\u4E2D, \u8BF7\u7A0D\u7B49..."}):p})]})}):null}),Ge=$e},38430:function(w,D,a){"use strict";a.d(D,{l:function(){return M}});var A=a(30279),d=a.n(A),Z=a(94434),b=a.n(Z),U=new Map([["blue",{textColor:"#5B8DFA",bgColor:"#EBF0FF"}],["purple",{textColor:"#9978F6",bgColor:"#EFE9FF"}],["cyan",{textColor:"#5DD5D1",bgColor:"#E5FCF7"}],["pink",{textColor:"#DD73F6",bgColor:"#FFE8FF"}],["yellow",{textColor:"#F9B847",bgColor:"#FFF6E3"}],["green",{textColor:"#5BD695",bgColor:"#EDFCF3"}],["red",{textColor:"#F26691",bgColor:"#FFECF0"}],["lime",{textColor:"#5b8c00",bgColor:"#fcffe6"}],["magenta",{textColor:"#9e1068",bgColor:"#fff0f6"}],["volcano",{textColor:"#d4380d",bgColor:"#fff2e8"}],["gold",{textColor:"#ad6800",bgColor:"#fffbe6"}],["geekblue",{textColor:"#10239e",bgColor:"#f0f5ff"}],["gray",{textColor:"#666666",bgColor:"#F5F5F5"}]]),g=b()(U.keys());function M(j){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"type";if(!j)return j;var S=new Map;return j.forEach(function(C){if(!C[u])throw new Error("genColorMap error: miss key: "+u+" in element");if(!S.has(C[u])){var I=S.size%g.length,$=g[I],R=U.get($);S.set(C[u],d()(d()({},C),{},{color:R}))}}),S}},87976:function(w,D,a){"use strict";var A=a(13183),d="http://ai.tbanx.cn",Z=A.Z.create({baseURL:"".concat(d,"/api/"),headers:{Authorization:"senv2wk7w4jo93fn(um40lfdc!dycp#fcupm7^1ocdh6d@bn0t"}});D.Z=Z},62938:function(){}}]);
