(self.webpackChunkai_frontend=self.webpackChunkai_frontend||[]).push([[216,358,246],{72734:function(j,t,e){"use strict";e.r(t);var u=e(30279),d=e.n(u),l=e(44463),f=e.n(l),h=e(70412),i=e(75558),_=e(93236),m=e(62086),A=["type"],a=(0,_.memo)(function(U){var p=U.type,O=f()(U,A);switch(p){case"text":return(0,m.jsx)(h.default,d()({},O));case"videoUrl":case"imageUrl":return(0,m.jsx)(i.default,d()({},O));default:return(0,m.jsxs)("div",{children:["\u6682\u65E0\u6B64\u7C7B\u578B\u8F93\u5165\u6A21\u5757 : ",(0,m.jsx)("strong",{children:p})]})}});t.default=a},75558:function(j,t,e){"use strict";e.r(t),e.d(t,{default:function(){return V}});var u=e(93236),d=e(14536),l=e(86004),f=e(47277),h=e(30279),i=e.n(h),_=e(94434),m=e.n(_),A=e(35290),a=e.n(A),U=e(411),p=e.n(U),O=e(46686),L=e.n(O),C=e(65713),K=e(17986),W=e(66122),b=e(61654),F=e(87976);function N(){return x.apply(this,arguments)}function x(){return x=p()(a()().mark(function E(){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",F.Z.get("oss/sign"));case 1:case"end":return v.stop()}},E)})),x.apply(this,arguments)}var g=e(62086),$=(0,u.memo)(function(E){var B=E.value,v=E.onChange,y=E.children,T=E.onUploaded,Z=(0,u.useState)(),S=L()(Z,2),n=S[0],R=S[1],I=function(){var P=p()(a()().mark(function D(){var s,o;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,N();case 3:o=r.sent,R(o==null||(s=o.data)===null||s===void 0?void 0:s.data),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0),C.ZP.error("\u4E0A\u4F20\u5931\u8D25,\u8BF7\u7A0D\u540E\u91CD\u8BD5");case 11:case"end":return r.stop()}},D,null,[[0,7]])}));return function(){return P.apply(this,arguments)}}(),z=function(D){var s,o=D.fileList;console.log("Aliyun OSS:",o),v==null||v(m()(o)),o==null||(s=o.forEach)===null||s===void 0||s.call(o,function(c){if((c==null?void 0:c.percent)===100){var r=(n==null?void 0:n.host)+"/"+(c==null?void 0:c.url);T==null||T(r,c)}})},J=function(D){return{key:D.url,OSSAccessKeyId:n==null?void 0:n.OSSAccessKeyId,policy:n==null?void 0:n.policy,Signature:n==null?void 0:n.Signature}},H=function(){var P=p()(a()().mark(function D(s){var o,c,r;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(n){M.next=2;break}return M.abrupt("return",!1);case 2:if(o=Number(n.expire)*1e3,!(o<Date.now())){M.next=6;break}return M.next=6,I();case 6:return c=s.name.slice(s.name.lastIndexOf(".")),r=Date.now()+c,s.url=n.dir+"/"+r,M.abrupt("return",s);case 10:case"end":return M.stop()}},D)}));return function(s){return P.apply(this,arguments)}}(),Q={name:"file",fileList:B,multiple:!1,maxCount:1,accept:"video/*, image/*",action:n==null?void 0:n.host,onChange:z,data:J,beforeUpload:H,showUploadList:!1};return(0,g.jsx)(K.Z,i()(i()({},Q),{},{children:y||(0,g.jsx)(W.Z,{onClick:function(){I()},icon:(0,g.jsx)(b.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})}))}),X=$,G=(0,u.memo)(function(E){var B=E.value,v=E.onChange,y=v===void 0?function(){}:v,T=function(R){var I=R.target.value;y(I)},Z=(0,f.Z)(T,{wait:300}),S=Z.run;return(0,g.jsxs)("div",{children:[(0,g.jsx)(d.default,{src:B}),(0,g.jsxs)(l.Z.Group,{compact:!0,children:[(0,g.jsx)(l.Z,{style:{width:"80%"},value:B,onChange:S})," ",(0,g.jsx)(X,{onUploaded:function(R){y(R)}})]})]})}),V=G},14536:function(j,t,e){"use strict";e.r(t),e.d(t,{default:function(){return m}});var u=e(93236),d=e(41385),l=e(17771),f=e(5476),h={preview:"preview___Rqv6O"},i=e(62086),_=(0,u.memo)(function(A){var a=A.src,U=(0,l.A)({sources:[{src:a}],autoplay:"muted"}),p=U.Video,O=(0,u.useMemo)(function(){return a?(0,f.fromExtension)(a):void 0},[a]),L=(0,u.useMemo)(function(){var C=null;return O==="image"&&(C=(0,i.jsx)(d.Z,{src:a,width:300})),O==="video"&&(C=(0,i.jsx)(p,{src:a,width:300})),C},[p,O,a]);return(0,i.jsx)("div",{className:h.preview,children:L})}),m=_},70412:function(j,t,e){"use strict";e.r(t);var u=e(30279),d=e.n(u),l=e(93236),f=e(86004),h=e(62086),i=f.Z.TextArea,_=(0,l.memo)(function(m){return(0,h.jsx)(i,d()({rows:6,placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u5185\u5BB9."},m))});t.default=_},87976:function(j,t,e){"use strict";var u=e(13183),d="http://ai.tbanx.cn",l=u.Z.create({baseURL:"".concat(d,"/api/"),headers:{Authorization:"senv2wk7w4jo93fn(um40lfdc!dycp#fcupm7^1ocdh6d@bn0t"}});t.Z=l},72282:function(j,t,e){"use strict";e.d(t,{Z:function(){return l}});var u=e(38619),d=e(93236);function l(){var f=d.useReducer(function(_){return _+1},0),h=(0,u.Z)(f,2),i=h[1];return i}},62938:function(){}}]);
